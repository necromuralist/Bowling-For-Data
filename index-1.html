<!DOCTYPE html>
<html lang="en" prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article#">
<head>
<meta charset="utf-8">
<meta content="Striking out for data." name="description">
<meta content="width=device-width, initial-scale=1" name="viewport">
<title>Bowling For Data (old posts, page 1) | Bowling For Data</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta content="#5670d4" name="theme-color">
<meta content="Nikola (getnikola.com)" name="generator">
<link href="rss.xml" hreflang="en" rel="alternate" title="RSS" type="application/rss+xml">
<link href="https://necromuralist.github.io/Bowling-For-Data/index-1.html" rel="canonical">
<link href="index-2.html" rel="prev" type="text/html"><!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]-->
<script crossorigin="anonymous" integrity="sha384-3lJUsx1TJHt7BA4udB5KPnDrlkO8T6J6v/op7ui0BbCjvZ9WqV4Xm6DTP6kQ/iBH" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [['$','$'], ['\\(','\\)']],

            displayMath: [['$$','$$'], ['\\[','\\]']],
            processEscapes: true,
            processEnvironments: true,
        }
    });
</script>
<script src="https://cdn.jsdelivr.net/npm/pseudocode@2.4.1/build/pseudocode.min.js"></script>
</head>
<body>
<a class="sr-only sr-only-focusable" href="#content">Skip to main content</a> <!-- Menubar -->
<nav class="navbar navbar-expand-md static-top mb-4 navbar-light bg-light">
<div class="container"><!-- This keeps the margins nice -->
 <a class="navbar-brand" href="."><span id="blog-title">Bowling For Data</span></a> <button aria-controls="bs-navbar" aria-expanded="false" aria-label="Toggle navigation" class="navbar-toggler" data-target="#bs-navbar" data-toggle="collapse" type="button"><span class="navbar-toggler-icon"></span></button>
<div class="collapse navbar-collapse" id="bs-navbar">
<ul class="navbar-nav mr-auto">
<li class="nav-item"><a class="nav-link" href="pages/">Pages</a></li>
<li class="nav-item"><a class="nav-link" href="archive.html">Archive</a></li>
<li class="nav-item"><a class="nav-link" href="categories/">Tags</a></li>
<li class="nav-item"><a class="nav-link" href="rss.xml">RSS feed</a></li>
<li class="nav-item dropdown"><a aria-expanded="false" aria-haspopup="true" class="nav-link dropdown-toggle" data-toggle="dropdown" href="#">Monkey Pages</a>
<div class="dropdown-menu"><a class="dropdown-item" href="https://necromuralist.github.io/">The Cloistered Monkey</a> <a class="dropdown-item" href="https://necromuralist.github.io/Ape-Iron/">Ape Iron</a> <a class="dropdown-item" href="https://necromuralist.github.io/Beach-Pig-Thigh/">Beach-Pig Rump & Thigh</a> <a class="dropdown-item" href="https://necromuralist.github.io/Neurotic-Networking/">Neurotic Networking</a> <a class="dropdown-item" href="https://necromuralist.github.io/Terribilis-Ludum/">Terribilis Ludum</a> <a class="dropdown-item" href="https://necromuralist.github.io/Visions-Voices-Data/">Visions, Voices, Data</a></div>
</li>
</ul>
<!-- DuckDuckGo custom search -->
<form action="https://duckduckgo.com/" class="navbar-form pull-left" id="search" method="get" name="search"><input name="sites" type="hidden" value="https://necromuralist.github.io/Bowling-For-Data/"><input name="k8" type="hidden" value="#444444"><input name="k9" type="hidden" value="#D51920"><input name="kt" type="hidden" value="h"><input class="span2" maxlength="255" name="q" placeholder="Search…" style="margin-top: 4px;" type="text"><input style="visibility: hidden;" type="submit" value="DuckDuckGo Search"></form>
<!-- End of custom search -->
<ul class="navbar-nav navbar-right"></ul>
</div>
<!-- /.navbar-collapse --></div>
<!-- /.container --></nav>
<!-- End of Menubar -->
<div class="container" id="content" role="main">
<div class="body-content"><!--Body content-->
<div class="postindex">
<article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article">
<header>
<h1 class="p-name entry-title"><a class="u-url" href="posts/selection-sort/index.html">Selection Sort</a></h1>
<div class="metadata">
<p class="byline author vcard"><span class="byline-name fn" itemprop="author">The Cloistered Monkey</span></p>
<p class="dateline"><a href="posts/selection-sort/index.html" rel="bookmark"><time class="published dt-published" datetime="2021-11-23T15:17:43-08:00" itemprop="datePublished" title="2021-11-23 15:17">2021-11-23 15:17</time></a></p>
</div>
</header>
<div class="e-content entry-content">
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="posts/selection-sort/index.html#org0e2bc6b">Umm… Selection Sort?</a>
<ul>
<li><a href="posts/selection-sort/index.html#org433ac56">Imports</a></li>
<li><a href="posts/selection-sort/index.html#orgc3473fd">Set Up</a></li>
</ul>
</li>
<li><a href="posts/selection-sort/index.html#orgeddc5e2">Parts of the Algorithm</a></li>
<li><a href="posts/selection-sort/index.html#orge68fb60">The Pseudocode</a></li>
<li><a href="posts/selection-sort/index.html#org640f4ab">The Implementations</a>
<ul>
<li><a href="posts/selection-sort/index.html#org6f7f0e8">Selection Sort</a>
<ul>
<li><a href="posts/selection-sort/index.html#org998447a">Some Checks</a></li>
</ul>
</li>
<li><a href="posts/selection-sort/index.html#org383e939">Run It</a></li>
</ul>
</li>
<li><a href="posts/selection-sort/index.html#orgfb09601">Looking at the Swaps</a>
<ul>
<li><a href="posts/selection-sort/index.html#org6eb3592">Worst Case</a></li>
</ul>
</li>
<li><a href="posts/selection-sort/index.html#org000719b">Sources</a></li>
</ul>
</div>
</div>
<div class="outline-2" id="outline-container-org0e2bc6b">
<h2 id="org0e2bc6b">Umm… Selection Sort?</h2>
<div class="outline-text-2" id="text-org0e2bc6b">
<p>Yes, this continues the look at Brute-Force Sorting, begun with the <a href="pages/the-bubble-sort/index.html">The Bubble Sort</a>. With the selection sort you repeatedly select the smallest item in the unsorted section of the data and place it at the end of the sorted data until you have sorted all the items. <a href="posts/HTTAA/index.html">How To Think About Algorithms</a> classifies it as a <a href="posts/more-of-the-output/index.html">More of the Output</a> algorithm, one of the types of <a href="posts/iterative-algorithms/index.html">Iterative Algorithms</a>, while <a href="posts/itdaa/index.html">Introduction to the Design & Analysis of Algorithms (Levitin)</a> classifies it as a <b>Brute Force</b> algorithm.</p>
</div>
<div class="outline-3" id="outline-container-org433ac56">
<h3 id="org433ac56">Imports</h3>
<div class="outline-text-3" id="text-org433ac56">
<div class="highlight">
<pre><span></span><span class="c1"># python</span>
<span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">partial</span>
<span class="kn">from</span> <span class="nn">random</span> <span class="kn">import</span> <span class="n">shuffle</span>

<span class="c1"># pypi</span>
<span class="kn">from</span> <span class="nn">numba</span> <span class="kn">import</span> <span class="n">njit</span>
<span class="kn">from</span> <span class="nn">expects</span> <span class="kn">import</span> <span class="n">contain_exactly</span><span class="p">,</span> <span class="n">equal</span><span class="p">,</span> <span class="n">expect</span>
<span class="kn">from</span> <span class="nn">joblib</span> <span class="kn">import</span> <span class="n">Parallel</span><span class="p">,</span> <span class="n">delayed</span>
<span class="kn">from</span> <span class="nn">numpy.random</span> <span class="kn">import</span> <span class="n">default_rng</span>

<span class="kn">import</span> <span class="nn">altair</span>
<span class="kn">import</span> <span class="nn">numpy</span>
<span class="kn">import</span> <span class="nn">pandas</span>

<span class="c1"># this project</span>
<span class="kn">from</span> <span class="nn">bowling.sort.bubble.bubble</span> <span class="kn">import</span> <span class="n">bubble</span>
<span class="kn">from</span> <span class="nn">bowling.sort.selection</span> <span class="kn">import</span> <span class="n">selection_counter</span>
<span class="kn">from</span> <span class="nn">bowling.sort.selection.selection</span> <span class="kn">import</span> <span class="n">selection_swaps</span>

<span class="c1"># my stuff</span>
<span class="kn">from</span> <span class="nn">graeae.visualization.altair_helpers</span> <span class="kn">import</span> <span class="n">output_path</span><span class="p">,</span> <span class="n">save_chart</span>
<span class="kn">from</span> <span class="nn">graeae</span> <span class="kn">import</span> <span class="n">Timer</span>
</pre></div>
</div>
</div>
<div class="outline-3" id="outline-container-orgc3473fd">
<h3 id="orgc3473fd">Set Up</h3>
<div class="outline-text-3" id="text-orgc3473fd">
<div class="highlight">
<pre><span></span><span class="n">random</span> <span class="o">=</span> <span class="n">default_rng</span><span class="p">(</span><span class="mi">2021</span><span class="p">)</span>
<span class="n">TIMER</span> <span class="o">=</span> <span class="n">Timer</span><span class="p">()</span>

<span class="n">SLUG</span> <span class="o">=</span> <span class="s2">"selection-sort"</span>
<span class="n">OUTPUT_PATH</span> <span class="o">=</span> <span class="n">output_path</span><span class="p">(</span><span class="n">SLUG</span><span class="p">)</span>
<span class="n">save_it</span> <span class="o">=</span> <span class="n">partial</span><span class="p">(</span><span class="n">save_chart</span><span class="p">,</span> <span class="n">output_path</span><span class="o">=</span><span class="n">OUTPUT_PATH</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="outline-2" id="outline-container-orgeddc5e2">
<h2 id="orgeddc5e2">Parts of the Algorithm</h2>
<div class="outline-text-2" id="text-orgeddc5e2">
<table border="2" cellpadding="6" cellspacing="0" frame="hsides" rules="groups">
<colgroup>
<col class="org-left">
<col class="org-left"></colgroup>
<thead>
<tr>
<th class="org-left" scope="col">Item</th>
<th class="org-left" scope="col">Answer</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><b>Specification</b></td>
<td class="org-left">This is a <a href="posts/the-sorting-problem/index.html">Sorting Problem</a>.</td>
</tr>
<tr>
<td class="org-left"><b>Basic Steps</b></td>
<td class="org-left">We're going to repeatedly select the smallest item in the unselected.</td>
</tr>
<tr>
<td class="org-left"><b>Measure Progress</b></td>
<td class="org-left">We'll know we're progressing by the number of elements we've selected (<i>k</i>).</td>
</tr>
<tr>
<td class="org-left"><b>Loop Invariant</b></td>
<td class="org-left">None of the selected elements is larger than any element in the unselected and the selected items are in sorted order. The unselected items contain the largest elements in the list.</td>
</tr>
<tr>
<td class="org-left">What are the Main Steps?</td>
<td class="org-left">1. Find the smallest unsorted element</td>
</tr>
<tr>
<td class="org-left">&nbsp;</td>
<td class="org-left">2. Put the selected element at the end of the previously selected element(s)</td>
</tr>
<tr>
<td class="org-left"><b>Making Progress</b></td>
<td class="org-left">The number of selected items (<i>k</i>) always goes up after each loop.</td>
</tr>
<tr>
<td class="org-left"><b>Loop Invariant Maintenance</b></td>
<td class="org-left">- The previous Loop Invariant tells us that all the unselected items were at least as large or larger than the largest of the selected items.</td>
</tr>
<tr>
<td class="org-left">&nbsp;</td>
<td class="org-left">- We chose the largest item of the unselected so it's as big or bigger than the biggest selected item.</td>
</tr>
<tr>
<td class="org-left">&nbsp;</td>
<td class="org-left">- Putting the selected item at the end of the previously selected items maintains the Loop Invariant.</td>
</tr>
<tr>
<td class="org-left"><b>Establish the Loop Invariant</b></td>
<td class="org-left">At the start, no items have been selected so the Loop Invariant is vacuously true.</td>
</tr>
<tr>
<td class="org-left"><b>Exit-Condition</b></td>
<td class="org-left">We stop when all the items have been selected.</td>
</tr>
<tr>
<td class="org-left"><b>Ending</b></td>
<td class="org-left">- <i>Exit-Condition</i>: All items have been selected</td>
</tr>
<tr>
<td class="org-left">&nbsp;</td>
<td class="org-left">- <i>Loop Invariant</i>: All selected are sorted.</td>
</tr>
<tr>
<td class="org-left">&nbsp;</td>
<td class="org-left">- So our output has all the original items and they are now sorted, satisfying the <i>Postconditions</i>.</td>
</tr>
</tbody>
</table>
<p><b>Running Time</b></p>
\begin{align} C(n) &amp;= \sum_{i=0}^{n-2} \sum_{j=i+1}^{n-1} 1\\ &amp;= \frac{n(n-1)}{2} \in \Theta{n^2} \end{align}</div>
</div>
<div class="outline-2" id="outline-container-orge68fb60">
<h2 id="orge68fb60">The Pseudocode</h2>
<div class="outline-text-2" id="text-orge68fb60">
<pre id="selectionsort" style="display:hidden;">
\begin{algorithm}
\caption{SelectionSort}
\begin{algorithmic}
\INPUT An array of orderable items
\OUTPUT The array sorted in ascending order
\PROCEDURE{SelectionSort}{$A$}
  \FOR{$i \gets 0$ to $n - 2$}
    \STATE $min \gets i$
    \FOR{$j \gets i + 1$ to $n - 1$}
      \IF{$A[j] &lt; A[min]$}
       \STATE $min \gets j$
      \ENDIF
    \ENDFOR
    \STATE Swap $A[i]$ and $A[min]$
  \ENDFOR
\ENDPROCEDURE
\end{algorithmic}
\end{algorithm}
</pre>
<p>The outer loop (where <i>i</i> is set) tracks the number of items selected so far (which is the same thing as the size of the sorted section at the beginning of the list). The inner loop goes over the remaining, previously unselected, items in the list and looks for the index of the smallest item, it then puts that smallest item at the beginning of the unselected items and moves what was at the beginning to where the smallest item was. Once the swap is done, the sub-list on the left-side of the list is now bigger by one so the outer loop increments and then we search for the next smallest item, and so on until all the items have been selected (except for the last item) and the list is sorted.</p>
</div>
</div>
<div class="outline-2" id="outline-container-org640f4ab">
<h2 id="org640f4ab">The Implementations</h2>
<div class="outline-text-2" id="text-org640f4ab"></div>
<div class="outline-3" id="outline-container-org6f7f0e8">
<h3 id="org6f7f0e8">Selection Sort</h3>
<div class="outline-text-3" id="text-org6f7f0e8">
<p>This will be a straight translation of the pseudocode (or straight-ish).</p>
<div class="highlight">
<pre><span></span><span class="kn">from</span> <span class="nn">collections.abc</span> <span class="kn">import</span> <span class="n">MutableSequence</span>
<span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">namedtuple</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Any</span><span class="p">,</span> <span class="n">Dict</span>
</pre></div>
<div class="highlight">
<pre><span></span><span class="n">SelectionOutput</span> <span class="o">=</span> <span class="n">namedtuple</span><span class="p">(</span><span class="s2">"SelectionOutput"</span><span class="p">,</span>
                             <span class="p">[</span><span class="s2">"element_count"</span><span class="p">,</span>
                              <span class="s2">"comparisons"</span><span class="p">,</span>
                              <span class="s2">"swaps"</span><span class="p">,</span>
                              <span class="s2">"elements"</span><span class="p">])</span>
<span class="n">Swaps</span> <span class="o">=</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]]</span>
<span class="n">Sortable</span> <span class="o">=</span> <span class="n">MutableSequence</span><span class="p">[</span><span class="n">Any</span><span class="p">]</span>
</pre></div>
<div class="highlight">
<pre><span></span><span class="k">def</span> <span class="nf">selection_counter</span><span class="p">(</span><span class="n">elements</span><span class="p">:</span> <span class="n">Sortable</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">SelectionOutput</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""Does the selection sort on the elements</span>

<span class="sd">    Args:</span>
<span class="sd">     elements: list of orderable objects</span>

<span class="sd">    Returns:</span>
<span class="sd">     (number of elements, comparisons, swaps)</span>
<span class="sd">    """</span>
    <span class="n">number_of_elements</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">elements</span><span class="p">)</span>
    <span class="n">comparisons</span> <span class="o">=</span> <span class="n">swaps</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">for</span> <span class="n">start_of_unselected</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">number_of_elements</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
        <span class="n">smallest_unselected</span> <span class="o">=</span> <span class="n">start_of_unselected</span>
        <span class="k">for</span> <span class="n">next_unselected</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">start_of_unselected</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span>
                                     <span class="n">number_of_elements</span><span class="p">):</span>
            <span class="n">comparisons</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">if</span> <span class="n">elements</span><span class="p">[</span><span class="n">next_unselected</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">elements</span><span class="p">[</span><span class="n">smallest_unselected</span><span class="p">]:</span>
                <span class="n">smallest_unselected</span> <span class="o">=</span> <span class="n">next_unselected</span>
        <span class="n">swaps</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="n">elements</span><span class="p">[</span><span class="n">start_of_unselected</span><span class="p">],</span> <span class="n">elements</span><span class="p">[</span><span class="n">smallest_unselected</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">elements</span><span class="p">[</span><span class="n">smallest_unselected</span><span class="p">],</span> <span class="n">elements</span><span class="p">[</span><span class="n">start_of_unselected</span><span class="p">]</span>
        <span class="p">)</span>
    <span class="k">return</span> <span class="n">SelectionOutput</span><span class="p">(</span><span class="n">element_count</span><span class="o">=</span><span class="n">number_of_elements</span><span class="p">,</span>
                           <span class="n">comparisons</span><span class="o">=</span><span class="n">comparisons</span><span class="p">,</span>
                           <span class="n">swaps</span><span class="o">=</span><span class="n">swaps</span><span class="p">,</span>
                           <span class="n">elements</span><span class="o">=</span><span class="n">elements</span><span class="p">)</span>
</pre></div>
</div>
<div class="outline-4" id="outline-container-org998447a">
<h4 id="org998447a">Some Checks</h4>
<div class="outline-text-4" id="text-org998447a">
<div class="highlight">
<pre><span></span><span class="k">def</span> <span class="nf">check</span><span class="p">(</span><span class="n">collection</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">comparisons</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">swaps</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""Check that the sort worked</span>

<span class="sd">    Args:</span>
<span class="sd">     collection: the sorted collection</span>
<span class="sd">     n: number of elements in the collection</span>
<span class="sd">     comparisons: number of comparisons made</span>
<span class="sd">     swaps: number of swaps made</span>

<span class="sd">    Raises:</span>
<span class="sd">     AssertionError: some check didn't match</span>
<span class="sd">    """</span>
    <span class="n">expect</span><span class="p">(</span><span class="n">n</span><span class="p">)</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">equal</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">collection</span><span class="p">)))</span>
    <span class="n">runtime</span> <span class="o">=</span> <span class="p">(</span><span class="n">n</span> <span class="o">*</span> <span class="p">(</span><span class="n">n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">))</span><span class="o">/</span><span class="mi">2</span>
    <span class="n">expect</span><span class="p">(</span><span class="n">comparisons</span><span class="p">)</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">equal</span><span class="p">(</span><span class="n">runtime</span><span class="p">))</span>
    <span class="n">expect</span><span class="p">(</span><span class="n">swaps</span><span class="p">)</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">equal</span><span class="p">(</span><span class="n">n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">))</span>
    <span class="n">expect</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">collection</span><span class="p">))</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">contain_exactly</span><span class="p">(</span><span class="o">*</span><span class="nb">list</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="n">collection</span><span class="p">))))</span>
    <span class="k">return</span>

<span class="n">test</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="n">n</span><span class="p">,</span> <span class="n">comparisons</span><span class="p">,</span> <span class="n">swaps</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">selection_counter</span><span class="p">(</span><span class="n">test</span><span class="p">)</span>
<span class="n">check</span><span class="p">(</span><span class="n">test</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">comparisons</span><span class="p">,</span> <span class="n">swaps</span><span class="p">)</span>

<span class="n">test</span> <span class="o">=</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
<span class="n">n</span><span class="p">,</span> <span class="n">comparisons</span><span class="p">,</span> <span class="n">swaps</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">selection_counter</span><span class="p">(</span><span class="n">test</span><span class="p">)</span>
<span class="n">check</span><span class="p">(</span><span class="n">test</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">comparisons</span><span class="p">,</span> <span class="n">swaps</span><span class="p">)</span>

<span class="n">COUNT</span> <span class="o">=</span> <span class="mi">1000</span>
<span class="n">test</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">integers</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">high</span><span class="o">=</span><span class="n">COUNT</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="n">COUNT</span><span class="p">)</span>
<span class="n">n</span><span class="p">,</span> <span class="n">comparisons</span><span class="p">,</span> <span class="n">swaps</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">selection_counter</span><span class="p">(</span><span class="n">test</span><span class="p">)</span>
<span class="n">check</span><span class="p">(</span><span class="n">test</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">comparisons</span><span class="p">,</span> <span class="n">swaps</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="outline-3" id="outline-container-org383e939">
<h3 id="org383e939">Run It</h3>
<div class="outline-text-3" id="text-org383e939">
<p>So, let's see how it does. We'll set the selection sort up as a numba function and set up the things to sort so that we can compare it to the bubble sort.</p>
<div class="highlight">
<pre><span></span><span class="n">numba_selection</span> <span class="o">=</span> <span class="n">njit</span><span class="p">(</span><span class="n">selection_counter</span><span class="p">)</span>
<span class="n">things_to_sort</span> <span class="o">=</span> <span class="p">[</span><span class="n">random</span><span class="o">.</span><span class="n">integers</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">high</span><span class="o">=</span><span class="n">count</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="n">count</span><span class="p">)</span>
                  <span class="k">for</span> <span class="n">count</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="o">**</span><span class="mi">5</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)]</span>
</pre></div>
<div class="highlight">
<pre><span></span><span class="k">with</span> <span class="n">TIMER</span><span class="p">:</span>
    <span class="n">elements_comparisons_and_swaps</span> <span class="o">=</span> <span class="n">Parallel</span><span class="p">(</span><span class="n">n_jobs</span><span class="o">=-</span><span class="mi">1</span><span class="p">)(</span>
        <span class="n">delayed</span><span class="p">(</span><span class="n">numba_selection</span><span class="p">)(</span><span class="n">thing_to_sort</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">thing_to_sort</span> <span class="ow">in</span> <span class="n">things_to_sort</span><span class="p">)</span>
</pre></div>
<pre class="example">
Started: 2022-01-11 00:05:00.866956
Ended: 2022-01-11 00:05:41.085584
Elapsed: 0:00:40.218628
</pre>
<p>Let's plot the comparisons and swaps.</p>
<div class="highlight">
<pre><span></span><span class="n">SIZE</span><span class="p">,</span> <span class="n">COMPARISONS</span><span class="p">,</span> <span class="n">SWAPS</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span>
<span class="n">unzipped</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="n">elements_comparisons_and_swaps</span><span class="p">))</span>
<span class="n">count_frame</span> <span class="o">=</span> <span class="n">pandas</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">"Elements"</span><span class="p">:</span> <span class="n">unzipped</span><span class="p">[</span><span class="n">SIZE</span><span class="p">],</span>
                                <span class="s2">"Selection Comparisons"</span><span class="p">:</span> <span class="n">unzipped</span><span class="p">[</span><span class="n">COMPARISONS</span><span class="p">],</span>
                                <span class="s2">"Selection Swaps"</span><span class="p">:</span> <span class="n">unzipped</span><span class="p">[</span><span class="n">SWAPS</span><span class="p">]})</span>
</pre></div>
<div class="highlight">
<pre><span></span><span class="n">base</span> <span class="o">=</span> <span class="n">altair</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">count_frame</span><span class="p">)</span><span class="o">.</span><span class="n">mark_point</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">x</span> <span class="o">=</span> <span class="s2">"Elements"</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">comparisons</span> <span class="o">=</span> <span class="n">base</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">y</span><span class="o">=</span><span class="s2">"Selection Comparisons"</span><span class="p">,</span>
    <span class="n">tooltip</span><span class="o">=</span><span class="p">[</span><span class="n">altair</span><span class="o">.</span><span class="n">Tooltip</span><span class="p">(</span><span class="s2">"Elements"</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s2">","</span><span class="p">),</span>
             <span class="n">altair</span><span class="o">.</span><span class="n">Tooltip</span><span class="p">(</span><span class="s2">"Selection Comparisons"</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s2">","</span><span class="p">),</span>
             <span class="n">altair</span><span class="o">.</span><span class="n">Tooltip</span><span class="p">(</span><span class="s2">"Selection Swaps"</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s2">","</span><span class="p">)]</span>
<span class="p">)</span><span class="o">.</span><span class="n">properties</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">"Selection Sort Comparisons"</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">800</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">250</span><span class="p">)</span>

<span class="n">swaps</span> <span class="o">=</span> <span class="n">base</span><span class="o">.</span><span class="n">mark_point</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s2">"DarkRed"</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">x</span><span class="o">=</span><span class="s2">"Elements"</span><span class="p">,</span>
    <span class="n">y</span><span class="o">=</span><span class="s2">"Selection Swaps"</span><span class="p">,</span>
    <span class="n">tooltip</span><span class="o">=</span><span class="p">[</span><span class="n">altair</span><span class="o">.</span><span class="n">Tooltip</span><span class="p">(</span><span class="s2">"Elements"</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s2">","</span><span class="p">),</span>
             <span class="n">altair</span><span class="o">.</span><span class="n">Tooltip</span><span class="p">(</span><span class="s2">"Selection Comparisons"</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s2">","</span><span class="p">),</span>
             <span class="n">altair</span><span class="o">.</span><span class="n">Tooltip</span><span class="p">(</span><span class="s2">"Selection Swaps"</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s2">","</span><span class="p">)]</span>
<span class="p">)</span><span class="o">.</span><span class="n">properties</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">"Selection Sort Swaps"</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">800</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">250</span><span class="p">)</span>

<span class="n">chart</span> <span class="o">=</span> <span class="p">(</span><span class="n">comparisons</span> <span class="o">&</span> <span class="n">swaps</span><span class="p">)</span>

<span class="n">save_it</span><span class="p">(</span><span class="n">chart</span><span class="p">,</span> <span class="s2">"selection-sort-comparisons"</span><span class="p">)</span>
</pre></div>
<object data="posts/selection-sort/selection-sort-comparisons.html" height="600" style="width:100%" type="text/html">
<p>Figure Missing</p>
</object>
<p>It's important to note the scale of the y-axes here - when I tried putting the comparisons and swaps on the same plot it was pretty much impossible to see the slope of the swaps, even when zoomed way in. Unlike the Bubble Sort, the Selection Sort's swaps have a linear growth instead of a quadratic growth.</p>
</div>
</div>
</div>
<div class="outline-2" id="outline-container-orgfb09601">
<h2 id="orgfb09601">Looking at the Swaps</h2>
<div class="outline-text-2" id="text-orgfb09601">
<p>Here's where it might be a little more interesting. We can do the same exercise we did with the bubble sort and plot the actual swaps to see if we can see the sorting in action.</p>
<div class="highlight">
<pre><span></span><span class="k">def</span> <span class="nf">selection_swaps</span><span class="p">(</span><span class="n">elements</span><span class="p">:</span> <span class="n">Sortable</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Swaps</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""Keeps track of the element indexes as they are swapped</span>

<span class="sd">    Args:</span>
<span class="sd">     elements: list of orderable elements</span>

<span class="sd">    Returns:</span>
<span class="sd">     dict mapping element to list of indices where it was in the elements list</span>
<span class="sd">    """</span>
    <span class="n">swaps</span> <span class="o">=</span> <span class="p">{</span><span class="n">element</span><span class="p">:</span> <span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">element</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">elements</span><span class="p">)}</span>

    <span class="n">number_of_elements</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">elements</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">start_of_unselected</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">number_of_elements</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
        <span class="n">smallest_unselected</span> <span class="o">=</span> <span class="n">start_of_unselected</span>

        <span class="k">for</span> <span class="n">next_unselected</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">start_of_unselected</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span>
                                     <span class="n">number_of_elements</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">elements</span><span class="p">[</span><span class="n">next_unselected</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">elements</span><span class="p">[</span><span class="n">smallest_unselected</span><span class="p">]:</span>
                <span class="n">smallest_unselected</span> <span class="o">=</span> <span class="n">next_unselected</span>

        <span class="n">elements</span><span class="p">[</span><span class="n">start_of_unselected</span><span class="p">],</span> <span class="n">elements</span><span class="p">[</span><span class="n">smallest_unselected</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">elements</span><span class="p">[</span><span class="n">smallest_unselected</span><span class="p">],</span> <span class="n">elements</span><span class="p">[</span><span class="n">start_of_unselected</span><span class="p">]</span>
        <span class="p">)</span>

        <span class="c1"># record the location of the elements</span>
        <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">element</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">elements</span><span class="p">):</span>
            <span class="n">swaps</span><span class="p">[</span><span class="n">element</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">swaps</span>
</pre></div>
<p>Because we're tracking the swaps with a dict there can't be any repetitions in the inputs, so I'll use python instead of numpy to make the randomized input since it seems clearer to me.</p>
<div class="highlight">
<pre><span></span><span class="n">COUNT</span> <span class="o">=</span> <span class="mi">50</span>

<span class="n">inputs</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">COUNT</span><span class="p">))</span>
<span class="n">shuffle</span><span class="p">(</span><span class="n">inputs</span><span class="p">)</span>
<span class="n">swaps</span> <span class="o">=</span> <span class="n">selection_swaps</span><span class="p">(</span><span class="n">inputs</span><span class="p">)</span>

<span class="n">track_frame</span> <span class="o">=</span> <span class="n">pandas</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">swaps</span><span class="p">)</span>
<span class="n">re_indexed</span> <span class="o">=</span> <span class="n">track_frame</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s2">"index"</span><span class="p">:</span> <span class="s2">"Swap"</span><span class="p">})</span>
<span class="n">melted</span> <span class="o">=</span> <span class="n">re_indexed</span><span class="o">.</span><span class="n">melt</span><span class="p">(</span><span class="n">var_name</span><span class="o">=</span><span class="s2">"Value To Sort"</span><span class="p">,</span>
                         <span class="n">value_name</span><span class="o">=</span><span class="s2">"Location In Array"</span><span class="p">,</span> <span class="n">id_vars</span><span class="o">=</span><span class="s2">"Swap"</span><span class="p">)</span>
</pre></div>
<div class="highlight">
<pre><span></span><span class="n">chart</span> <span class="o">=</span> <span class="n">altair</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">melted</span><span class="p">)</span><span class="o">.</span><span class="n">mark_line</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">x</span><span class="o">=</span><span class="s2">"Swap"</span><span class="p">,</span>
    <span class="n">y</span><span class="o">=</span><span class="s2">"Location In Array"</span><span class="p">,</span>
    <span class="n">color</span><span class="o">=</span><span class="s2">"Value To Sort:O"</span><span class="p">,</span>
    <span class="n">tooltip</span><span class="o">=</span><span class="p">[</span><span class="s2">"Swap"</span><span class="p">,</span> <span class="s2">"Location In Array"</span><span class="p">,</span> <span class="s2">"Value To Sort"</span><span class="p">]</span>
<span class="p">)</span><span class="o">.</span><span class="n">properties</span><span class="p">(</span>
    <span class="n">title</span><span class="o">=</span><span class="s2">"Selection Sort Swaps"</span><span class="p">,</span>
    <span class="n">width</span><span class="o">=</span><span class="mi">800</span><span class="p">,</span>
    <span class="n">height</span><span class="o">=</span><span class="mi">525</span><span class="p">,</span>
<span class="p">)</span><span class="o">.</span><span class="n">interactive</span><span class="p">()</span>

<span class="n">save_it</span><span class="p">(</span><span class="n">chart</span><span class="p">,</span> <span class="s2">"selection-sort-swaps"</span><span class="p">)</span>
</pre></div>
<object data="posts/selection-sort/selection-sort-swaps.html" height="600" style="width:100%" type="text/html">
<p>Figure Missing</p>
</object>
<p>Since I put in more inputs than I did with the Bubble Sort, the actual swaps aren't so easy to see, here, but the point of this plot is to show the (imaginary) diagonal line running from the bottom left corner up to the upper right. This shows why it's called a "More of the Output" algorithm - with each loop (represented by a "Swap" on the X-axis) one more sorted item is added to the beginning of the list (the bottom of the chart) from the unsorted part (the section above the imaginary diagonal of the chart) until you end up with a sorted list.</p>
<p>Since the Selection Sort always checks all the items in the "unsorted" section, the lengths of the lines above the diagonal as they move up and down don't really have a significance, they're just single swaps. What matters more is that the section below the diagonal is "sorted" and when picking the next item the algorithm has to check every element above the diagonal to find the next smallest item.</p>
</div>
<div class="outline-3" id="outline-container-org6eb3592">
<h3 id="org6eb3592">Worst Case</h3>
<div class="outline-text-3" id="text-org6eb3592">
<div class="highlight">
<pre><span></span><span class="n">COUNT</span> <span class="o">=</span> <span class="mi">50</span>

<span class="n">inputs</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">reversed</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">COUNT</span><span class="p">)))</span>
<span class="n">swaps</span> <span class="o">=</span> <span class="n">selection_swaps</span><span class="p">(</span><span class="n">inputs</span><span class="p">)</span>

<span class="n">track_frame</span> <span class="o">=</span> <span class="n">pandas</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">swaps</span><span class="p">)</span>
<span class="n">re_indexed</span> <span class="o">=</span> <span class="n">track_frame</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s2">"index"</span><span class="p">:</span> <span class="s2">"Swap"</span><span class="p">})</span>
<span class="n">melted</span> <span class="o">=</span> <span class="n">re_indexed</span><span class="o">.</span><span class="n">melt</span><span class="p">(</span><span class="n">var_name</span><span class="o">=</span><span class="s2">"Value To Sort"</span><span class="p">,</span>
                         <span class="n">value_name</span><span class="o">=</span><span class="s2">"Location In Array"</span><span class="p">,</span> <span class="n">id_vars</span><span class="o">=</span><span class="s2">"Swap"</span><span class="p">)</span>
</pre></div>
<div class="highlight">
<pre><span></span><span class="n">chart</span> <span class="o">=</span> <span class="n">altair</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">melted</span><span class="p">)</span><span class="o">.</span><span class="n">mark_line</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">x</span><span class="o">=</span><span class="s2">"Swap"</span><span class="p">,</span>
    <span class="n">y</span><span class="o">=</span><span class="s2">"Location In Array"</span><span class="p">,</span>
    <span class="n">color</span><span class="o">=</span><span class="s2">"Value To Sort:O"</span><span class="p">,</span>
    <span class="n">tooltip</span><span class="o">=</span><span class="p">[</span><span class="s2">"Swap"</span><span class="p">,</span> <span class="s2">"Location In Array"</span><span class="p">,</span> <span class="s2">"Value To Sort"</span><span class="p">]</span>
<span class="p">)</span><span class="o">.</span><span class="n">properties</span><span class="p">(</span>
    <span class="n">title</span><span class="o">=</span><span class="s2">"Selection Sort Locations (Worst Case)"</span><span class="p">,</span>
    <span class="n">width</span><span class="o">=</span><span class="mi">800</span><span class="p">,</span>
    <span class="n">height</span><span class="o">=</span><span class="mi">525</span><span class="p">,</span>
<span class="p">)</span><span class="o">.</span><span class="n">interactive</span><span class="p">()</span>

<span class="n">save_it</span><span class="p">(</span><span class="n">chart</span><span class="p">,</span> <span class="s2">"selection-sort-locations-worst-case"</span><span class="p">)</span>
</pre></div>
<object data="posts/selection-sort/selection-sort-locations-worst-case.html" height="600" style="width:100%" type="text/html">
<p>Figure Missing</p>
</object>
<p>This produces kind of an interesting figure… Since the input list is in exactly the backwards order (from largest element to smallest), and the selection sort traverses the list from start to end and swaps out each element with the smallest element to the right of the current element, we are always swapping out the largest element remaining for the smallest remaining element, so although the algorithm doesn't specifically try to do it, it's putting both the smallest unsorted element in place and the largest unsorted element in place with each swap, so it's actually done sorting at the halfway point. We could, then create a short-circuit version of this as well, to make it quit if there's no element in the unsorted smaller than the elements sorted so far, but as with the bubble sort, this would most-likely only help in outside cases like these.</p>
</div>
</div>
</div>
<div class="outline-2" id="outline-container-org000719b">
<h2 id="org000719b">Sources</h2>
<div class="outline-text-2" id="text-org000719b">
<ul class="org-ul">
<li><a href="posts/HTTAA/index.html">How To Think About Algorithms</a></li>
<li><a href="posts/itdaa/index.html">Introduction to the Design & Analysis of Algorithms (Levitin)</a></li>
</ul>
<script>
window.addEventListener('load', function () {
    pseudocode.renderElement(document.getElementById("selectionsort"));
});
</script></div>
</div>
</div>
</article>
<article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article">
<header>
<h1 class="p-name entry-title"><a class="u-url" href="posts/double-bubble-sort/index.html">Bubble-Sort Revisited</a></h1>
<div class="metadata">
<p class="byline author vcard"><span class="byline-name fn" itemprop="author">The Cloistered Monkey</span></p>
<p class="dateline"><a href="posts/double-bubble-sort/index.html" rel="bookmark"><time class="published dt-published" datetime="2021-11-19T17:14:43-08:00" itemprop="datePublished" title="2021-11-19 17:14">2021-11-19 17:14</time></a></p>
</div>
</header>
<div class="e-content entry-content">
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="posts/double-bubble-sort/index.html#orgf97d049">In the Beginning</a>
<ul>
<li><a href="posts/double-bubble-sort/index.html#org63d29cc">Some Setup</a>
<ul>
<li><a href="posts/double-bubble-sort/index.html#orgae21335">Imports</a></li>
<li><a href="posts/double-bubble-sort/index.html#orgd6f6f4d">Stuff For Later</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="posts/double-bubble-sort/index.html#orga4ddc04">The Sorters</a>
<ul>
<li><a href="posts/double-bubble-sort/index.html#org35f6ab4">Bubba Sort</a>
<ul>
<li><a href="posts/double-bubble-sort/index.html#org189cece">Bubba</a></li>
<li><a href="posts/double-bubble-sort/index.html#org48db080">Bubble</a></li>
<li><a href="posts/double-bubble-sort/index.html#orgc05f7b9">Test It Out</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="posts/double-bubble-sort/index.html#org40a7d80">Counting Comparisons</a>
<ul>
<li><a href="posts/double-bubble-sort/index.html#org6f1a749">Set Up Numba</a></li>
<li><a href="posts/double-bubble-sort/index.html#org359e477">Run The Bubble Counter</a></li>
<li><a href="posts/double-bubble-sort/index.html#orgb2068b4">Run the Bubba Counter</a></li>
<li><a href="posts/double-bubble-sort/index.html#org688c7cf">Best Case, Worst Case</a></li>
</ul>
</li>
<li><a href="posts/double-bubble-sort/index.html#orge13a756">The End, The End</a></li>
</ul>
</div>
</div>
<p>This is a continuation of a <a href="pages/the-bubble-sort/index.html">series on the Bubble Sort</a>.</p>
<div class="outline-2" id="outline-container-orgf97d049">
<h2 id="orgf97d049">In the Beginning</h2>
<div class="outline-text-2" id="text-orgf97d049">
<p>In the <a href="posts/bubble-sort-an-empirical-look/index.html">previous bubble sort post</a> I implemented the basic bubble sort, but there is a variation of it where you short-circuit the search if the collection is already sorted which is what I'll look at here. The short-circuiting means that the bubble sort can sometimes do better than other methods, but only when the data is mostly sorted so it's still not a practical algorithm. Why do this, then? Eh, why not?</p>
</div>
<div class="outline-3" id="outline-container-org63d29cc">
<h3 id="org63d29cc">Some Setup</h3>
<div class="outline-text-3" id="text-org63d29cc"></div>
<div class="outline-4" id="outline-container-orgae21335">
<h4 id="orgae21335">Imports</h4>
<div class="outline-text-4" id="text-orgae21335">
<div class="highlight">
<pre><span></span><span class="c1"># python</span>
<span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">partial</span>

<span class="c1"># pypi</span>
<span class="c1"># from bokeh.models import HoverTool</span>
<span class="kn">from</span> <span class="nn">expects</span> <span class="kn">import</span> <span class="n">be_below</span><span class="p">,</span> <span class="n">contain_exactly</span><span class="p">,</span> <span class="n">equal</span><span class="p">,</span> <span class="n">expect</span>
<span class="kn">from</span> <span class="nn">joblib</span> <span class="kn">import</span> <span class="n">Parallel</span><span class="p">,</span> <span class="n">delayed</span>
<span class="kn">from</span> <span class="nn">numba</span> <span class="kn">import</span> <span class="n">njit</span>
<span class="kn">from</span> <span class="nn">numba.typed</span> <span class="kn">import</span> <span class="n">List</span>
<span class="kn">from</span> <span class="nn">numpy.random</span> <span class="kn">import</span> <span class="n">default_rng</span>

<span class="kn">import</span> <span class="nn">altair</span>
<span class="kn">import</span> <span class="nn">numpy</span>
<span class="kn">import</span> <span class="nn">pandas</span>

<span class="c1"># this project</span>
<span class="kn">from</span> <span class="nn">graeae.visualization.altair_helpers</span> <span class="kn">import</span> <span class="n">output_path</span><span class="p">,</span> <span class="n">save_chart</span>
<span class="kn">from</span> <span class="nn">bowling.sort.bubble</span> <span class="kn">import</span> <span class="n">bubble</span><span class="p">,</span> <span class="n">BubbleOutput</span>

<span class="c1"># my other stuff</span>
<span class="kn">from</span> <span class="nn">graeae</span> <span class="kn">import</span> <span class="n">Timer</span>
</pre></div>
</div>
</div>
<div class="outline-4" id="outline-container-orgd6f6f4d">
<h4 id="orgd6f6f4d">Stuff For Later</h4>
<div class="outline-text-4" id="text-orgd6f6f4d">
<div class="highlight">
<pre><span></span><span class="n">TIMER</span> <span class="o">=</span> <span class="n">Timer</span><span class="p">()</span>
<span class="n">SLUG</span> <span class="o">=</span> <span class="s2">"double-bubble-sort"</span>
<span class="n">OUTPUT_PATH</span> <span class="o">=</span> <span class="n">output_path</span><span class="p">(</span><span class="n">SLUG</span><span class="p">)</span>
<span class="n">random</span> <span class="o">=</span> <span class="n">default_rng</span><span class="p">(</span><span class="mi">2021</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="outline-2" id="outline-container-orga4ddc04">
<h2 id="orga4ddc04">The Sorters</h2>
<div class="outline-text-2" id="text-orga4ddc04"></div>
<div class="outline-3" id="outline-container-org35f6ab4">
<h3 id="org35f6ab4">Bubba Sort</h3>
<div class="outline-text-3" id="text-org35f6ab4">
<p>This will be the short-circuiting version of the bubble sort.</p>
</div>
<div class="outline-4" id="outline-container-org189cece">
<h4 id="org189cece">Bubba</h4>
<div class="outline-text-4" id="text-org189cece">
<p>This is the short-circuiter. It works pretty much the same way with just an extra if-statement to break out of the loop if nothing was swapped.</p>
<div class="highlight">
<pre><span></span><span class="k">def</span> <span class="nf">bubba</span><span class="p">(</span><span class="n">elements</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">BubbleOutput</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""Sorts the list in place</span>

<span class="sd">    Args:</span>
<span class="sd">     elements: list of (in-place) sortable elements</span>

<span class="sd">    Returns:</span>
<span class="sd">     number of elements, count of comparisons</span>
<span class="sd">    """</span>
    <span class="n">all_but_one</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">elements</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span>
    <span class="n">comparisons</span> <span class="o">=</span> <span class="n">swaps</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">items_sorted</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">all_but_one</span><span class="p">):</span>
        <span class="n">swapped_at_least_once</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">for</span> <span class="n">in_front_of_us</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">all_but_one</span> <span class="o">-</span> <span class="n">items_sorted</span><span class="p">):</span>
            <span class="n">comparisons</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="n">to_the_right</span> <span class="o">=</span> <span class="n">in_front_of_us</span> <span class="o">+</span> <span class="mi">1</span>
            <span class="k">if</span> <span class="n">elements</span><span class="p">[</span><span class="n">to_the_right</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">elements</span><span class="p">[</span><span class="n">in_front_of_us</span><span class="p">]:</span>
                <span class="p">(</span><span class="n">elements</span><span class="p">[</span><span class="n">in_front_of_us</span><span class="p">],</span>
                 <span class="n">elements</span><span class="p">[</span><span class="n">to_the_right</span><span class="p">])</span> <span class="o">=</span> <span class="p">(</span><span class="n">elements</span><span class="p">[</span><span class="n">to_the_right</span><span class="p">],</span>
                                          <span class="n">elements</span><span class="p">[</span><span class="n">in_front_of_us</span><span class="p">])</span>
                <span class="n">swapped_at_least_once</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="n">swaps</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">swapped_at_least_once</span><span class="p">:</span>
            <span class="k">break</span>
    <span class="k">return</span> <span class="n">BubbleOutput</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">elements</span><span class="p">),</span> <span class="n">comparisons</span><span class="p">,</span> <span class="n">swaps</span><span class="p">,</span> <span class="n">elements</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="outline-4" id="outline-container-org48db080">
<h4 id="org48db080">Bubble</h4>
<div class="outline-text-4" id="text-org48db080">
<p>I showed how I implement the bubble sort in the <a href="posts/bubble-sort-an-empirical-look/index.html">previous bubble sort post</a> so, since I imported it up above, I'm just going to run it.</p>
</div>
</div>
<div class="outline-4" id="outline-container-orgc05f7b9">
<h4 id="orgc05f7b9">Test It Out</h4>
<div class="outline-text-4" id="text-orgc05f7b9">
<p>Once again, let's just make sure everything works.</p>
<div class="highlight">
<pre><span></span><span class="n">inputs</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>

<span class="n">expected</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="n">inputs</span><span class="p">))</span>

<span class="n">test_1</span><span class="p">,</span> <span class="n">test_2</span> <span class="o">=</span> <span class="n">inputs</span><span class="o">.</span><span class="n">copy</span><span class="p">(),</span> <span class="n">inputs</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

<span class="n">bubba_output</span> <span class="o">=</span> <span class="n">bubba</span><span class="p">(</span><span class="n">test_1</span><span class="p">)</span>
<span class="n">original_output</span> <span class="o">=</span> <span class="n">bubble</span><span class="p">(</span><span class="n">test_2</span><span class="p">)</span>

<span class="n">expect</span><span class="p">(</span><span class="n">test_1</span><span class="p">)</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">contain_exactly</span><span class="p">(</span><span class="o">*</span><span class="n">expected</span><span class="p">))</span>
<span class="n">expect</span><span class="p">(</span><span class="n">test_2</span><span class="p">)</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">contain_exactly</span><span class="p">(</span><span class="o">*</span><span class="n">expected</span><span class="p">))</span>

<span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">inputs</span><span class="p">)</span>
<span class="n">worst</span> <span class="o">=</span> <span class="p">(</span><span class="n">n</span> <span class="o">*</span> <span class="p">(</span><span class="n">n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">))</span><span class="o">/</span><span class="mi">2</span>
<span class="n">expect</span><span class="p">(</span><span class="n">bubba_output</span><span class="o">.</span><span class="n">comparisons</span><span class="p">)</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">be_below</span><span class="p">(</span><span class="n">worst</span><span class="p">))</span>
<span class="n">expect</span><span class="p">(</span><span class="n">bubba_output</span><span class="o">.</span><span class="n">comparisons</span><span class="p">)</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">equal</span><span class="p">(</span><span class="mi">15</span><span class="p">))</span>

<span class="n">expect</span><span class="p">(</span><span class="n">bubba_output</span><span class="o">.</span><span class="n">swaps</span><span class="p">)</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">equal</span><span class="p">(</span><span class="n">original_output</span><span class="o">.</span><span class="n">swaps</span><span class="p">))</span>
<span class="n">expect</span><span class="p">(</span><span class="n">original_output</span><span class="o">.</span><span class="n">comparisons</span><span class="p">)</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">equal</span><span class="p">(</span><span class="n">worst</span><span class="p">))</span>

<span class="c1"># try a bigger input</span>
<span class="n">inputs</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">)),</span> <span class="n">size</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
<span class="n">expected</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="n">inputs</span><span class="p">))</span>

<span class="n">test_1</span><span class="p">,</span> <span class="n">test_2</span> <span class="o">=</span> <span class="n">inputs</span><span class="o">.</span><span class="n">copy</span><span class="p">(),</span> <span class="n">inputs</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

<span class="n">bubba_output</span> <span class="o">=</span> <span class="n">bubba</span><span class="p">(</span><span class="n">test_1</span><span class="p">)</span>
<span class="n">original_output</span> <span class="o">=</span> <span class="n">bubble</span><span class="p">(</span><span class="n">test_2</span><span class="p">)</span>

<span class="n">expect</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">test_1</span><span class="p">))</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">contain_exactly</span><span class="p">(</span><span class="o">*</span><span class="n">expected</span><span class="p">))</span>
<span class="n">expect</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">test_2</span><span class="p">))</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">contain_exactly</span><span class="p">(</span><span class="o">*</span><span class="n">expected</span><span class="p">))</span>

<span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">inputs</span><span class="p">)</span>
<span class="n">worst</span> <span class="o">=</span> <span class="p">(</span><span class="n">n</span> <span class="o">*</span> <span class="p">(</span><span class="n">n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">))</span><span class="o">/</span><span class="mi">2</span>
<span class="n">expect</span><span class="p">(</span><span class="n">bubba_output</span><span class="o">.</span><span class="n">comparisons</span><span class="p">)</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">be_below</span><span class="p">(</span><span class="n">worst</span><span class="p">))</span>
<span class="n">expect</span><span class="p">(</span><span class="n">original_output</span><span class="o">.</span><span class="n">comparisons</span><span class="p">)</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">equal</span><span class="p">(</span><span class="n">worst</span><span class="p">))</span>

<span class="n">expect</span><span class="p">(</span><span class="n">bubba_output</span><span class="o">.</span><span class="n">swaps</span><span class="p">)</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">equal</span><span class="p">(</span><span class="n">original_output</span><span class="o">.</span><span class="n">swaps</span><span class="p">))</span>
<span class="n">expect</span><span class="p">(</span><span class="n">original_output</span><span class="o">.</span><span class="n">comparisons</span><span class="p">)</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">equal</span><span class="p">(</span><span class="n">worst</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="outline-2" id="outline-container-org40a7d80">
<h2 id="org40a7d80">Counting Comparisons</h2>
<div class="outline-text-2" id="text-org40a7d80">
<p>Since the actual method of sorting is the same the swaps should be the same in either case (the new version doesn't quit until there's no more swaps to be done) so I'll just look at the comparisons and see if it made any real difference.</p>
</div>
<div class="outline-3" id="outline-container-org6f1a749">
<h3 id="org6f1a749">Set Up Numba</h3>
<div class="outline-text-3" id="text-org6f1a749">
<div class="highlight">
<pre><span></span><span class="n">bubba</span> <span class="o">=</span> <span class="n">njit</span><span class="p">(</span><span class="n">bubba</span><span class="p">,</span> <span class="n">nogil</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">bubble</span> <span class="o">=</span> <span class="n">njit</span><span class="p">(</span><span class="n">bubble</span><span class="p">,</span> <span class="n">nogil</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="outline-3" id="outline-container-org359e477">
<h3 id="org359e477">Run The Bubble Counter</h3>
<div class="outline-text-3" id="text-org359e477">
<div class="highlight">
<pre><span></span><span class="n">things_to_sort</span> <span class="o">=</span> <span class="p">[</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">count</span><span class="p">)),</span> <span class="n">size</span><span class="o">=</span><span class="n">count</span><span class="p">)</span>
                  <span class="k">for</span> <span class="n">count</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="o">**</span><span class="mi">5</span><span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)]</span>

<span class="k">with</span> <span class="n">TIMER</span><span class="p">:</span>
    <span class="n">bubbles_counts_and_comparisons</span> <span class="o">=</span> <span class="n">Parallel</span><span class="p">(</span><span class="n">n_jobs</span><span class="o">=-</span><span class="mi">1</span><span class="p">)(</span>
        <span class="n">delayed</span><span class="p">(</span><span class="n">bubble</span><span class="p">)(</span><span class="n">thing_to_sort</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">thing_to_sort</span> <span class="ow">in</span> <span class="n">things_to_sort</span><span class="p">)</span>
</pre></div>
<pre class="example">
Started: 2022-01-12 23:40:18.730737
Ended: 2022-01-12 23:41:51.143272
Elapsed: 0:01:32.412535
</pre></div>
</div>
<div class="outline-3" id="outline-container-orgb2068b4">
<h3 id="orgb2068b4">Run the Bubba Counter</h3>
<div class="outline-text-3" id="text-orgb2068b4">
<div class="highlight">
<pre><span></span><span class="k">with</span> <span class="n">TIMER</span><span class="p">:</span>
    <span class="n">bubbas_counts_and_comparisons</span> <span class="o">=</span> <span class="n">Parallel</span><span class="p">(</span><span class="n">n_jobs</span><span class="o">=-</span><span class="mi">2</span><span class="p">)(</span>
        <span class="n">delayed</span><span class="p">(</span><span class="n">bubba</span><span class="p">)(</span><span class="n">thing_to_sort</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">thing_to_sort</span> <span class="ow">in</span> <span class="n">things_to_sort</span><span class="p">)</span>
</pre></div>
<pre class="example">
Started: 2022-01-12 23:41:58.766180
Ended: 2022-01-12 23:43:38.475355
Elapsed: 0:01:39.709175
</pre>
<p>Time-wise it seems to have done about the same as the original bubble sort.</p>
<div class="highlight">
<pre><span></span><span class="n">SIZE</span><span class="p">,</span> <span class="n">COMPARISONS</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span>
<span class="n">bubble_unzipped</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="n">bubbles_counts_and_comparisons</span><span class="p">))</span>
<span class="n">bubba_unzipped</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="n">bubbas_counts_and_comparisons</span><span class="p">))</span>
<span class="n">bubba_frame</span> <span class="o">=</span> <span class="n">pandas</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">"Elements"</span><span class="p">:</span> <span class="n">bubble_unzipped</span><span class="p">[</span><span class="n">SIZE</span><span class="p">],</span>
                                <span class="s2">"Bubble"</span><span class="p">:</span> <span class="n">bubble_unzipped</span><span class="p">[</span><span class="n">COMPARISONS</span><span class="p">],</span>
                                <span class="s2">"Bubba"</span><span class="p">:</span> <span class="n">bubba_unzipped</span><span class="p">[</span><span class="n">COMPARISONS</span><span class="p">]})</span>

<span class="n">melted</span> <span class="o">=</span> <span class="n">bubba_frame</span><span class="o">.</span><span class="n">melt</span><span class="p">(</span><span class="n">id_vars</span><span class="o">=</span><span class="p">[</span><span class="s2">"Elements"</span><span class="p">],</span>
                          <span class="n">var_name</span><span class="o">=</span><span class="s2">"Sorter"</span><span class="p">,</span>
                          <span class="n">value_name</span><span class="o">=</span><span class="s2">"Comparisons"</span><span class="p">)</span>
</pre></div>
<div class="highlight">
<pre><span></span><span class="n">chart</span> <span class="o">=</span> <span class="n">altair</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">melted</span><span class="p">)</span><span class="o">.</span><span class="n">mark_point</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">x</span><span class="o">=</span><span class="s2">"Elements"</span><span class="p">,</span>
    <span class="n">y</span><span class="o">=</span><span class="s2">"Comparisons"</span><span class="p">,</span>
    <span class="n">color</span><span class="o">=</span><span class="s2">"Sorter"</span><span class="p">,</span>
    <span class="n">tooltip</span><span class="o">=</span><span class="p">[</span><span class="n">altair</span><span class="o">.</span><span class="n">Tooltip</span><span class="p">(</span><span class="s2">"Elements"</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s2">","</span><span class="p">),</span> <span class="s2">"Sorter"</span><span class="p">,</span>
             <span class="n">altair</span><span class="o">.</span><span class="n">Tooltip</span><span class="p">(</span><span class="s2">"Comparisons"</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s2">","</span><span class="p">)]</span>
<span class="p">)</span><span class="o">.</span><span class="n">properties</span><span class="p">(</span>
    <span class="n">title</span><span class="o">=</span><span class="s2">"Bubble Sort Comparisons (with and without short-circuiting)"</span><span class="p">,</span>
    <span class="n">width</span><span class="o">=</span><span class="mi">900</span><span class="p">,</span>
<span class="p">)</span><span class="o">.</span><span class="n">interactive</span><span class="p">()</span>

<span class="n">save_chart</span><span class="p">(</span><span class="n">chart</span><span class="p">,</span> <span class="s2">"bubble_comparisons"</span><span class="p">,</span> <span class="n">output_path</span><span class="o">=</span><span class="n">OUTPUT_PATH</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">400</span><span class="p">)</span>
</pre></div>
<object data="posts/double-bubble-sort/bubble_comparisons.html" height="400" style="width:100%" type="text/html">
<p>Figure Missing</p>
</object>
<p>At first glance it looks like there's only one grey set of points, but if you zoom in (using the mouse's scroll wheel) you'll see that the grey points are actually (sometimes) created by adjacent points with the short-circuiting version's point (the blue point) slightly lower than the non-short-ciruiting orange point. So there is a difference, but it's small enough that it isn't easy to see.</p>
<p>Let's see if it becomes more obvious using the difference between the points instead.</p>
<div class="highlight">
<pre><span></span><span class="n">bubba_frame</span><span class="p">[</span><span class="s2">"Difference"</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">bubba_frame</span><span class="p">[</span><span class="s2">"Bubble"</span><span class="p">]</span> <span class="o">-</span>
                             <span class="n">bubba_frame</span><span class="p">[</span><span class="s2">"Bubba"</span><span class="p">])</span>
</pre></div>
<div class="highlight">
<pre><span></span><span class="n">chart</span> <span class="o">=</span> <span class="n">altair</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">bubba_frame</span><span class="p">)</span><span class="o">.</span><span class="n">mark_trail</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">x</span><span class="o">=</span><span class="s2">"Elements:O"</span><span class="p">,</span>
    <span class="n">y</span><span class="o">=</span><span class="s2">"Difference:Q"</span><span class="p">,</span>
    <span class="n">size</span><span class="o">=</span><span class="s2">"Difference:Q"</span><span class="p">,</span>
    <span class="n">tooltip</span><span class="o">=</span><span class="p">[</span><span class="n">altair</span><span class="o">.</span><span class="n">Tooltip</span><span class="p">(</span><span class="s2">"Elements"</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s2">","</span><span class="p">),</span>
             <span class="n">altair</span><span class="o">.</span><span class="n">Tooltip</span><span class="p">(</span><span class="s2">"Difference"</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s2">","</span><span class="p">),</span>
             <span class="n">altair</span><span class="o">.</span><span class="n">Tooltip</span><span class="p">(</span><span class="s2">"Bubble"</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s2">","</span><span class="p">),</span>
             <span class="n">altair</span><span class="o">.</span><span class="n">Tooltip</span><span class="p">(</span><span class="s2">"Bubba"</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s2">","</span><span class="p">)]</span>
<span class="p">)</span><span class="o">.</span><span class="n">properties</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">"Difference In Comparisons Between the Bubble Sorts"</span><span class="p">,</span>
             <span class="n">height</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span>
             <span class="n">width</span><span class="o">=</span><span class="mi">900</span><span class="p">)</span><span class="o">.</span><span class="n">interactive</span><span class="p">()</span>

<span class="n">save_chart</span><span class="p">(</span><span class="n">chart</span><span class="p">,</span> <span class="s2">"bubble_differences"</span><span class="p">,</span> <span class="n">output_path</span><span class="o">=</span><span class="n">OUTPUT_PATH</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">600</span><span class="p">)</span>
</pre></div>
<object data="posts/double-bubble-sort/bubble_differences.html" height="600" style="width:100%" type="text/html">
<p>Figure Missing</p>
</object>
<p>So, it looks like there are sometimes significant differences between the two sorts, but how do they appear given the total number of comparisons made?</p>
<div class="highlight">
<pre><span></span><span class="n">bubba_frame</span><span class="p">[</span><span class="s2">"Difference/Comparisons"</span><span class="p">]</span> <span class="o">=</span> <span class="n">bubba_frame</span><span class="o">.</span><span class="n">Difference</span><span class="o">/</span><span class="n">bubba_frame</span><span class="o">.</span><span class="n">Bubba</span>
<span class="n">sub_bubba</span> <span class="o">=</span> <span class="n">bubba_frame</span><span class="p">[[</span><span class="s2">"Elements"</span><span class="p">,</span> <span class="s2">"Difference/Comparisons"</span><span class="p">]]</span>
<span class="n">chart</span> <span class="o">=</span> <span class="n">altair</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">sub_bubba</span><span class="p">)</span><span class="o">.</span><span class="n">mark_trail</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">x</span><span class="o">=</span><span class="s2">"Elements:O"</span><span class="p">,</span>
    <span class="n">y</span><span class="o">=</span><span class="s2">"Difference/Comparisons:Q"</span><span class="p">,</span>
    <span class="n">size</span><span class="o">=</span><span class="s2">"Difference/Comparisons:Q"</span><span class="p">,</span>
    <span class="n">tooltip</span><span class="o">=</span><span class="p">[</span><span class="n">altair</span><span class="o">.</span><span class="n">Tooltip</span><span class="p">(</span><span class="s2">"Elements"</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s2">","</span><span class="p">),</span>
             <span class="n">altair</span><span class="o">.</span><span class="n">Tooltip</span><span class="p">(</span><span class="s2">"Difference/Comparisons"</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s2">".4f"</span><span class="p">)]</span>
<span class="p">)</span><span class="o">.</span><span class="n">properties</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">"Proportion of Difference Between the Bubble Sorts"</span><span class="p">,</span>
             <span class="n">height</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span>
             <span class="n">width</span><span class="o">=</span><span class="mi">900</span><span class="p">)</span><span class="o">.</span><span class="n">interactive</span><span class="p">()</span>

<span class="n">save_chart</span><span class="p">(</span><span class="n">chart</span><span class="p">,</span> <span class="s2">"bubble_difference_proportions"</span><span class="p">,</span> <span class="n">output_path</span><span class="o">=</span><span class="n">OUTPUT_PATH</span><span class="p">,</span>
           <span class="n">height</span><span class="o">=</span><span class="mi">600</span><span class="p">)</span>
</pre></div>
<object data="posts/double-bubble-sort/bubble_difference_proportions.html" height="600" style="width:100%" type="text/html">
<p>Figure Missing</p>
</object>
<p>It looks like as the amount of sorting that's needed goes up, the difference made by the short-circuiting becomes smaller in comparison to the total number of comparisons made, but even the biggest effect proportional to the amount of comparisons made by the short-circuiting sorter only comes to the difference being 0.2% of the total comparisons.</p>
</div>
</div>
<div class="outline-3" id="outline-container-org688c7cf">
<h3 id="org688c7cf">Best Case, Worst Case</h3>
<div class="outline-text-3" id="text-org688c7cf">
<p>Now that we know that the short-circuiting isn't that big a deal I'll add some plotting showing how our random cases compare to the best-case and worst case sorting inputs.</p>
<div class="highlight">
<pre><span></span><span class="n">best_things</span> <span class="o">=</span> <span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">count</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">int</span><span class="p">)</span> <span class="k">for</span> <span class="n">count</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="o">**</span><span class="mi">5</span><span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)]</span>
<span class="n">worst_things</span> <span class="o">=</span> <span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">flip</span><span class="p">(</span><span class="n">things</span><span class="p">)</span> <span class="k">for</span> <span class="n">things</span> <span class="ow">in</span> <span class="n">best_things</span><span class="p">]</span>

<span class="k">with</span> <span class="n">TIMER</span><span class="p">:</span>
    <span class="n">worst_output</span> <span class="o">=</span> <span class="n">Parallel</span><span class="p">(</span><span class="n">n_jobs</span><span class="o">=-</span><span class="mi">1</span><span class="p">)(</span>
        <span class="n">delayed</span><span class="p">(</span><span class="n">bubba</span><span class="p">)(</span><span class="n">thing</span><span class="p">)</span> <span class="k">for</span> <span class="n">thing</span> <span class="ow">in</span> <span class="n">worst_things</span>
<span class="p">)</span>
</pre></div>
<pre class="example">
Started: 2022-01-13 00:01:27.932132
Ended: 2022-01-13 00:02:08.108278
Elapsed: 0:00:40.176146
</pre>
<div class="highlight">
<pre><span></span><span class="k">with</span> <span class="n">TIMER</span><span class="p">:</span>
    <span class="n">best_output</span> <span class="o">=</span> <span class="n">Parallel</span><span class="p">(</span><span class="n">n_jobs</span><span class="o">=-</span><span class="mi">1</span><span class="p">)(</span>
        <span class="n">delayed</span><span class="p">(</span><span class="n">bubba</span><span class="p">)(</span><span class="n">thing</span><span class="p">)</span> <span class="k">for</span> <span class="n">thing</span> <span class="ow">in</span> <span class="n">best_things</span>
<span class="p">)</span>
</pre></div>
<pre class="example">
Started: 2022-01-13 00:08:59.231664
Ended: 2022-01-13 00:09:00.409103
Elapsed: 0:00:01.177439
</pre>
<div class="highlight">
<pre><span></span><span class="n">worst_unzipped</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="n">worst_output</span><span class="p">))</span>
<span class="n">best_unzipped</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="n">best_output</span><span class="p">))</span>

<span class="k">del</span> <span class="n">bubba_frame</span><span class="p">[</span><span class="s2">"Bubble"</span><span class="p">]</span>
<span class="k">del</span> <span class="n">bubba_frame</span><span class="p">[</span><span class="s2">"Difference"</span><span class="p">]</span>
<span class="k">del</span> <span class="n">bubba_frame</span><span class="p">[</span><span class="s2">"Difference/Comparisons"</span><span class="p">]</span>
<span class="n">bubba_frame</span> <span class="o">=</span> <span class="n">bubba_frame</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s2">"Bubba"</span><span class="p">:</span> <span class="s2">"Random"</span><span class="p">})</span>
</pre></div>
<div class="highlight">
<pre><span></span><span class="n">bubba_frame</span><span class="p">[</span><span class="s2">"Worst Case"</span><span class="p">]</span> <span class="o">=</span> <span class="n">worst_unzipped</span><span class="p">[</span><span class="n">COMPARISONS</span><span class="p">]</span>
<span class="n">bubba_frame</span><span class="p">[</span><span class="s2">"Best Case"</span><span class="p">]</span> <span class="o">=</span> <span class="n">best_unzipped</span><span class="p">[</span><span class="n">COMPARISONS</span><span class="p">]</span>

<span class="n">melted</span> <span class="o">=</span> <span class="n">bubba_frame</span><span class="o">.</span><span class="n">melt</span><span class="p">(</span><span class="n">id_vars</span><span class="o">=</span><span class="p">[</span><span class="s2">"Elements"</span><span class="p">],</span>
                          <span class="n">var_name</span><span class="o">=</span><span class="s2">"Input"</span><span class="p">,</span>
                          <span class="n">value_name</span><span class="o">=</span><span class="s2">"Comparisons"</span><span class="p">)</span>
</pre></div>
<div class="highlight">
<pre><span></span><span class="n">chart</span> <span class="o">=</span> <span class="n">altair</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">melted</span><span class="p">)</span><span class="o">.</span><span class="n">mark_point</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">x</span><span class="o">=</span><span class="s2">"Elements"</span><span class="p">,</span>
    <span class="n">y</span><span class="o">=</span><span class="s2">"Comparisons"</span><span class="p">,</span>
    <span class="n">color</span><span class="o">=</span><span class="s2">"Input"</span>
<span class="p">)</span><span class="o">.</span><span class="n">properties</span><span class="p">(</span>
    <span class="n">width</span><span class="o">=</span><span class="mi">800</span><span class="p">,</span>
    <span class="n">height</span><span class="o">=</span><span class="mi">550</span><span class="p">,</span>
    <span class="n">title</span><span class="o">=</span><span class="s2">"Bubble Sort Best, Worst, and Random Input Comparisons"</span>
<span class="p">)</span><span class="o">.</span><span class="n">interactive</span><span class="p">()</span>

<span class="n">save_chart</span><span class="p">(</span><span class="n">chart</span><span class="p">,</span> <span class="s2">"best-worst-random"</span><span class="p">,</span> <span class="n">output_path</span><span class="o">=</span><span class="n">OUTPUT_PATH</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">600</span><span class="p">)</span>
</pre></div>
<object data="posts/double-bubble-sort/best-worst-random.html" height="600" style="width:100%" type="text/html">
<p>Figure Missing</p>
</object>
<p>Once again we run into the problem/case that it looks like the Random input is missing, but if you zoom way in you'll see it does <i>slightly</i> better than the <i>worst-case</i>, but the difference is so small that when you zoom back out they look like they did exactly the same. The <i>best-case</i> does much better, since it only has to pass through the data once to see that it's already sorted and then quit (which isn't really reflected in the plot because our increment of <i>comparisons</i> only happens if the inner loop is entered), but except for this unusual case, random inputs don't do enough better than the worst-case examples to make short-circuiting a noteworthy improvement.</p>
</div>
</div>
</div>
<div class="outline-2" id="outline-container-orge13a756">
<h2 id="orge13a756">The End, The End</h2>
<div class="outline-text-2" id="text-orge13a756">
<p>Well, I think I've beaten this dead horse enough for now. The overview for all the posts is <a href="pages/the-bubble-sort/index.html">here</a>, if you didn't get enough of it. Up next: <a href="posts/selection-sort/index.html">Selection Sort</a>.</p>
</div>
</div>
</div>
</article>
<article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article">
<header>
<h1 class="p-name entry-title"><a class="u-url" href="posts/bubble-sort-an-empirical-look/index.html">Bubble Sort: An Empirical Look</a></h1>
<div class="metadata">
<p class="byline author vcard"><span class="byline-name fn" itemprop="author">The Cloistered Monkey</span></p>
<p class="dateline"><a href="posts/bubble-sort-an-empirical-look/index.html" rel="bookmark"><time class="published dt-published" datetime="2021-11-17T10:57:02-08:00" itemprop="datePublished" title="2021-11-17 10:57">2021-11-17 10:57</time></a></p>
</div>
</header>
<div class="e-content entry-content">
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="posts/bubble-sort-an-empirical-look/index.html#org796acdd">An Empirical Look</a>
<ul>
<li><a href="posts/bubble-sort-an-empirical-look/index.html#orgbe32b92">Some Setup</a>
<ul>
<li><a href="posts/bubble-sort-an-empirical-look/index.html#org132bcb9">Stuff For Later</a></li>
<li><a href="posts/bubble-sort-an-empirical-look/index.html#org8a9206f">Numba Random</a></li>
</ul>
</li>
<li><a href="posts/bubble-sort-an-empirical-look/index.html#orgb4ff737">A Counter</a>
<ul>
<li><a href="posts/bubble-sort-an-empirical-look/index.html#org25ebd9b">Some Types</a></li>
<li><a href="posts/bubble-sort-an-empirical-look/index.html#orge2289c2">The Sorting Function (With Counts)</a></li>
</ul>
</li>
<li><a href="posts/bubble-sort-an-empirical-look/index.html#org6207bcc">Testing the Counter</a>
<ul>
<li><a href="posts/bubble-sort-an-empirical-look/index.html#orge8d48e9">A Random Input</a></li>
<li><a href="posts/bubble-sort-an-empirical-look/index.html#org5dc0b93">The Worst Case</a></li>
</ul>
</li>
<li><a href="posts/bubble-sort-an-empirical-look/index.html#orgaf691ec">The Tracker</a></li>
<li><a href="posts/bubble-sort-an-empirical-look/index.html#orgc889131">Try Them Out</a>
<ul>
<li><a href="posts/bubble-sort-an-empirical-look/index.html#orgd3f2cec">Comparisons</a></li>
</ul>
</li>
<li><a href="posts/bubble-sort-an-empirical-look/index.html#orgc639cb2">Swaps</a>
<ul>
<li><a href="posts/bubble-sort-an-empirical-look/index.html#orga8356fc">Worst Case</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="posts/bubble-sort-an-empirical-look/index.html#org3276ecd">Onward</a></li>
</ul>
</div>
</div>
<p>This is a continuation of a <a href="pages/the-bubble-sort/index.html">series on the Bubble Sort</a>. In the <a href="posts/bubble-sort-the-implementation/index.html">previous post</a> I made an implementation of the Bubble Sort in python. In this post I'll run it with inputs of varying sizes to see how its runtime changes as well as do a plot to get a sense of how it rearranges the items its sorting as it works.</p>
<div class="outline-2" id="outline-container-org796acdd">
<h2 id="org796acdd">An Empirical Look</h2>
<div class="outline-text-2" id="text-org796acdd">
<p>Using math to figure out the number of comparisons is nice and all, but let's do some counting using real code. I'm going to re-implement the bubble sort but this time keeping track of the comparisons and swaps.</p>
</div>
<div class="outline-3" id="outline-container-orgbe32b92">
<h3 id="orgbe32b92">Some Setup</h3>
<div class="outline-text-3" id="text-orgbe32b92">
<div class="highlight">
<pre><span></span><span class="c1"># python</span>
<span class="kn">from</span> <span class="nn">collections.abc</span> <span class="kn">import</span> <span class="n">MutableSequence</span>
<span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">namedtuple</span>
<span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">partial</span>

<span class="kn">import</span> <span class="nn">random</span>
<span class="kn">from</span> <span class="nn">numpy.random</span> <span class="kn">import</span> <span class="n">default_rng</span>

<span class="c1"># pypi</span>
<span class="kn">from</span> <span class="nn">bokeh.models</span> <span class="kn">import</span> <span class="n">HoverTool</span>
<span class="kn">from</span> <span class="nn">expects</span> <span class="kn">import</span> <span class="n">be_above_or_equal</span><span class="p">,</span> <span class="n">contain_only</span><span class="p">,</span> <span class="n">equal</span><span class="p">,</span> <span class="n">expect</span>
<span class="kn">from</span> <span class="nn">joblib</span> <span class="kn">import</span> <span class="n">Parallel</span><span class="p">,</span> <span class="n">delayed</span>
<span class="kn">from</span> <span class="nn">numba</span> <span class="kn">import</span> <span class="n">njit</span>

<span class="kn">import</span> <span class="nn">hvplot.pandas</span>
<span class="kn">import</span> <span class="nn">pandas</span>

<span class="c1"># my stuff</span>
<span class="kn">from</span> <span class="nn">graeae</span> <span class="kn">import</span> <span class="n">EmbedHoloviews</span><span class="p">,</span> <span class="n">Timer</span>
</pre></div>
</div>
<div class="outline-4" id="outline-container-org132bcb9">
<h4 id="org132bcb9">Stuff For Later</h4>
<div class="outline-text-4" id="text-org132bcb9">
<div class="highlight">
<pre><span></span><span class="n">TIMER</span> <span class="o">=</span> <span class="n">Timer</span><span class="p">()</span>
<span class="n">SLUG</span> <span class="o">=</span> <span class="s2">"bubble-sort-an-empirical-look"</span>
<span class="n">PATH</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">"files/posts/</span><span class="si">{</span><span class="n">SLUG</span><span class="si">}</span><span class="s2">/"</span>
<span class="n">Embed</span> <span class="o">=</span> <span class="n">partial</span><span class="p">(</span><span class="n">EmbedHoloviews</span><span class="p">,</span> <span class="n">folder_path</span><span class="o">=</span><span class="n">PATH</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="outline-4" id="outline-container-org8a9206f">
<h4 id="org8a9206f">Numba Random</h4>
<div class="outline-text-4" id="text-org8a9206f">
<div class="highlight">
<pre><span></span><span class="n">numba_random</span> <span class="o">=</span> <span class="n">default_rng</span><span class="p">(</span><span class="mi">2021</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="outline-3" id="outline-container-orgb4ff737">
<h3 id="orgb4ff737">A Counter</h3>
<div class="outline-text-3" id="text-orgb4ff737">
<p>This is going to be a reimplementation of the Bubble Sort function but with variables added to keep track of the counts. I originally did this class-based so I could re-use the code but once I switched from pypy to numba that started to get problematic, and the functions are short anyway so I guess it's all the same.</p>
</div>
<div class="outline-4" id="outline-container-org25ebd9b">
<h4 id="org25ebd9b">Some Types</h4>
<div class="outline-text-4" id="text-org25ebd9b">
<div class="highlight">
<pre><span></span><span class="n">ElementCount</span> <span class="o">=</span> <span class="nb">int</span>
<span class="n">ComparisonCount</span> <span class="o">=</span> <span class="nb">int</span>
<span class="n">SwapCount</span> <span class="o">=</span> <span class="nb">int</span>
<span class="n">SortedElements</span> <span class="o">=</span> <span class="n">MutableSequence</span>
<span class="n">Counts</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">ElementCount</span><span class="p">,</span> <span class="n">ComparisonCount</span><span class="p">,</span> <span class="n">SwapCount</span><span class="p">,</span> <span class="n">SortedElements</span><span class="p">]</span>

<span class="n">BubbleOutput</span> <span class="o">=</span> <span class="n">namedtuple</span><span class="p">(</span><span class="s2">"BubbleOutput"</span><span class="p">,</span>
                          <span class="p">[</span>
                              <span class="s2">"element_count"</span><span class="p">,</span> <span class="s2">"comparisons"</span><span class="p">,</span>
                              <span class="s2">"swaps"</span><span class="p">,</span>
                              <span class="s2">"elements"</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="outline-4" id="outline-container-orge2289c2">
<h4 id="orge2289c2">The Sorting Function (With Counts)</h4>
<div class="outline-text-4" id="text-orge2289c2">
<div class="highlight">
<pre><span></span><span class="k">def</span> <span class="nf">bubble</span><span class="p">(</span><span class="n">elements</span><span class="p">:</span> <span class="n">MutableSequence</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Counts</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""Sorts the list in place</span>

<span class="sd">    Args:</span>
<span class="sd">     elements: list of (in-place) sortable elements</span>

<span class="sd">    Returns:</span>
<span class="sd">     number of elements, count of comparisons, count of swaps, sorted elements</span>
<span class="sd">    """</span>
    <span class="n">all_but_one</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">elements</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span>
    <span class="n">comparisons</span> <span class="o">=</span> <span class="n">swaps</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">items_sorted</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">all_but_one</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">in_front_of_us</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">all_but_one</span> <span class="o">-</span> <span class="n">items_sorted</span><span class="p">):</span>
            <span class="n">comparisons</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="n">to_the_right</span> <span class="o">=</span> <span class="n">in_front_of_us</span> <span class="o">+</span> <span class="mi">1</span>
            <span class="k">if</span> <span class="n">elements</span><span class="p">[</span><span class="n">to_the_right</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">elements</span><span class="p">[</span><span class="n">in_front_of_us</span><span class="p">]:</span>
                <span class="p">(</span><span class="n">elements</span><span class="p">[</span><span class="n">in_front_of_us</span><span class="p">],</span>
                 <span class="n">elements</span><span class="p">[</span><span class="n">to_the_right</span><span class="p">])</span> <span class="o">=</span> <span class="p">(</span><span class="n">elements</span><span class="p">[</span><span class="n">to_the_right</span><span class="p">],</span>
                                          <span class="n">elements</span><span class="p">[</span><span class="n">in_front_of_us</span><span class="p">])</span>
                <span class="n">swaps</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">return</span> <span class="n">BubbleOutput</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">elements</span><span class="p">),</span> <span class="n">comparisons</span><span class="p">,</span> <span class="n">swaps</span><span class="p">,</span> <span class="n">elements</span><span class="p">)</span>
</pre></div>
<p>One thing to note is that in the algorithm the outer loop stops at \(n-2\), which it also does here, but since the <code>range</code> function doesn't include the last number our argument is only \(n-1\), which might look confusing at first, and might sound even more confusing when you read this, but the point is they're the same even though they might not look exactly the same.</p>
</div>
</div>
</div>
<div class="outline-3" id="outline-container-org6207bcc">
<h3 id="org6207bcc">Testing the Counter</h3>
<div class="outline-text-3" id="text-org6207bcc">
<div class="highlight">
<pre><span></span><span class="k">def</span> <span class="nf">check_non_decreasing</span><span class="p">(</span><span class="n">elements</span><span class="p">:</span> <span class="nb">list</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""Checks that all the elements in the list are non-decreasing</span>

<span class="sd">    Args:</span>
<span class="sd">     elements: list of comparable sorted items</span>

<span class="sd">    Raises:</span>
<span class="sd">     AssertionError if something is out of order</span>
<span class="sd">    """</span>
    <span class="n">last_one</span> <span class="o">=</span> <span class="n">elements</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
        <span class="n">this_one</span> <span class="o">=</span> <span class="n">elements</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>
        <span class="n">expect</span><span class="p">(</span><span class="n">this_one</span><span class="p">)</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">be_above_or_equal</span><span class="p">(</span><span class="n">last_one</span><span class="p">))</span>
        <span class="n">last_one</span> <span class="o">=</span> <span class="n">this_one</span>
    <span class="k">return</span>
</pre></div>
</div>
<div class="outline-4" id="outline-container-orge8d48e9">
<h4 id="orge8d48e9">A Random Input</h4>
<div class="outline-text-4" id="text-orge8d48e9">
<p>Because we aren't using any kind of short-circuiting to stop once the data is sorted, it will always loop \(\Omega(n^2)\), but the number of swaps will depend on the input.</p>
<div class="highlight">
<pre><span></span><span class="n">n</span> <span class="o">=</span> <span class="mi">1000</span>
<span class="n">inputs</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choices</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">)),</span> <span class="n">k</span><span class="o">=</span><span class="n">n</span><span class="p">)</span>

<span class="n">output</span> <span class="o">=</span> <span class="n">bubble</span><span class="p">(</span><span class="n">inputs</span><span class="p">)</span>

<span class="n">sorted_elements</span> <span class="o">=</span> <span class="n">output</span><span class="o">.</span><span class="n">elements</span>
<span class="n">check_non_decreasing</span><span class="p">(</span><span class="n">sorted_elements</span><span class="p">)</span>

<span class="n">expected_runtime</span> <span class="o">=</span> <span class="n">expected_swaps</span> <span class="o">=</span> <span class="p">(</span><span class="n">n</span> <span class="o">*</span> <span class="p">(</span><span class="n">n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">))</span><span class="o">/</span><span class="mi">2</span>
<span class="n">expect</span><span class="p">(</span><span class="n">output</span><span class="o">.</span><span class="n">comparisons</span><span class="p">)</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">equal</span><span class="p">(</span><span class="n">expected_runtime</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="outline-4" id="outline-container-org5dc0b93">
<h4 id="org5dc0b93">The Worst Case</h4>
<div class="outline-text-4" id="text-org5dc0b93">
<p>In the worst case where it's in the exact opposite sorted order (non-increasing instead of non-decreasing) the number of comparisons should equaly the number of swaps.</p>
<div class="highlight">
<pre><span></span><span class="n">output</span> <span class="o">=</span> <span class="n">bubble</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">reversed</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">)))))</span>
<span class="n">check_non_decreasing</span><span class="p">(</span><span class="n">output</span><span class="o">.</span><span class="n">elements</span><span class="p">)</span>
<span class="n">expect</span><span class="p">(</span><span class="n">output</span><span class="o">.</span><span class="n">comparisons</span><span class="p">)</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">equal</span><span class="p">(</span><span class="n">expected_runtime</span><span class="p">))</span>
<span class="n">expect</span><span class="p">(</span><span class="n">output</span><span class="o">.</span><span class="n">swaps</span><span class="p">)</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">equal</span><span class="p">(</span><span class="n">expected_swaps</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<div class="outline-3" id="outline-container-orgaf691ec">
<h3 id="orgaf691ec">The Tracker</h3>
<div class="outline-text-3" id="text-orgaf691ec">
<p>To visualize what the sort is doing I'm going to update the bubble sort to keep track of the order of the items as it's being sorted. I'm using a dictionary to map the list values to their locations so we can't use inputs where there are repeated elements or more than one list of locations will be mapped to a element value.</p>
<div class="highlight">
<pre><span></span><span class="n">IndexHistory</span> <span class="o">=</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span>
<span class="n">ElementValue</span> <span class="o">=</span> <span class="nb">int</span>
<span class="n">Swaps</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">[</span><span class="n">ElementValue</span><span class="p">,</span> <span class="n">IndexHistory</span><span class="p">]</span>
</pre></div>
<div class="highlight">
<pre><span></span><span class="k">def</span> <span class="nf">swap_tracker</span><span class="p">(</span><span class="n">elements</span><span class="p">:</span> <span class="n">MutableSequence</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Swaps</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""Does the bubble-sort and tracks the locations</span>

<span class="sd">    Args:</span>
<span class="sd">     elements: list of orderable items</span>

<span class="sd">    Returns:</span>
<span class="sd">     dict of element value: list of indices it was at during sort</span>
<span class="sd">    """</span>
    <span class="n">all_but_one</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">elements</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span>

    <span class="n">swaps</span> <span class="o">=</span> <span class="p">{</span><span class="n">element</span><span class="p">:</span> <span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">element</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">elements</span><span class="p">)}</span>

    <span class="k">for</span> <span class="n">items_sorted</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">all_but_one</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">in_front_of_us</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">all_but_one</span> <span class="o">-</span> <span class="n">items_sorted</span><span class="p">):</span>
            <span class="n">to_the_right</span> <span class="o">=</span> <span class="n">in_front_of_us</span> <span class="o">+</span> <span class="mi">1</span>
            <span class="k">if</span> <span class="n">elements</span><span class="p">[</span><span class="n">to_the_right</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">elements</span><span class="p">[</span><span class="n">in_front_of_us</span><span class="p">]:</span>
                <span class="p">(</span><span class="n">elements</span><span class="p">[</span><span class="n">in_front_of_us</span><span class="p">],</span>
                 <span class="n">elements</span><span class="p">[</span><span class="n">to_the_right</span><span class="p">])</span> <span class="o">=</span> <span class="p">(</span><span class="n">elements</span><span class="p">[</span><span class="n">to_the_right</span><span class="p">],</span>
                                          <span class="n">elements</span><span class="p">[</span><span class="n">in_front_of_us</span><span class="p">])</span>
                <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">element</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">elements</span><span class="p">):</span>
                    <span class="n">swaps</span><span class="p">[</span><span class="n">element</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">swaps</span>
</pre></div>
<p>First a little sanity check just to make sure it still works.</p>
<div class="highlight">
<pre><span></span><span class="n">inputs</span> <span class="o">=</span> <span class="p">[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>

<span class="n">swaps</span> <span class="o">=</span> <span class="n">swap_tracker</span><span class="p">(</span><span class="n">inputs</span><span class="p">)</span>
<span class="n">expect</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">swaps</span><span class="p">))</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">equal</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">inputs</span><span class="p">)))</span>
</pre></div>
<div class="highlight">
<pre><span></span><span class="n">n</span> <span class="o">=</span> <span class="mi">100</span>
<span class="n">inputs</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">))</span>
<span class="n">random</span><span class="o">.</span><span class="n">shuffle</span><span class="p">(</span><span class="n">inputs</span><span class="p">)</span>

<span class="n">swaps</span> <span class="o">=</span> <span class="n">swap_tracker</span><span class="p">(</span><span class="n">inputs</span><span class="p">)</span>
<span class="n">expect</span><span class="p">(</span><span class="n">swaps</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">contain_only</span><span class="p">(</span><span class="o">*</span><span class="n">inputs</span><span class="p">))</span>

<span class="n">check_non_decreasing</span><span class="p">(</span><span class="n">inputs</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="outline-3" id="outline-container-orgc889131">
<h3 id="orgc889131">Try Them Out</h3>
<div class="outline-text-3" id="text-orgc889131"></div>
<div class="outline-4" id="outline-container-orgd3f2cec">
<h4 id="orgd3f2cec">Comparisons</h4>
<div class="outline-text-4" id="text-orgd3f2cec">
<p>Let's look at how the comparisons and swaps change as the input gets bigger. To speed this up I'm going to run the sort in numba.</p>
<div class="highlight">
<pre><span></span><span class="n">numba_bubble</span> <span class="o">=</span> <span class="n">njit</span><span class="p">(</span><span class="n">bubble</span><span class="p">)</span>
</pre></div>
<div class="highlight">
<pre><span></span><span class="n">runs</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">things_to_sort</span> <span class="o">=</span> <span class="p">[</span><span class="n">numba_random</span><span class="o">.</span><span class="n">integers</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">high</span><span class="o">=</span><span class="n">count</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="n">count</span><span class="p">)</span>
                  <span class="k">for</span> <span class="n">count</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="o">**</span><span class="mi">5</span><span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)]</span>

<span class="k">with</span> <span class="n">TIMER</span><span class="p">:</span>
    <span class="n">comparisons_and_swaps</span> <span class="o">=</span> <span class="n">Parallel</span><span class="p">(</span><span class="n">n_jobs</span><span class="o">=-</span><span class="mi">1</span><span class="p">)(</span>
        <span class="n">delayed</span><span class="p">(</span><span class="n">numba_bubble</span><span class="p">)(</span><span class="n">thing_to_sort</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">thing_to_sort</span> <span class="ow">in</span> <span class="n">things_to_sort</span><span class="p">)</span>
</pre></div>
<pre class="example">
Started: 2021-12-22 02:49:12.003456
Ended: 2021-12-22 02:50:44.485043
Elapsed: 0:01:32.481587
</pre>
<p>Now we'll plot it.</p>
<div class="highlight">
<pre><span></span><span class="n">SIZE</span><span class="p">,</span> <span class="n">COMPARISONS</span><span class="p">,</span> <span class="n">SWAPS</span><span class="p">,</span> <span class="n">ELEMENTS</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span>
<span class="n">unzipped</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="n">comparisons_and_swaps</span><span class="p">))</span>
<span class="n">bubba_frame</span> <span class="o">=</span> <span class="n">pandas</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">"Elements"</span><span class="p">:</span> <span class="n">unzipped</span><span class="p">[</span><span class="n">SIZE</span><span class="p">],</span>
                                <span class="s2">"Comparisons"</span><span class="p">:</span> <span class="n">unzipped</span><span class="p">[</span><span class="n">COMPARISONS</span><span class="p">],</span>
                                <span class="s2">"Swaps"</span><span class="p">:</span> <span class="n">unzipped</span><span class="p">[</span><span class="n">SWAPS</span><span class="p">]})</span>
<span class="n">bubba_frame</span><span class="p">[</span><span class="s2">"n^2"</span><span class="p">]</span> <span class="o">=</span> <span class="n">bubba_frame</span><span class="p">[</span><span class="s2">"Elements"</span><span class="p">]</span><span class="o">**</span><span class="mi">2</span>
<span class="n">tooltips_comparisons</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">(</span><span class="s2">"Elements"</span><span class="p">,</span> <span class="s2">"@Elements{0,}"</span><span class="p">),</span>
    <span class="p">(</span><span class="s2">"Comparisons"</span><span class="p">,</span> <span class="s2">"@Comparisons{0,}"</span><span class="p">)</span>
<span class="p">]</span>

<span class="n">tooltips_swaps</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">(</span><span class="s2">"Elements"</span><span class="p">,</span> <span class="s2">"@Elements{0,}"</span><span class="p">),</span>
    <span class="p">(</span><span class="s2">"Swaps"</span><span class="p">,</span> <span class="s2">"@Swaps{0,}"</span><span class="p">)</span>
<span class="p">]</span>

<span class="n">tooltips_n2</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">(</span><span class="s2">"Elements"</span><span class="p">,</span> <span class="s2">"@Elements{0,}"</span><span class="p">),</span>
    <span class="p">(</span><span class="s2">"n^2"</span><span class="p">,</span> <span class="s2">"@{n^2}{0,}"</span><span class="p">)</span>
<span class="p">]</span>

<span class="n">hover_comparisons</span> <span class="o">=</span> <span class="n">HoverTool</span><span class="p">(</span><span class="n">tooltips</span><span class="o">=</span><span class="n">tooltips_comparisons</span><span class="p">)</span>
<span class="n">hover_swaps</span> <span class="o">=</span> <span class="n">HoverTool</span><span class="p">(</span><span class="n">tooltips</span><span class="o">=</span><span class="n">tooltips_swaps</span><span class="p">)</span>
<span class="n">hover_n2</span> <span class="o">=</span> <span class="n">HoverTool</span><span class="p">(</span><span class="n">tooltips</span><span class="o">=</span><span class="n">tooltips_n2</span><span class="p">)</span>

<span class="n">swap_plots</span> <span class="o">=</span> <span class="n">bubba_frame</span><span class="o">.</span><span class="n">hvplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s2">"Elements"</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">"Swaps"</span><span class="p">)</span><span class="o">.</span><span class="n">opts</span><span class="p">(</span>
    <span class="n">tools</span><span class="o">=</span><span class="p">[</span><span class="n">hover_swaps</span><span class="p">])</span>
<span class="n">comparison_plots</span> <span class="o">=</span> <span class="n">bubba_frame</span><span class="o">.</span><span class="n">hvplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s2">"Elements"</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">"Comparisons"</span><span class="p">)</span><span class="o">.</span><span class="n">opts</span><span class="p">(</span>
    <span class="n">tools</span><span class="o">=</span><span class="p">[</span><span class="n">hover_comparisons</span><span class="p">])</span>
<span class="n">n_squared_plot</span> <span class="o">=</span> <span class="n">bubba_frame</span><span class="o">.</span><span class="n">hvplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s2">"Elements"</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">"n^2"</span><span class="p">)</span><span class="o">.</span><span class="n">opts</span><span class="p">(</span>
    <span class="n">tools</span><span class="o">=</span><span class="p">[</span><span class="n">hover_n2</span><span class="p">])</span>

<span class="n">plot</span> <span class="o">=</span> <span class="p">(</span><span class="n">swap_plots</span> <span class="o">*</span> <span class="n">comparison_plots</span> <span class="o">*</span> <span class="n">n_squared_plot</span><span class="p">)</span><span class="o">.</span><span class="n">opts</span><span class="p">(</span>
    <span class="n">title</span><span class="o">=</span><span class="s2">"Comparisons, Swaps and n-squared Counts"</span><span class="p">,</span>
    <span class="n">height</span><span class="o">=</span><span class="mi">700</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">800</span><span class="p">)</span>
<span class="n">output</span> <span class="o">=</span> <span class="n">Embed</span><span class="p">(</span><span class="n">plot</span><span class="o">=</span><span class="n">plot</span><span class="p">,</span> <span class="n">file_name</span><span class="o">=</span><span class="s2">"bubble_sort_comparisons"</span><span class="p">)()</span>
</pre></div>
<object data="posts/bubble-sort-an-empirical-look/bubble_sort_comparisons.html" height="800" style="width:100%" type="text/html">
<p>Figure Missing</p>
</object>
<p>The top line (yellow) is the square of the size of the inputs, the middle (red) is the number of comparisons, and the bottom line (blue) is the number of swaps. If you hover over the lines you can see that each line is roughly double the one below it - there are around twice as many comparisons as swaps for a given input and \(n^2\) is around twice as big as the comparison count for a given input.</p>
</div>
</div>
</div>
<div class="outline-3" id="outline-container-orgc639cb2">
<h3 id="orgc639cb2">Swaps</h3>
<div class="outline-text-3" id="text-orgc639cb2">
<p>The comparisons and swaps are pretty much what we expected to see, they just confirm the theoretical assessment, but now let's look at plotting the swaps as they occur to see if we can understand what the bubble sort is doing.</p>
<div class="highlight">
<pre><span></span><span class="n">COUNT</span> <span class="o">=</span> <span class="mi">20</span>
<span class="n">inputs</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">COUNT</span><span class="p">)),</span> <span class="n">k</span><span class="o">=</span><span class="n">COUNT</span><span class="p">)</span>
<span class="n">swaps</span> <span class="o">=</span> <span class="n">swap_tracker</span><span class="p">(</span><span class="n">inputs</span><span class="p">)</span>

<span class="c1"># swaps = {str(key): value for key, value in tracker.swaps.items()}</span>
<span class="n">track_frame</span> <span class="o">=</span> <span class="n">pandas</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">swaps</span><span class="p">)</span>
<span class="n">re_indexed</span> <span class="o">=</span> <span class="n">track_frame</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s2">"index"</span><span class="p">:</span> <span class="s2">"Swap"</span><span class="p">})</span>
<span class="n">melted</span> <span class="o">=</span> <span class="n">re_indexed</span><span class="o">.</span><span class="n">melt</span><span class="p">(</span><span class="n">var_name</span><span class="o">=</span><span class="s2">"Value To Sort"</span><span class="p">,</span> <span class="n">value_name</span><span class="o">=</span><span class="s2">"Location In Array"</span><span class="p">,</span> <span class="n">id_vars</span><span class="o">=</span><span class="s2">"Swap"</span><span class="p">)</span>

<span class="n">tooltips</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">(</span><span class="s2">"Item to Sort"</span><span class="p">,</span> <span class="s2">"@{Value To Sort}"</span><span class="p">),</span>
    <span class="p">(</span><span class="s2">"Swap"</span><span class="p">,</span> <span class="s2">"@</span><span class="si">{Swap}</span><span class="s2">"</span><span class="p">),</span>
    <span class="p">(</span><span class="s2">"Current Location"</span><span class="p">,</span> <span class="s2">"@{Location In Array}"</span><span class="p">)</span>
<span class="p">]</span>

<span class="n">hover</span> <span class="o">=</span> <span class="n">HoverTool</span><span class="p">(</span><span class="n">tooltips</span><span class="o">=</span><span class="n">tooltips</span><span class="p">)</span>

<span class="n">ticks</span> <span class="o">=</span> <span class="p">[(</span><span class="n">index</span><span class="p">,</span> <span class="n">index</span><span class="p">)</span> <span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">COUNT</span><span class="p">)]</span>
<span class="n">plot</span> <span class="o">=</span> <span class="n">melted</span><span class="o">.</span><span class="n">hvplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s2">"Swap"</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">"Location In Array"</span><span class="p">,</span>
                     <span class="n">by</span><span class="o">=</span><span class="s2">"Value To Sort"</span><span class="p">)</span><span class="o">.</span><span class="n">opts</span><span class="p">(</span><span class="n">tools</span><span class="o">=</span><span class="p">[</span><span class="n">hover</span><span class="p">],</span>
                                              <span class="n">show_legend</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                     <span class="n">width</span><span class="o">=</span><span class="mi">800</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">700</span><span class="p">,</span> <span class="n">yticks</span><span class="o">=</span><span class="n">ticks</span><span class="p">,</span>
                            <span class="n">title</span><span class="o">=</span><span class="s2">"Bubble Sort Swaps"</span><span class="p">,)</span>


<span class="n">output</span> <span class="o">=</span> <span class="n">Embed</span><span class="p">(</span><span class="n">plot</span><span class="o">=</span><span class="n">plot</span><span class="p">,</span> <span class="n">file_name</span><span class="o">=</span><span class="s2">"bubble_sort_swaps"</span><span class="p">)()</span>
</pre></div>
<object data="posts/bubble-sort-an-empirical-look/bubble_sort_swaps.html" height="800" style="width:100%" type="text/html">
<p>Figure Missing</p>
</object>
<p><b>Aside:</b></p>
<p>HoloViews seems to not let you set the Tooltips if you use multiple columns, which is why I went through all the rigamarole of melting it. If you just plot it as the DataFrame with each column being one of the tracked locations for a sort value (e.g. the column name is '1' and the rows are the positions in the array at each swap) then the plot comes out okay, but the labels are kind of confusing.</p>
<p>The plot is hopefully a useful way to figure out what's going on. If you look at the unsorted values you can see that once they are the largest of the unsorted values, they "bubble up" in a diagonal but straight line. Before this plot I would have said that the largest elements are the ones that get sorted first, but if you look at the plot (assuming I don't re-run it and change the arrangements) and in particular you look at the least-valued elements (1 and 2) you can see that they reach their final position fairly early, just by virtue of being in a position to get pushed down.</p>
</div>
<div class="outline-4" id="outline-container-orga8356fc">
<h4 id="orga8356fc">Worst Case</h4>
<div class="outline-text-4" id="text-orga8356fc">
<p>The random-input gives an interesting view of how the algorithm might work in practice, but let's look at the worst-case input where the values are in the opposite of the sorted order.</p>
<div class="highlight">
<pre><span></span><span class="n">COUNT</span> <span class="o">=</span> <span class="mi">20</span>
<span class="n">inputs</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">reversed</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">COUNT</span><span class="p">)))</span>
<span class="n">swaps</span> <span class="o">=</span> <span class="n">swap_tracker</span><span class="p">(</span><span class="n">inputs</span><span class="p">)</span>

<span class="n">track_frame</span> <span class="o">=</span> <span class="n">pandas</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">swaps</span><span class="p">)</span>
<span class="n">re_indexed</span> <span class="o">=</span> <span class="n">track_frame</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s2">"index"</span><span class="p">:</span> <span class="s2">"Swap"</span><span class="p">})</span>
<span class="n">melted</span> <span class="o">=</span> <span class="n">re_indexed</span><span class="o">.</span><span class="n">melt</span><span class="p">(</span><span class="n">var_name</span><span class="o">=</span><span class="s2">"Value To Sort"</span><span class="p">,</span> <span class="n">value_name</span><span class="o">=</span><span class="s2">"Location In Array"</span><span class="p">,</span> <span class="n">id_vars</span><span class="o">=</span><span class="s2">"Swap"</span><span class="p">)</span>


<span class="n">ticks</span> <span class="o">=</span> <span class="p">[(</span><span class="n">index</span><span class="p">,</span> <span class="n">index</span><span class="p">)</span> <span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">COUNT</span><span class="p">)]</span>
<span class="n">plot</span> <span class="o">=</span> <span class="n">melted</span><span class="o">.</span><span class="n">hvplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s2">"Swap"</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">"Location In Array"</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s2">"blues"</span><span class="p">,</span>
                     <span class="n">by</span><span class="o">=</span><span class="s2">"Value To Sort"</span><span class="p">)</span><span class="o">.</span><span class="n">opts</span><span class="p">(</span><span class="n">show_legend</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                     <span class="n">width</span><span class="o">=</span><span class="mi">800</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">700</span><span class="p">,</span> <span class="n">yticks</span><span class="o">=</span><span class="n">ticks</span><span class="p">,</span>
                            <span class="n">title</span><span class="o">=</span><span class="s2">"Bubble Sort Swaps (Worst Case)"</span><span class="p">,)</span>


<span class="n">output</span> <span class="o">=</span> <span class="n">Embed</span><span class="p">(</span><span class="n">plot</span><span class="o">=</span><span class="n">plot</span><span class="p">,</span> <span class="n">file_name</span><span class="o">=</span><span class="s2">"bubble_sort_worst_swaps"</span><span class="p">)()</span>
</pre></div>
<object data="posts/bubble-sort-an-empirical-look/bubble_sort_worst_swaps.html" height="800" style="width:100%" type="text/html">
<p>Figure Missing</p>
</object>
<p>This image gives an even better sense of the way that the bubble sort works. Since the Bubble Sort uses a left-to-right traversal and swapping as you go, the largest values shoot up to their final positions in straight lines, while the lesser values get pushed down a little with each traversal until they reach the correct position.</p>
</div>
</div>
</div>
</div>
<div class="outline-2" id="outline-container-org3276ecd">
<h2 id="org3276ecd">Onward</h2>
<div class="outline-text-2" id="text-org3276ecd">
<p>The <a href="posts/double-bubble-sort/index.html">final post in this series</a> (maybe) will look at a variation on the Bubble Sort that can improve the performance in special cases.</p>
</div>
</div>
</div>
</article>
<article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article">
<header>
<h1 class="p-name entry-title"><a class="u-url" href="posts/bubble-sort-the-implementation/index.html">Bubble Sort: The Implementation</a></h1>
<div class="metadata">
<p class="byline author vcard"><span class="byline-name fn" itemprop="author">The Cloistered Monkey</span></p>
<p class="dateline"><a href="posts/bubble-sort-the-implementation/index.html" rel="bookmark"><time class="published dt-published" datetime="2021-11-17T05:06:51-07:00" itemprop="datePublished" title="2021-11-17 05:06">2021-11-17 05:06</time></a></p>
</div>
</header>
<div class="e-content entry-content">
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="posts/bubble-sort-the-implementation/index.html#orgd205a24">Some Setup</a>
<ul>
<li><a href="posts/bubble-sort-the-implementation/index.html#org4a6d3ca">Imports</a></li>
</ul>
</li>
<li><a href="posts/bubble-sort-the-implementation/index.html#org0d71fa8">Bubble Sort</a>
<ul>
<li><a href="posts/bubble-sort-the-implementation/index.html#orga912d88">The Implementation</a></li>
<li><a href="posts/bubble-sort-the-implementation/index.html#org0d38235">Try It Out</a></li>
</ul>
</li>
<li><a href="posts/bubble-sort-the-implementation/index.html#org49fd4d3">Up Next</a></li>
</ul>
</div>
</div>
<p>This is part of a <a href="pages/the-bubble-sort/index.html">series on Bubble Sort</a> that began with a look at <a href="posts/bubble-sort-the-algorithm/index.html">the Bubble Sort Algorithm</a> and continues now with a python translation of the algorithm.</p>
<div class="outline-2" id="outline-container-orgd205a24">
<h2 id="orgd205a24">Some Setup</h2>
<div class="outline-text-2" id="text-orgd205a24"></div>
<div class="outline-3" id="outline-container-org4a6d3ca">
<h3 id="org4a6d3ca">Imports</h3>
<div class="outline-text-3" id="text-org4a6d3ca">
<div class="highlight">
<pre><span></span><span class="c1"># python</span>
<span class="kn">from</span> <span class="nn">random</span> <span class="kn">import</span> <span class="n">choices</span>

<span class="c1"># pypi</span>
<span class="kn">from</span> <span class="nn">expects</span> <span class="kn">import</span> <span class="n">contain_exactly</span><span class="p">,</span> <span class="n">equal</span><span class="p">,</span> <span class="n">expect</span>
</pre></div>
</div>
</div>
</div>
<div class="outline-2" id="outline-container-org0d71fa8">
<h2 id="org0d71fa8">Bubble Sort</h2>
<div class="outline-text-2" id="text-org0d71fa8"></div>
<div class="outline-3" id="outline-container-orga912d88">
<h3 id="orga912d88">The Implementation</h3>
<div class="outline-text-3" id="text-orga912d88">
<p>Here's a straight-forward translation of the pseudocode to python.</p>
<div class="highlight">
<pre><span></span><span class="k">def</span> <span class="nf">bubble_sort</span><span class="p">(</span><span class="n">unsorted</span><span class="p">:</span> <span class="nb">list</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""Sorts the unsorted</span>

<span class="sd">    Args:</span>
<span class="sd">     unsorted: mutable collect of orderable items</span>

<span class="sd">    Returns:</span>
<span class="sd">     original list sorted in ascending order</span>
<span class="sd">    """</span>
    <span class="n">all_but_one</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">unsorted</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span>
    <span class="k">for</span> <span class="n">items_bubbled_up</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">all_but_one</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">left_hand</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">all_but_one</span> <span class="o">-</span> <span class="n">items_bubbled_up</span><span class="p">):</span>
            <span class="n">right_hand</span> <span class="o">=</span> <span class="n">left_hand</span> <span class="o">+</span> <span class="mi">1</span>
            <span class="k">if</span> <span class="n">unsorted</span><span class="p">[</span><span class="n">right_hand</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">unsorted</span><span class="p">[</span><span class="n">left_hand</span><span class="p">]:</span>
                <span class="p">(</span><span class="n">unsorted</span><span class="p">[</span><span class="n">left_hand</span><span class="p">],</span>
                 <span class="n">unsorted</span><span class="p">[</span><span class="n">right_hand</span><span class="p">])</span> <span class="o">=</span> <span class="p">(</span><span class="n">unsorted</span><span class="p">[</span><span class="n">right_hand</span><span class="p">],</span>
                                          <span class="n">unsorted</span><span class="p">[</span><span class="n">left_hand</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">unsorted</span>
</pre></div>
</div>
</div>
<div class="outline-3" id="outline-container-org0d38235">
<h3 id="org0d38235">Try It Out</h3>
<div class="outline-text-3" id="text-org0d38235">
<div class="highlight">
<pre><span></span><span class="n">inputs</span> <span class="o">=</span> <span class="p">[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
<span class="n">expect</span><span class="p">(</span><span class="n">bubble_sort</span><span class="p">(</span><span class="n">inputs</span><span class="p">))</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">contain_exactly</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>

<span class="n">population</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">1000</span><span class="p">))</span>
<span class="n">scrambled</span> <span class="o">=</span> <span class="n">choices</span><span class="p">(</span><span class="n">expected</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="mi">1000</span><span class="p">)</span>
<span class="n">expect</span><span class="p">(</span><span class="n">bubble_sort</span><span class="p">(</span><span class="n">scrambled</span><span class="p">))</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">contain_exactly</span><span class="p">(</span><span class="o">*</span><span class="nb">list</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="n">scrambled</span><span class="p">))))</span>
</pre></div>
<p>Well, that wasn't so exciting, but that's because I'm going to look more at how the sort performs in the <a href="posts/bubble-sort-an-empirical-look/index.html">next post</a>.</p>
</div>
</div>
</div>
<div class="outline-2" id="outline-container-org49fd4d3">
<h2 id="org49fd4d3">Up Next</h2>
<div class="outline-text-2" id="text-org49fd4d3">
<p>In the <a href="posts/bubble-sort-an-empirical-look/index.html">next post</a> I'll run the function over some inputs to see how it performs.</p>
</div>
</div>
</div>
</article>
<article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article">
<header>
<h1 class="p-name entry-title"><a class="u-url" href="posts/bubble-sort-runtime-explained/index.html">Bubble Sort: Runtime Explained</a></h1>
<div class="metadata">
<p class="byline author vcard"><span class="byline-name fn" itemprop="author">The Cloistered Monkey</span></p>
<p class="dateline"><a href="posts/bubble-sort-runtime-explained/index.html" rel="bookmark"><time class="published dt-published" datetime="2021-11-17T03:45:35-08:00" itemprop="datePublished" title="2021-11-17 03:45">2021-11-17 03:45</time></a></p>
</div>
</header>
<div class="e-content entry-content">
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="posts/bubble-sort-runtime-explained/index.html#org2fefd5f">What This Is</a>
<ul>
<li><a href="posts/bubble-sort-runtime-explained/index.html#orge0dead5">Start With the Loops</a></li>
<li><a href="posts/bubble-sort-runtime-explained/index.html#org1c86064">Decompose the Inner Sum</a></li>
<li><a href="posts/bubble-sort-runtime-explained/index.html#orgb15a5ae">Break Apart the Polynomial</a></li>
<li><a href="posts/bubble-sort-runtime-explained/index.html#org8a96457">That Last Term</a></li>
<li><a href="posts/bubble-sort-runtime-explained/index.html#org4ef8786">Put the Three Terms Back Together</a></li>
</ul>
</li>
<li><a href="posts/bubble-sort-runtime-explained/index.html#orgfc9aaaa">Re-Orienting</a></li>
</ul>
</div>
</div>
<div class="outline-2" id="outline-container-org2fefd5f">
<h2 id="org2fefd5f">What This Is</h2>
<div class="outline-text-2" id="text-org2fefd5f">
<p>The number of comparisons for the Bubble Sort is equal to the number of times the loops run, so we get \(\Theta(n^2)\). I originally only did a truncated version of showing how you get \(n^2\) but then I had to struggle a little to remember what was going on when I looked back at it so I'm going to break it down more here.</p>
</div>
<div class="outline-3" id="outline-container-orge0dead5">
<h3 id="orge0dead5">Start With the Loops</h3>
<div class="outline-text-3" id="text-orge0dead5">
<p>We have an outer loop that runs from \(0\ldots n-2\) and an inner loop that goes from \(0 \dots n - 2 - i \) giving us a summation that looks like this</p>
<p>\[ C(n) = \sum_{i=0}^{n-2} \sum_{j=0}^{n - 2 - i} 1 \]</p>
<p>It's summing \(1\) because there's one comparison in each of the loops.</p>
</div>
</div>
<div class="outline-3" id="outline-container-org1c86064">
<h3 id="org1c86064">Decompose the Inner Sum</h3>
<div class="outline-text-3" id="text-org1c86064">
<p>So first we have to recognize that since we're summing \(1\) (the comparison) what we're doing is adding \(1\) for every item in the summation which is the equivalent of counting how many numbers there are from \(0\) to \(n - 2 - i\). When you have a sequence of consecutive integers (say 5, 6, 7, 8) the way to count the number there are in the sequence is \(\textit{last} - \textit{first} + 1\). So for 5, 6, 7, 8 we have \(8 - 5 + 1 = 4\) so there are four numbers in the sequence. If we apply that to the sequence created by the inner summation we get this</p>
\begin{align} C(n) &amp;= \sum_{i=0}^{n-2} \sum_{j=0}^{n - 2 - i} 1\\ &amp;= \sum_{i=0}^{n-2} (n - 2 - i) - 0 + 1\\ &amp;= \sum_{i=0}^{n-2} n - 1 - i\\ \end{align}</div>
</div>
<div class="outline-3" id="outline-container-orgb15a5ae">
<h3 id="orgb15a5ae">Break Apart the Polynomial</h3>
<div class="outline-text-3" id="text-orgb15a5ae">
<p>With summations, if you are summing a polynomial, then you can break additions and subtractions apart into separate summations. Additionally, any multiplications can be moved outside of the summation. So now we get</p>
\begin{align} C(n) &amp;= \sum_{i=0}^{n-2} n - 1 - i\\ &amp;= n \sum_{i=0}^{n-2} 1 - \sum_{i=0}^{n-2} 1 - \sum_{i=0}^{n-2} i\\ \end{align}</div>
</div>
<div class="outline-3" id="outline-container-org8a96457">
<h3 id="org8a96457">That Last Term</h3>
<div class="outline-text-3" id="text-org8a96457">
<p>If you squint at the first two terms of that last line you can see that we're summing up \(1\) just like we did with the inner loop so it's going to be a similar outcome just with a different ending point (and we'll also multiply by <i>n</i> for the first term). But that last one is a little trickier. It's a summation of <i>i</i> rather than \(1\) so it'll be \(0 + 1 + \cdots + (n-1) + (n-2)\). This is a sequence that happens often enough that if you do this sort of thing a lot you'll just remember it, but I don't do it a lot and I'm rather of a forgetful bent anyway so I'll show how I remember to get it. First you have to remember that the sum of terms is the same no matter the order you put the terms in, so the summation comes out the same even when it's reversed. What we'll do is add the sequence with its reverse term by term we to get something like this</p>
\begin{array}{ccccccccc} & 0 & + & 1 & + & \cdots & + & (n - 3) & + & (n - 2) \\ + & (n - 2) & + & (n - 3) & + & \cdots & + & 1 & + & 0 \\ \hline & (n - 2) & + & (n - 2) & + & \cdots & + & (n - 2) & + & (n - 2)\\ \end{array}
<p>And using our counting equation we have</p>
\begin{align} end - start + 1 &amp;= n - 2 - 0 + 1 \\ &amp;= n - 1 \end{align}
<p>So we have \(n - 1\) terms in that sum we got by adding the reverse (each term being \(n - 2\)), but since we added the sequence with its reverse it's now twice as big as it should be so we need to halve it, and the third term of our summation becomes</p>
<p>\[ \frac{(n - 1)(n - 2)}{2} \]</p>
</div>
</div>
<div class="outline-3" id="outline-container-org4ef8786">
<h3 id="org4ef8786">Put the Three Terms Back Together</h3>
<div class="outline-text-3" id="text-org4ef8786">
<p>Now, going back to where we were in the summation - if do the expansion of the first two terms using the counting equation and add the third term from the previous section, we get this</p>
\begin{align} C(n) &amp;= n \sum_{i=0}^{n-2} 1 - \sum_{i=0}^{n-2} 1 - \sum_{i=0}^{n-2} i\\ &amp;= n(n - 2 - 0 + 1) - (n - 2 - 0 + 1) - \frac{(n - 1)(n - 2)}{2}\\ &amp;= n(n - 1) - (n - 1)- \frac{n^2 -2n - n + 2}{2}\\ &amp;= (n^2 - n) - (n - 1) - \frac{n^2 - 3n + 2}{2}\\ &amp;= \frac{2(n^2 - n)}{2} - \frac{2(n - 1)}{2} - \frac{n^2 - 3n + 2}{2}\\ &amp;= \frac{2 n^2 - 2n - 2n + 2 - n^2 + 3n -2}{2}\\ &amp;= \frac{n^2 - n}{2} \in \Theta(n^2) \end{align}
<p>Oy. Now don't forget next time.</p>
</div>
</div>
</div>
<div class="outline-2" id="outline-container-orgfc9aaaa">
<h2 id="orgfc9aaaa">Re-Orienting</h2>
<div class="outline-text-2" id="text-orgfc9aaaa">
<p>This is part of a <a href="pages/the-bubble-sort/index.html">series on Bubble Sort</a>. More specifically, it expands on the post <a href="posts/bubble-sort-the-algorithm/index.html">looking at the Bubble Sort Algorithms</a>.</p>
</div>
</div>
</div>
</article>
<article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article">
<header>
<h1 class="p-name entry-title"><a class="u-url" href="posts/bubble-sort-the-algorithm/index.html">Bubble Sort: The Algorithm</a></h1>
<div class="metadata">
<p class="byline author vcard"><span class="byline-name fn" itemprop="author">The Cloistered Monkey</span></p>
<p class="dateline"><a href="posts/bubble-sort-the-algorithm/index.html" rel="bookmark"><time class="published dt-published" datetime="2021-11-17T02:45:55-08:00" itemprop="datePublished" title="2021-11-17 02:45">2021-11-17 02:45</time></a></p>
</div>
</header>
<div class="e-content entry-content">
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="posts/bubble-sort-the-algorithm/index.html#org14cf105">The Parts</a></li>
<li><a href="posts/bubble-sort-the-algorithm/index.html#org501785c">The Algorithm</a>
<ul>
<li><a href="posts/bubble-sort-the-algorithm/index.html#orge1fa6d2">Pseudocode</a></li>
<li><a href="posts/bubble-sort-the-algorithm/index.html#orga416514">Diagram</a></li>
</ul>
</li>
<li><a href="posts/bubble-sort-the-algorithm/index.html#org0db5767">A Simple Example</a>
<ul>
<li><a href="posts/bubble-sort-the-algorithm/index.html#orge479d52">As a Table</a></li>
</ul>
</li>
<li><a href="posts/bubble-sort-the-algorithm/index.html#org0eb2366">Assessing the Damage</a>
<ul>
<li>
<ul>
<li><a href="posts/bubble-sort-the-algorithm/index.html#org156b725">Comparisons</a></li>
<li><a href="posts/bubble-sort-the-algorithm/index.html#org01c76e5">Swaps</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="posts/bubble-sort-the-algorithm/index.html#orgd0db7f2">Onward</a></li>
<li><a href="posts/bubble-sort-the-algorithm/index.html#orgffa6a7e">Sources</a></li>
</ul>
</div>
</div>
<p>This is part of a <a href="pages/the-bubble-sort/index.html">series on the Bubble Sort</a>. In this post we'll look at the algorithm without worrying about the implementation details.</p>
<p>\(\def\sc#1{\dosc#1\csod} \def\dosc#1#2\csod{{\rm #1{\small #2}}}\)</p>
<div class="outline-2" id="outline-container-org14cf105">
<h2 id="org14cf105">The Parts</h2>
<div class="outline-text-2" id="text-org14cf105">
<ul class="org-ul">
<li><b>Specification:</b> This is an instance of <a href="posts/the-sorting-problem/index.html">The Sorting Problem</a>.</li>
<li><b>Basic Steps:</b> Swap adjacent elements that are out of order.</li>
<li><b>Measure of Progress:</b> The number of items sorted so far.</li>
<li><b>The Loop Invariant:</b> The number of times the loop has been performed (<i>k</i>) is the number of elements at the end of the items which are the largest elements in sorted order.</li>
<li><b>Main Steps:</b> Move from the start of the list swapping adjacent items that are out of order until the largest previously unsorted item is at the beginning of the sorted items.</li>
<li><b>Make Progress:</b> The main step reduces the unsorted by 1.</li>
<li><b>Maintain the Loop Invariant:</b>
<ul class="org-ul">
<li>\(\langle Loop-Invariant \rangle\): <i>k</i> items at the end of the list are sorted.</li>
<li>\(\lnot \langle Exit-Condition \rangle\): There is more than one item that is unsorted.</li>
<li>\(\textsc{CodeLoop}\): The <i>k+1</i> item was the largest of the unsorted items and is now at the beginning of the sorted items.</li>
</ul>
</li>
<li><b>Establish the Loop Invariant:</b> Initially no items are swapped.</li>
<li><b>Exit Condition:</b> Stop when there is only one item in the unsorted items.</li>
<li><b>Ending:</b>
<ul class="org-ul">
<li>\(\langle Exit-Condition \rangle\): All but the smallest item are in the upper list.</li>
<li>\(\langle Loop-Invariant \rangle\): All the items in the upper list are sorted in non-decreasing order.</li>
<li>\(\langle Post-Condition \rangle \): The list is sorted in non-decreasing order.</li>
</ul>
</li>
</ul>
</div>
</div>
<div class="outline-2" id="outline-container-org501785c">
<h2 id="org501785c">The Algorithm</h2>
<div class="outline-text-2" id="text-org501785c"></div>
<div class="outline-3" id="outline-container-orge1fa6d2">
<h3 id="orge1fa6d2">Pseudocode</h3>
<div class="outline-text-3" id="text-orge1fa6d2">
<p>The Bubble Sort algorithm is a Brute-Force sort which works by repeatedly traversing the input array, checking adjacent values and swapping them if they are out of order. This has the effect of "bubbling-up" the largest unsorted value, thus the name, probably (see <a href="posts/bubble-sort-an-archeological-algorithmic-analysis/index.html">Astrachan, 2003</a> for some history on it). Here's the algorithm in pseudocode.</p>
<pre id="bubblesort" style="display:hidden;">
\begin{algorithm}
\caption{BubbleSort}
\begin{algorithmic}
\INPUT An array of orderable items
\OUTPUT The array sorted in ascending order
\PROCEDURE{BubbleSort}{$A$}
  \FOR{$i \gets 0$ to $n - 2$}
    \FOR{$j \gets 0$ to $n - 2 - i$}
      \IF{$A[j+1] &lt; A[j]$}
        \STATE swap $A[j]$ and $A[j+1]$
      \ENDIF
    \ENDFOR
  \ENDFOR
\ENDPROCEDURE
\end{algorithmic}
\end{algorithm}
</pre>
<p>If you squint a little you'll see that there's only really four lines of code, two for-loops, an if-then conditional, and a "swap", the rest is noise from the algorithmic formatting.</p>
<p>In translation, the \(i\) variable holds the amount of items at the end of the list that have been sorted so far, and the \(j\) variable moves from the start of the list up to the end of the unsorted (since the outer loop goes up by one each time and the inner loop is subtracting the outer loop's value when finding where to stop it goes up one less entry with each loop). Then the conditional says that if the item to the right of where we currently are is smaller than the item in front of us, swap the two items so that the bigger item is on the right.</p>
</div>
</div>
<div class="outline-3" id="outline-container-orga416514">
<h3 id="orga416514">Diagram</h3>
<div class="outline-text-3" id="text-orga416514">
<p><img alt="nil" src="posts/bubble-sort-the-algorithm/bubble-sort.svg"></p>
<p>The three colors in the diagram represent:</p>
<ul class="org-ul">
<li>Blue: The outer for-loop</li>
<li>Red: The inner for-loop</li>
<li>Green: The transitioning to and from the inner loop to the outer loop.</li>
</ul>
</div>
</div>
</div>
<div class="outline-2" id="outline-container-org0db5767">
<h2 id="org0db5767">A Simple Example</h2>
<div class="outline-text-2" id="text-org0db5767">
<p>Let's step through how the Bubble Sort works with five items to sort.</p>
<ul class="org-ul">
<li>The Array To Sort: A = [4, 5, 2, 3, 1]</li>
<li>n = 5</li>
<li>n - 1 = 4</li>
<li>n - 2 = 3</li>
</ul>
</div>
<div class="outline-3" id="outline-container-orge479d52">
<h3 id="orge479d52">As a Table</h3>
<div class="outline-text-3" id="text-orge479d52">
<table border="2" cellpadding="6" cellspacing="0" frame="hsides" rules="groups">
<colgroup>
<col class="org-right">
<col class="org-left">
<col class="org-right">
<col class="org-left">
<col class="org-right">
<col class="org-left">
<col class="org-right">
<col class="org-left">
<col class="org-right">
<col class="org-left">
<col class="org-left"></colgroup>
<thead>
<tr>
<th class="org-right" scope="col"># Sorted</th>
<th class="org-left" scope="col">All Sorted?</th>
<th class="org-right" scope="col">Last Unsorted</th>
<th class="org-left" scope="col">&nbsp;</th>
<th class="org-right" scope="col">&nbsp;</th>
<th class="org-left" scope="col">Exit Inner Loop?</th>
<th class="org-right" scope="col">&nbsp;</th>
<th class="org-left" scope="col">&nbsp;</th>
<th class="org-right" scope="col">&nbsp;</th>
<th class="org-left" scope="col">Swap?</th>
<th class="org-left" scope="col">&nbsp;</th>
</tr>
<tr>
<th class="org-right" scope="col"><i>i</i></th>
<th class="org-left" scope="col"><i>i == n - 1</i></th>
<th class="org-right" scope="col"><i>n - 2 - i</i></th>
<th class="org-left" scope="col">&nbsp;</th>
<th class="org-right" scope="col"><i>j</i></th>
<th class="org-left" scope="col"><i>j &gt; n - 2 - i</i></th>
<th class="org-right" scope="col"><i>A[j]</i></th>
<th class="org-left" scope="col">&nbsp;</th>
<th class="org-right" scope="col"><i>A[j + 1]</i></th>
<th class="org-left" scope="col"><i>A[j] &gt; A[j + 1]</i></th>
<th class="org-left" scope="col"><i>A</i></th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-right">0</td>
<td class="org-left">\(\ne n - 1\)</td>
<td class="org-right">3</td>
<td class="org-left">\(\nless\)</td>
<td class="org-right">0</td>
<td class="org-left">&nbsp;</td>
<td class="org-right">4</td>
<td class="org-left">&lt;</td>
<td class="org-right">5</td>
<td class="org-left">&nbsp;</td>
<td class="org-left">4, 5, 2, 3, 1</td>
</tr>
<tr>
<td class="org-right">&nbsp;</td>
<td class="org-left">&nbsp;</td>
<td class="org-right">&nbsp;</td>
<td class="org-left">\(\nless\)</td>
<td class="org-right">1</td>
<td class="org-left">&nbsp;</td>
<td class="org-right">5</td>
<td class="org-left">&gt;</td>
<td class="org-right">2</td>
<td class="org-left">Swap</td>
<td class="org-left">4, 2, 5, 3, 1</td>
</tr>
<tr>
<td class="org-right">&nbsp;</td>
<td class="org-left">&nbsp;</td>
<td class="org-right">&nbsp;</td>
<td class="org-left">\(\nless\)</td>
<td class="org-right">2</td>
<td class="org-left">&nbsp;</td>
<td class="org-right">5</td>
<td class="org-left">&gt;</td>
<td class="org-right">3</td>
<td class="org-left">Swap</td>
<td class="org-left">4, 2, 3, 5, 1</td>
</tr>
<tr>
<td class="org-right">&nbsp;</td>
<td class="org-left">&nbsp;</td>
<td class="org-right">&nbsp;</td>
<td class="org-left">\(\nless\)</td>
<td class="org-right">3</td>
<td class="org-left">&nbsp;</td>
<td class="org-right">5</td>
<td class="org-left">&gt;</td>
<td class="org-right">4</td>
<td class="org-left">Swap</td>
<td class="org-left">4, 2, 3, 1, 5</td>
</tr>
<tr>
<td class="org-right">&nbsp;</td>
<td class="org-left">&nbsp;</td>
<td class="org-right">&nbsp;</td>
<td class="org-left">&lt;</td>
<td class="org-right">4</td>
<td class="org-left">Exit Loop</td>
<td class="org-right">&nbsp;</td>
<td class="org-left">&nbsp;</td>
<td class="org-right">&nbsp;</td>
<td class="org-left">&nbsp;</td>
<td class="org-left">&nbsp;</td>
</tr>
<tr>
<td class="org-right">1</td>
<td class="org-left">\(\ne n - 1\)</td>
<td class="org-right">2</td>
<td class="org-left">\(\nless\)</td>
<td class="org-right">0</td>
<td class="org-left">&nbsp;</td>
<td class="org-right">4</td>
<td class="org-left">&gt;</td>
<td class="org-right">2</td>
<td class="org-left">Swap</td>
<td class="org-left">2, 4, 3, 1, 5</td>
</tr>
<tr>
<td class="org-right">&nbsp;</td>
<td class="org-left">&nbsp;</td>
<td class="org-right">&nbsp;</td>
<td class="org-left">\(\nless\)</td>
<td class="org-right">1</td>
<td class="org-left">&nbsp;</td>
<td class="org-right">4</td>
<td class="org-left">&gt;</td>
<td class="org-right">3</td>
<td class="org-left">Swap</td>
<td class="org-left">2, 3, 4, 1, 5</td>
</tr>
<tr>
<td class="org-right">&nbsp;</td>
<td class="org-left">&nbsp;</td>
<td class="org-right">&nbsp;</td>
<td class="org-left">\(\nless\)</td>
<td class="org-right">2</td>
<td class="org-left">&nbsp;</td>
<td class="org-right">4</td>
<td class="org-left">&gt;</td>
<td class="org-right">1</td>
<td class="org-left">Swap</td>
<td class="org-left">2, 3, 1, 4, 5</td>
</tr>
<tr>
<td class="org-right">&nbsp;</td>
<td class="org-left">&nbsp;</td>
<td class="org-right">&nbsp;</td>
<td class="org-left">&lt;</td>
<td class="org-right">3</td>
<td class="org-left">Exit Loop</td>
<td class="org-right">&nbsp;</td>
<td class="org-left">&nbsp;</td>
<td class="org-right">&nbsp;</td>
<td class="org-left">&nbsp;</td>
<td class="org-left">&nbsp;</td>
</tr>
<tr>
<td class="org-right">2</td>
<td class="org-left">\(\ne n - 1\)</td>
<td class="org-right">1</td>
<td class="org-left">\(\nless\)</td>
<td class="org-right">0</td>
<td class="org-left">&nbsp;</td>
<td class="org-right">2</td>
<td class="org-left">&lt;</td>
<td class="org-right">3</td>
<td class="org-left">&nbsp;</td>
<td class="org-left">2, 3, 1, 4, 5</td>
</tr>
<tr>
<td class="org-right">&nbsp;</td>
<td class="org-left">&nbsp;</td>
<td class="org-right">&nbsp;</td>
<td class="org-left">\(\nless\)</td>
<td class="org-right">1</td>
<td class="org-left">&nbsp;</td>
<td class="org-right">3</td>
<td class="org-left">&gt;</td>
<td class="org-right">1</td>
<td class="org-left">Swap</td>
<td class="org-left">2, 1, 3, 4, 5</td>
</tr>
<tr>
<td class="org-right">&nbsp;</td>
<td class="org-left">&nbsp;</td>
<td class="org-right">&nbsp;</td>
<td class="org-left">&lt;</td>
<td class="org-right">2</td>
<td class="org-left">Exit Loop</td>
<td class="org-right">&nbsp;</td>
<td class="org-left">&nbsp;</td>
<td class="org-right">&nbsp;</td>
<td class="org-left">&nbsp;</td>
<td class="org-left">&nbsp;</td>
</tr>
<tr>
<td class="org-right">3</td>
<td class="org-left">\(\ne n - 1\)</td>
<td class="org-right">0</td>
<td class="org-left">\(\nless\)</td>
<td class="org-right">0</td>
<td class="org-left">&nbsp;</td>
<td class="org-right">2</td>
<td class="org-left">&gt;</td>
<td class="org-right">1</td>
<td class="org-left">Swap</td>
<td class="org-left">1, 2, 3, 4, 5</td>
</tr>
<tr>
<td class="org-right">&nbsp;</td>
<td class="org-left">&nbsp;</td>
<td class="org-right">&nbsp;</td>
<td class="org-left">&lt;</td>
<td class="org-right">1</td>
<td class="org-left">Exit Loop</td>
<td class="org-right">&nbsp;</td>
<td class="org-left">&nbsp;</td>
<td class="org-right">&nbsp;</td>
<td class="org-left">&nbsp;</td>
<td class="org-left">&nbsp;</td>
</tr>
<tr>
<td class="org-right">4</td>
<td class="org-left">\(== n - 1\) (<b>Done</b>)</td>
<td class="org-right">&nbsp;</td>
<td class="org-left">&nbsp;</td>
<td class="org-right">&nbsp;</td>
<td class="org-left">&nbsp;</td>
<td class="org-right">&nbsp;</td>
<td class="org-left">&nbsp;</td>
<td class="org-right">&nbsp;</td>
<td class="org-left">&nbsp;</td>
<td class="org-left">&nbsp;</td>
</tr>
</tbody>
</table>
<p>Some Column Notes:</p>
<ul class="org-ul">
<li><i>i</i> is the count of items in the sorted section at the end of the array</li>
<li><i>i == n - 1</i>: When there's only one item left in the unsorted section there's nothing to swap so the array is sorted.</li>
<li><i>n - 2 - i</i> is the index of the item at the end of the unsorted section right before the sorted section of the array.</li>
<li><i>j &gt; n - 2 - i</i>: When <i>j</i> moves into the already sorted section restart the inner loop.</li>
<li><i>A[j] &gt; A[j + 1]</i>: If the item to the right of <i>j</i> is smaller than the item at <i>j</i> then swap them.</li>
</ul>
</div>
</div>
</div>
<div class="outline-2" id="outline-container-org0eb2366">
<h2 id="org0eb2366">Assessing the Damage</h2>
<div class="outline-text-2" id="text-org0eb2366">
<p>Although it's nice to know that the sort works we're really not as concerned about how correct it is, as much as we are interested in how it performs. There's two things we can count:</p>
<ol class="org-ol">
<li>The Number of comparisons</li>
<li>The Number of swaps.</li>
</ol>
<p>The fact that you have those two loops makes it pretty likely that it's going to be \(\Theta\left(n^2\right)\) but since Bubble Sort is mostly an academic example let's work it out.</p>
</div>
<div class="outline-4" id="outline-container-org156b725">
<h4 id="org156b725">Comparisons</h4>
<div class="outline-text-4" id="text-org156b725">
<p>The number of comparisons is equal to the number of times the loops run, so we get \(\Theta\left(n^2\right)\). I made some notes on how I got that in <a href="posts/bubble-sort-runtime-explained/index.html">this post</a>.</p>
</div>
</div>
<div class="outline-4" id="outline-container-org01c76e5">
<h4 id="org01c76e5">Swaps</h4>
<div class="outline-text-4" id="text-org01c76e5">
<p>The number of swaps will depend on how the inputs are arranged, but in the worst case where the array is sorted backwards, every comparison will produce a swap so you'll end up with the same bounds as the comparisons.</p>
\begin{align} S_{worst-case} &amp;= C(n)\\ &amp;= \frac{n^2 - n}{2} \in \Theta(n^2) \end{align}</div>
</div>
</div>
<div class="outline-2" id="outline-container-orgd0db7f2">
<h2 id="orgd0db7f2">Onward</h2>
<div class="outline-text-2" id="text-orgd0db7f2">
<p>The <a href="posts/bubble-sort-the-implementation/index.html">next post</a> will look at translating the algorithm to python.</p>
</div>
</div>
<div class="outline-2" id="outline-container-orgffa6a7e">
<h2 id="orgffa6a7e">Sources</h2>
<div class="outline-text-2" id="text-orgffa6a7e">
<ul class="org-ul">
<li>(Levitin, 2007) <a href="posts/itdaa/index.html">Introduction to the Design & Analysis of Algorithms (Levitin)</a></li>
<li><a id="org2906403"></a> (Astrachan, 2003) <a href="posts/bubble-sort-an-archeological-algorithmic-analysis/index.html">Bubble Sort: An Archeological Algorithmic Analysis</a></li>
</ul>
<script>
window.addEventListener('load', function () {
    pseudocode.renderElement(document.getElementById("bubblesort"));
});
</script></div>
</div>
</div>
</article>
<article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article">
<header>
<h1 class="p-name entry-title"><a class="u-url" href="posts/HTTAA/index.html">How To Think About Algorithms</a></h1>
<div class="metadata">
<p class="byline author vcard"><span class="byline-name fn" itemprop="author">The Cloistered Monkey</span></p>
<p class="dateline"><a href="posts/HTTAA/index.html" rel="bookmark"><time class="published dt-published" datetime="2021-10-21T13:19:32-08:00" itemprop="datePublished" title="2021-10-21 13:19">2021-10-21 13:19</time></a></p>
</div>
</header>
<div class="e-content entry-content">
<div class="outline-2" id="outline-container-org076e3a0">
<h2 id="org076e3a0">Contents</h2>
<div class="outline-text-2" id="text-org076e3a0">
<ul class="org-ul">
<li>Introduction</li>
</ul>
</div>
<div class="outline-3" id="outline-container-org298a76b">
<h3 id="org298a76b">Part One: Iterative Algorithms and Loop Invariants</h3>
<div class="outline-text-3" id="text-org298a76b">
<ol class="org-ol">
<li>Iterative Algorithms: Measures of Progress and Loop Invariants</li>
<li>Examples Using More-of-the-Input Loop Invariants</li>
<li>Abstract Data Types</li>
<li>Narrowing the Search Space: Binary Search</li>
<li>Iterative Sorting Algorithms</li>
<li>Euclid's GCD Algorithm</li>
<li>The Loop Invariant for Lower Bounds</li>
</ol>
</div>
</div>
<div class="outline-3" id="outline-container-org4821508">
<h3 id="org4821508">Part Two: Recursion</h3>
<div class="outline-text-3" id="text-org4821508">
<ol class="org-ol">
<li>Abstractions, Technique, and Theory</li>
<li>Some Simple Examples of Recursive Algorithms</li>
<li>Recursion on Trees</li>
<li>Recursive Images</li>
<li>Parsing with Context-Free Grammars</li>
</ol>
</div>
</div>
<div class="outline-3" id="outline-container-org56b43c1">
<h3 id="org56b43c1">Part Three: Optimization Problems</h3>
<div class="outline-text-3" id="text-org56b43c1">
<ol class="org-ol">
<li>Definition of Optimization Problems</li>
<li>Graph Search Algorithms</li>
<li>Network Flows and Linear Programming</li>
<li>Greedy Algorithms</li>
<li>Recursive Backtracking</li>
<li>Dynamic Programming Algorithms</li>
<li>Examples of Dynamic Programming</li>
<li>Reductions and NP-Completeness</li>
<li>Randomized Algorithms</li>
</ol>
</div>
</div>
<div class="outline-3" id="outline-container-org29c0789">
<h3 id="org29c0789">Part Four: Appendix</h3>
<div class="outline-text-3" id="text-org29c0789">
<ol class="org-ol">
<li>Existential and Universal Quantifiers</li>
<li>Time Complexity</li>
<li>Logarithms and Exponentials</li>
<li>Asymptotic Growth</li>
<li>Adding-Made-Easy Approximations</li>
<li>Recurrence Relations</li>
<li>A Formal Proof of Correctness</li>
</ol>
</div>
</div>
<div class="outline-3" id="outline-container-orge2eecb1">
<h3 id="orge2eecb1">Part Five: Exercise Solutions</h3>
</div>
<div class="outline-3" id="outline-container-org3ec00fa">
<h3 id="org3ec00fa">Conclusion</h3>
</div>
</div>
<div class="outline-2" id="outline-container-org51e0cb4">
<h2 id="org51e0cb4">Citation</h2>
<div class="outline-text-2" id="text-org51e0cb4">
<ul class="org-ul">
<li>[HTTAA] Edmonds J. How to think about algorithms. Cambridge ; New York: Cambridge University Press; 2008. 448 p.</li>
</ul>
</div>
</div>
</div>
</article>
<article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article">
<header>
<h1 class="p-name entry-title"><a class="u-url" href="posts/itdaa/index.html">Introduction to the Design & Analysis of Algorithms (Levitin)</a></h1>
<div class="metadata">
<p class="byline author vcard"><span class="byline-name fn" itemprop="author">The Cloistered Monkey</span></p>
<p class="dateline"><a href="posts/itdaa/index.html" rel="bookmark"><time class="published dt-published" datetime="2021-10-20T16:24:56-07:00" itemprop="datePublished" title="2021-10-20 16:24">2021-10-20 16:24</time></a></p>
</div>
</header>
<div class="e-content entry-content">
<p>Levitin A. 2007. Introduction to the design & analysis of algorithms. 2nd ed. Boston: Pearson Addison-Wesley.</p>
<div class="outline-2" id="outline-container-org5f6d0e1">
<h2 id="org5f6d0e1">Main Chapters</h2>
<div class="outline-text-2" id="text-org5f6d0e1">
<ol class="org-ol">
<li>Introduction</li>
<li>Fundamentals of the Analysis of Algorithm Efficiency</li>
<li>Brute Force</li>
<li>Divide-and-Conquer</li>
<li>Decrease-and-Conquer</li>
<li>Transform-and-Conquer</li>
<li>Space and Time Tradeoffs</li>
<li>Dynamic Programming</li>
<li>Greedy Technique</li>
<li>Iterative Improvement</li>
<li>Limitations of Algorithm Power</li>
<li>Coping with the Limitations of Algorithm Power</li>
<li>Useful Formulas for the Analysis of Algorithms</li>
<li>Short Tutorial on Recurrence Relations</li>
</ol>
</div>
</div>
</div>
</article>
<article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article">
<header>
<h1 class="p-name entry-title"><a class="u-url" href="posts/essential-algorithms/index.html">Essential Algorithms</a></h1>
<div class="metadata">
<p class="byline author vcard"><span class="byline-name fn" itemprop="author">The Cloistered Monkey</span></p>
<p class="dateline"><a href="posts/essential-algorithms/index.html" rel="bookmark"><time class="published dt-published" datetime="2021-08-12T12:39:58-07:00" itemprop="datePublished" title="2021-08-12 12:39">2021-08-12 12:39</time></a></p>
</div>
</header>
<div class="e-content entry-content">
<div class="outline-2" id="outline-container-org67b9445">
<h2 id="org67b9445">Citation</h2>
<div class="outline-text-2" id="text-org67b9445">
<ul class="org-ul">
<li>Stephens R. Essential algorithms: a practical approach to computer algorithms using Python and C#. 2nd ed. Indianapolis: John Wiley; 2019.</li>
</ul>
</div>
</div>
</div>
</article>
<article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article">
<header>
<h1 class="p-name entry-title"><a class="u-url" href="posts/clrs/index.html">Introduction To Algorithms (CLRS)</a></h1>
<div class="metadata">
<p class="byline author vcard"><span class="byline-name fn" itemprop="author">The Cloistered Monkey</span></p>
<p class="dateline"><a href="posts/clrs/index.html" rel="bookmark"><time class="published dt-published" datetime="2021-08-12T12:39:58-07:00" itemprop="datePublished" title="2021-08-12 12:39">2021-08-12 12:39</time></a></p>
</div>
</header>
<div class="e-content entry-content">
<div class="outline-2" id="outline-container-org86f260c">
<h2 id="org86f260c">Chapters</h2>
<div class="outline-text-2" id="text-org86f260c"></div>
<div class="outline-3" id="outline-container-org0e781d9">
<h3 id="org0e781d9">Foundations</h3>
<div class="outline-text-3" id="text-org0e781d9"></div>
<div class="outline-4" id="outline-container-org1913fa2">
<h4 id="org1913fa2">The Role of Algorithms in Computing</h4>
<div class="outline-text-4" id="text-org1913fa2">
<ul class="org-ul">
<li>Algorithms</li>
<li>Algorithms as a technology</li>
</ul>
</div>
</div>
<div class="outline-4" id="outline-container-org6d7b945">
<h4 id="org6d7b945">Getting Started</h4>
<div class="outline-text-4" id="text-org6d7b945">
<ul class="org-ul">
<li>Insertion Sort</li>
<li>Analyzing algorithms</li>
<li>Designing algorithms</li>
</ul>
</div>
</div>
<div class="outline-4" id="outline-container-orgfa2fd91">
<h4 id="orgfa2fd91">Growth of Functions</h4>
<div class="outline-text-4" id="text-orgfa2fd91">
<ul class="org-ul">
<li>Asymptotic notation</li>
<li>Standard notations and common functions</li>
</ul>
</div>
</div>
<div class="outline-4" id="outline-container-org8642aca">
<h4 id="org8642aca">Divide-and-Conquer</h4>
<div class="outline-text-4" id="text-org8642aca">
<ul class="org-ul">
<li>The maximum-subarray problem</li>
<li>Strassen's algorithm for matrix multiplication</li>
<li>The substitution method for solving recurrences</li>
<li>The recursion-tree method for solving recurrences</li>
<li>The master method for solving recurrences</li>
<li>Proof of the master theorem</li>
</ul>
</div>
</div>
<div class="outline-4" id="outline-container-org7aa2006">
<h4 id="org7aa2006">Probabilistic Analysis and Randomization Algorithms</h4>
<div class="outline-text-4" id="text-org7aa2006">
<ul class="org-ul">
<li>The hiring problem</li>
<li>Indicator Random Variables</li>
<li>Randomized Algorithms</li>
<li>Probabilistic analysis and further uses of indicator random variables</li>
</ul>
</div>
</div>
</div>
<div class="outline-3" id="outline-container-org1f15e08">
<h3 id="org1f15e08">Sorting and Order Statistics</h3>
<div class="outline-text-3" id="text-org1f15e08"></div>
<div class="outline-4" id="outline-container-orga9b01af">
<h4 id="orga9b01af">Heapsort</h4>
<div class="outline-text-4" id="text-orga9b01af">
<ul class="org-ul">
<li>Heaps</li>
<li>Maintaining the heap property</li>
<li>Building a heap</li>
<li>The heapsort algorithm</li>
<li>Priority queues</li>
</ul>
</div>
</div>
<div class="outline-4" id="outline-container-org223fea3">
<h4 id="org223fea3">Quicksort</h4>
<div class="outline-text-4" id="text-org223fea3">
<ul class="org-ul">
<li>Description of quicksort</li>
<li>Performance of quicksort</li>
<li>A randomized version of quicksort</li>
<li>Analysis of quicksort</li>
</ul>
</div>
</div>
<div class="outline-4" id="outline-container-org983b9e2">
<h4 id="org983b9e2">Sorting in Linear Time</h4>
<div class="outline-text-4" id="text-org983b9e2">
<ul class="org-ul">
<li>Lower bounds for sorting</li>
<li>Counting sort</li>
<li>Radix sort</li>
<li>Bucket sort</li>
</ul>
</div>
</div>
<div class="outline-4" id="outline-container-orgf3c6991">
<h4 id="orgf3c6991">Medians and Order Statistics</h4>
<div class="outline-text-4" id="text-orgf3c6991">
<ul class="org-ul">
<li>Minimum and maximum</li>
<li>Selection in expected linear time</li>
<li>Selection in worst-case linear time</li>
</ul>
</div>
</div>
</div>
<div class="outline-3" id="outline-container-org797ac1f">
<h3 id="org797ac1f">Data Structures</h3>
<div class="outline-text-3" id="text-org797ac1f"></div>
<div class="outline-4" id="outline-container-org3aa97c5">
<h4 id="org3aa97c5">Elementary Data Structures</h4>
<div class="outline-text-4" id="text-org3aa97c5">
<ul class="org-ul">
<li>Stacks and Queues</li>
<li>Linked Lists</li>
<li>Implementing pointers and objects</li>
<li>Representing rooted trees</li>
</ul>
</div>
</div>
<div class="outline-4" id="outline-container-orgfd81794">
<h4 id="orgfd81794">Hash Tables</h4>
<div class="outline-text-4" id="text-orgfd81794">
<ul class="org-ul">
<li>Direct-address tables</li>
<li>Hash tables</li>
<li>Hash functions</li>
<li>Open addressing</li>
<li>Perfect hashing</li>
</ul>
</div>
</div>
<div class="outline-4" id="outline-container-orge1c3e3f">
<h4 id="orge1c3e3f">Binary Search Trees</h4>
<div class="outline-text-4" id="text-orge1c3e3f">
<ul class="org-ul">
<li>What is a binary search tree?</li>
<li>Querying a binary search tree</li>
<li>Insertion and deletion</li>
<li>Randomly built binary search trees</li>
</ul>
</div>
</div>
<div class="outline-4" id="outline-container-org0cdf9c6">
<h4 id="org0cdf9c6">Red-Black Trees</h4>
<div class="outline-text-4" id="text-org0cdf9c6">
<ul class="org-ul">
<li>Properties of red-black trees</li>
<li>Rotations</li>
<li>Insertion</li>
<li>Deletion</li>
</ul>
</div>
</div>
<div class="outline-4" id="outline-container-org8c5ca5e">
<h4 id="org8c5ca5e">Augmenting Data Structures</h4>
<div class="outline-text-4" id="text-org8c5ca5e">
<ul class="org-ul">
<li>Dynamic order statistics</li>
<li>How to augment a ddata structure</li>
</ul>
</div>
</div>
</div>
<div class="outline-3" id="outline-container-org8245964">
<h3 id="org8245964">Advanced Design and Analysis Techniques</h3>
<div class="outline-text-3" id="text-org8245964"></div>
<div class="outline-4" id="outline-container-org895d54e">
<h4 id="org895d54e">Dynamic Programming</h4>
<div class="outline-text-4" id="text-org895d54e">
<ul class="org-ul">
<li>Rod cutting</li>
<li>Matrix-chain multiplication</li>
<li>Elements of dynamic programming</li>
<li>Longest common subsequence</li>
<li>Optimal binary search trees</li>
</ul>
</div>
</div>
<div class="outline-4" id="outline-container-org228ab3c">
<h4 id="org228ab3c">Greedy Algorithms</h4>
<div class="outline-text-4" id="text-org228ab3c">
<ul class="org-ul">
<li>An activity-selection problem</li>
<li>Elements of the greedy strategy</li>
<li>Huffman codes</li>
<li>Matroids and greedy methods</li>
<li>A task-scheduling problem as a matroid</li>
</ul>
</div>
</div>
<div class="outline-4" id="outline-container-orged09313">
<h4 id="orged09313">Amortized Analysis</h4>
<div class="outline-text-4" id="text-orged09313">
<ul class="org-ul">
<li>Aggregate analysis</li>
<li>The accounting method</li>
<li>The potential method</li>
<li>Dynamic tables</li>
</ul>
</div>
</div>
</div>
<div class="outline-3" id="outline-container-org95ee117">
<h3 id="org95ee117">Advanced Data Structures</h3>
<div class="outline-text-3" id="text-org95ee117"></div>
<div class="outline-4" id="outline-container-orgb660448">
<h4 id="orgb660448">B-Trees</h4>
<div class="outline-text-4" id="text-orgb660448">
<ul class="org-ul">
<li>Definition of B-trees</li>
<li>Basic operations on B-trees</li>
<li>Deleting a key from a B-tree</li>
</ul>
</div>
</div>
<div class="outline-4" id="outline-container-org72244a9">
<h4 id="org72244a9">Fibonacci Heaps</h4>
<div class="outline-text-4" id="text-org72244a9">
<ul class="org-ul">
<li>Structure of Fibonacci heaps</li>
<li>Mergeable-heap operations</li>
<li>Decreasing a key and deleting a node</li>
<li>Bounding the maximum degree</li>
</ul>
</div>
</div>
<div class="outline-4" id="outline-container-orgf46f469">
<h4 id="orgf46f469">van Emde Boas Trees</h4>
<div class="outline-text-4" id="text-orgf46f469">
<ul class="org-ul">
<li>Preliminary approaches</li>
<li>A recursive structure</li>
<li>The van Emde Boas Tree</li>
</ul>
</div>
</div>
<div class="outline-4" id="outline-container-org1f2f397">
<h4 id="org1f2f397">Data Structures for Disjoint Sets</h4>
<div class="outline-text-4" id="text-org1f2f397">
<ul class="org-ul">
<li>Disjoint-set operations</li>
<li>Linked-list representations of disjoint sets</li>
<li>Disjoint-set forests</li>
<li>Analysis of uninon by rank with path compression</li>
</ul>
</div>
</div>
</div>
<div class="outline-3" id="outline-container-org79d3563">
<h3 id="org79d3563">Graph Algorithms</h3>
<div class="outline-text-3" id="text-org79d3563"></div>
<div class="outline-4" id="outline-container-orgd5c2a96">
<h4 id="orgd5c2a96">Elementary Graph Algorithms</h4>
<div class="outline-text-4" id="text-orgd5c2a96">
<ul class="org-ul">
<li>Representations of graphs</li>
<li>Breadth-first search</li>
<li>Depth-first search</li>
<li>Topological sort</li>
<li>Strongly connected components</li>
</ul>
</div>
</div>
<div class="outline-4" id="outline-container-org4f335aa">
<h4 id="org4f335aa">Minimum Spanning Trees</h4>
<div class="outline-text-4" id="text-org4f335aa">
<ul class="org-ul">
<li>Growing a minimum spanning tree</li>
<li>The algorithms of Kruskal and Prim</li>
</ul>
</div>
</div>
<div class="outline-4" id="outline-container-org3f371cd">
<h4 id="org3f371cd">Single-Source Shortest Paths</h4>
<div class="outline-text-4" id="text-org3f371cd">
<ul class="org-ul">
<li>The Bellman-Ford algorithm</li>
<li>Single-source shortest paths in directed acyclic graphs</li>
<li>Dijkstra's algorithm</li>
<li>Difference constraints and shortest paths</li>
<li>Proofs of shortest-paths properties</li>
</ul>
</div>
</div>
<div class="outline-4" id="outline-container-org7710e9a">
<h4 id="org7710e9a">All-Pairs Shortest Paths</h4>
<div class="outline-text-4" id="text-org7710e9a">
<ul class="org-ul">
<li>Shortest paths and matrix multiplication</li>
<li>The Floyd-Warshall algorithm</li>
<li>Johnson's algorithm for sparse graphs</li>
</ul>
</div>
</div>
<div class="outline-4" id="outline-container-org963d779">
<h4 id="org963d779">Maximum Flow</h4>
<div class="outline-text-4" id="text-org963d779">
<ul class="org-ul">
<li>Flow networks</li>
<li>The Ford-Fulkerson method</li>
<li>Maximum bipartite matching</li>
<li>Push-relabel algorithms</li>
<li>The relabel-to-front algorithm</li>
</ul>
</div>
</div>
</div>
<div class="outline-3" id="outline-container-orgb25d4a5">
<h3 id="orgb25d4a5">Selected Topics</h3>
<div class="outline-text-3" id="text-orgb25d4a5"></div>
<div class="outline-4" id="outline-container-orgb59f0b9">
<h4 id="orgb59f0b9">Multithreaded Algorithms</h4>
<div class="outline-text-4" id="text-orgb59f0b9">
<ul class="org-ul">
<li>The basics of dynamic multithreading</li>
<li>Multithreaded matrix multiplication</li>
<li>Multithreaded merge sort</li>
</ul>
</div>
</div>
<div class="outline-4" id="outline-container-org9d872dc">
<h4 id="org9d872dc">Matrix Operations</h4>
<div class="outline-text-4" id="text-org9d872dc">
<ul class="org-ul">
<li>Solving systems of linear equations</li>
<li>Inverting matrices</li>
<li>Symmetric positive-definite matrices and least-squares approximation</li>
</ul>
</div>
</div>
<div class="outline-4" id="outline-container-org870f332">
<h4 id="org870f332">Linear Programming</h4>
<div class="outline-text-4" id="text-org870f332">
<ul class="org-ul">
<li>Standard and slack forms</li>
<li>Formulating problems as linear programs</li>
<li>The simplex algorithm</li>
<li>Duality</li>
<li>The initial basic feasible solution</li>
</ul>
</div>
</div>
<div class="outline-4" id="outline-container-org1407dad">
<h4 id="org1407dad">Polynomials and the FFT</h4>
<div class="outline-text-4" id="text-org1407dad">
<ul class="org-ul">
<li>Representing polynomials</li>
<li>The DFT and FFT</li>
<li>Efficient FFT Implementations</li>
</ul>
</div>
</div>
<div class="outline-4" id="outline-container-org328745f">
<h4 id="org328745f">Number-Theoretic Algorithms</h4>
<div class="outline-text-4" id="text-org328745f">
<ul class="org-ul">
<li>Elementary number-theoretic notions</li>
<li>Greatest common divisor</li>
<li>Modular arithmetic</li>
<li>Solving modular linear equations</li>
<li>The Chinese remainder theorem</li>
<li>Powers of an element</li>
<li>The RSA public-key cryptosystem</li>
<li>Primality testing</li>
<li>Integer factorization</li>
</ul>
</div>
</div>
<div class="outline-4" id="outline-container-org2a1c7e0">
<h4 id="org2a1c7e0">String Matching</h4>
<div class="outline-text-4" id="text-org2a1c7e0">
<ul class="org-ul">
<li>The naive string-matching algorithm</li>
<li>The Rabin-Karp algorithm</li>
<li>String matching with finite automata</li>
<li>The Knuth-Morris-Pratt algorithm</li>
</ul>
</div>
</div>
<div class="outline-4" id="outline-container-orga924f95">
<h4 id="orga924f95">Computational Geometry</h4>
<div class="outline-text-4" id="text-orga924f95">
<ul class="org-ul">
<li>Line-segment properties</li>
<li>Determining whether any pair of segments intersects</li>
<li>Finding the convex hull</li>
<li>Finding the closest pair of points</li>
</ul>
</div>
</div>
<div class="outline-4" id="outline-container-orgbf6c49b">
<h4 id="orgbf6c49b">NP-Completeness</h4>
<div class="outline-text-4" id="text-orgbf6c49b">
<ul class="org-ul">
<li>Polynomial time</li>
<li>Polynomial-time verification</li>
<li>NP-completeness and reducibility</li>
<li>NP-completeness proofs</li>
<li>NP-complete problems</li>
</ul>
</div>
</div>
<div class="outline-4" id="outline-container-orga4d9067">
<h4 id="orga4d9067">Approximation Algorithms</h4>
<div class="outline-text-4" id="text-orga4d9067">
<ul class="org-ul">
<li>The vertex-coverc problem</li>
<li>The traveling-salesman problem</li>
<li>The set-covering problem</li>
<li>Randomization and linear programming</li>
<li>The subset-sum problem</li>
</ul>
</div>
</div>
</div>
<div class="outline-3" id="outline-container-orgb0a6db6">
<h3 id="orgb0a6db6">Appendix: Mathematical Background</h3>
<div class="outline-text-3" id="text-orgb0a6db6"></div>
<div class="outline-4" id="outline-container-org86075ed">
<h4 id="org86075ed">Summations</h4>
<div class="outline-text-4" id="text-org86075ed">
<ul class="org-ul">
<li>Summation formulas and properties</li>
<li>Bounding summations</li>
</ul>
</div>
</div>
<div class="outline-4" id="outline-container-orgf2bf79b">
<h4 id="orgf2bf79b">Sets, Etc.</h4>
<div class="outline-text-4" id="text-orgf2bf79b">
<ul class="org-ul">
<li>Sets</li>
<li>Relations</li>
<li>Functions</li>
<li>Graphs</li>
<li>Trees</li>
</ul>
</div>
</div>
<div class="outline-4" id="outline-container-org6df2b99">
<h4 id="org6df2b99">Counting and Probability</h4>
<div class="outline-text-4" id="text-org6df2b99">
<ul class="org-ul">
<li>Counting</li>
<li>Probability</li>
<li>Discrcete random variables</li>
<li>The geometric and binomial distributions</li>
<li>The tails of the binomial distribution</li>
</ul>
</div>
</div>
<div class="outline-4" id="outline-container-org54317b6">
<h4 id="org54317b6">Matrices</h4>
<div class="outline-text-4" id="text-org54317b6">
<ul class="org-ul">
<li>Matrices and matrix operations</li>
<li>Basic matrix properties</li>
</ul>
</div>
</div>
</div>
</div>
<div class="outline-2" id="outline-container-org9455663">
<h2 id="org9455663">Citation</h2>
<div class="outline-text-2" id="text-org9455663">
<ul class="org-ul">
<li>Cormen TH, editor. Introduction to algorithms. 3rd ed. Cambridge, Mass: MIT Press; 2009. 1292 p.</li>
</ul>
</div>
</div>
</div>
</article>
</div>
<ul class="pager postindexpager clearfix">
<li class="previous"><a href="index-2.html" rel="prev">Newer posts</a></li>
</ul>
<script crossorigin="anonymous" integrity="sha384-3lJUsx1TJHt7BA4udB5KPnDrlkO8T6J6v/op7ui0BbCjvZ9WqV4Xm6DTP6kQ/iBH" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script type="text/x-mathjax-config">

      MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [['$','$'], ['\\(','\\)']],

            displayMath: [['$$','$$'], ['\\[','\\]']],
            processEscapes: true,
            processEnvironments: true,
        }
    });
</script><!--End of body content-->
<footer id="footer">Scribbles by <a href="mailto:cloisteredmonkey.jmark@slmail.me">The Cloistered Monkey</a> © 2024 - Powered by <a href="https://getnikola.com" rel="nofollow">Nikola</a>
<div id="license" xmlns:cc="http://creativecommons.org/ns#" xmlns:dct="http://purl.org/dc/terms/"><span property="dct:title">Ape-Iron</span> is licensed under <a href="http://creativecommons.org/licenses/by-sa/4.0/?ref=chooser-v1" rel="license noopener noreferrer" style="display:inline-block;" target="_blank">CC BY-SA 4.0 <img src="https://mirrors.creativecommons.org/presskit/icons/cc.svg?ref=chooser-v1"><img src="https://mirrors.creativecommons.org/presskit/icons/by.svg?ref=chooser-v1"><img src="https://mirrors.creativecommons.org/presskit/icons/sa.svg?ref=chooser-v1"></a></div>
</footer>
</div>
<script src="assets/js/all-nocdn.js"></script>
<script>

    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element){var i=element.getElementsByTagName('img')[0];return i===undefined?'':i.alt;}});
</script></div>
</body>
</html>
