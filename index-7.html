<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article#
" lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="Striking out for data.">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Bowling For Data (old posts, page 7) | Bowling For Data</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="alternate" type="application/rss+xml" title="RSS" hreflang="en" href="rss.xml">
<link rel="canonical" href="https://necromuralist.github.io/Bowling-For-Data/index-7.html">
<link rel="prev" href="index.html" type="text/html">
<link rel="next" href="index-6.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pseudocode@latest/build/pseudocode.min.css">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-expand-md static-top mb-4
navbar-light
bg-light
"><div class="container">
<!-- This keeps the margins nice -->
        <a class="navbar-brand" href=".">

            <span id="blog-title">Bowling For Data</span>
        </a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="bs-navbar">
            <ul class="navbar-nav mr-auto">
<li class="nav-item">
<a href="pages/" class="nav-link">Pages</a>
                </li>
<li class="nav-item">
<a href="archive.html" class="nav-link">Archive</a>
                </li>
<li class="nav-item">
<a href="categories/" class="nav-link">Tags</a>
                </li>
<li class="nav-item">
<a href="rss.xml" class="nav-link">RSS feed</a>
            </li>
<li class="nav-item dropdown">
<a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Monkey Pages</a>
            <div class="dropdown-menu">
                    <a href="https://necromuralist.github.io/" class="dropdown-item">The Cloistered Monkey</a>
                    <a href="https://necromuralist.github.io/Ape-Iron/" class="dropdown-item">Ape Iron</a>
                    <a href="https://necromuralist.github.io/Beach-Pig-Thigh/" class="dropdown-item">Beach-Pig Rump &amp; Thigh</a>
                    <a href="https://necromuralist.github.io/Neurotic-Networking/" class="dropdown-item">Neurotic Networking</a>
                    <a href="https://necromuralist.github.io/Visions-Voices-Data/" class="dropdown-item">Visions, Voices, Data</a>
            </div>

                
            </li>
</ul>
<!-- DuckDuckGo custom search --><form method="get" id="search" action="https://duckduckgo.com/" class="navbar-form pull-left">
 <input type="hidden" name="sites" value="https://necromuralist.github.io/Bowling-For-Data/"><input type="hidden" name="k8" value="#444444"><input type="hidden" name="k9" value="#D51920"><input type="hidden" name="kt" value="h"><input type="text" name="q" maxlength="255" placeholder="Search…" class="span2" style="margin-top: 4px;"><input type="submit" value="DuckDuckGo Search" style="visibility: hidden;">
</form>
 <!-- End of custom search -->
 

            <ul class="navbar-nav navbar-right"></ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        
        
        

    


    
<div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/latpaps/index.html" class="u-url">Learning Algorithms Through Programming and Problem Solving</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                The Cloistered Monkey
            </span></p>
            <p class="dateline">
            <a href="posts/latpaps/index.html" rel="bookmark">
            <time class="published dt-published" datetime="2022-06-16T15:19:29-07:00" itemprop="datePublished" title="2022-06-16 15:19">2022-06-16 15:19</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <div id="outline-container-org2cffaed" class="outline-2">
<h2 id="org2cffaed">Table Of Contents (Partial)</h2>
<div class="outline-text-2" id="text-org2cffaed">
</div>
<div id="outline-container-org5dc7261" class="outline-3">
<h3 id="org5dc7261">Algorithms and Complexity</h3>
<div class="outline-text-3" id="text-org5dc7261">
<ul class="org-ul">
<li>What is an Algorithm?</li>
<li>Pseudocode</li>
<li>Problem Versus Problem Instance</li>
<li>Correct Versus Incorrect Algorithms</li>
<li>Fast Versus Slow Algorithms</li>
<li>Big-O Notation</li>
</ul>
</div>
</div>
<div id="outline-container-org4835268" class="outline-3">
<h3 id="org4835268">Algorithm Design Techniques</h3>
<div class="outline-text-3" id="text-org4835268">
<ul class="org-ul">
<li>Exhaustive Search Algorithms</li>
<li>Branch-and-Bound Algorithms</li>
<li>Greedy Algorithms</li>
<li>Dynamic Programming Algorithms</li>
<li>Recursive Algorithms</li>
<li>Divide-and-Conquer Algorithms</li>
<li>Randomized Algorithms</li>
</ul>
</div>
</div>
<div id="outline-container-org57f7628" class="outline-3">
<h3 id="org57f7628">Programming Challenges</h3>
<div class="outline-text-3" id="text-org57f7628">
<ul class="org-ul">
<li>Sum of Two Digits</li>
<li>Maximum Pairwise Product
<ul class="org-ul">
<li>Naive Algorithm</li>
<li>Fast Algorithm</li>
<li>Testing and Debugging</li>
<li>Can You Tell Me What Error I Have Made?</li>
<li>Stress Testing</li>
<li>Even Faster Algorithm</li>
<li>A More Compact Algorithm</li>
</ul>
</li>
<li>Solving a Programming Challenge in Five Easy Steps
<ul class="org-ul">
<li>Reading the Problem Statement</li>
<li>Designing an Algorithm</li>
<li>Implementing an Algorithm</li>
<li>Testing and Debugging</li>
<li>Submitting the Grading System</li>
</ul>
</li>
<li>Good Programming Practices</li>
</ul>
</div>
</div>
<div id="outline-container-org72799d4" class="outline-3">
<h3 id="org72799d4">Algorithmic Warm Up</h3>
<div class="outline-text-3" id="text-org72799d4">
<ul class="org-ul">
<li>Fibonacci Numbers</li>
<li>Last Digit of a Fibonacci Number</li>
<li>Greatest Common Divisor</li>
<li>Least Common Multiple</li>
<li>Fibonacci Numbers Again</li>
<li>Last Digit of the Sum of Fibonacci Numbers</li>
<li>Last Digit of the Sum of Fibonacci Numbers Again</li>
</ul>
</div>
</div>
<div id="outline-container-orga18213a" class="outline-3">
<h3 id="orga18213a">Greedy Algorithms</h3>
<div class="outline-text-3" id="text-orga18213a">
<ul class="org-ul">
<li>Money Change</li>
<li>Maximum Value of the Loot</li>
<li>Maximum Advertisement Revenue</li>
<li>Collecting Signatures</li>
<li>Maximum Number of Prizes</li>
<li>Maximum Salary</li>
</ul>
</div>
</div>
<div id="outline-container-org1f3dcb6" class="outline-3">
<h3 id="org1f3dcb6">Divide and Conquer</h3>
<div class="outline-text-3" id="text-org1f3dcb6">
<ul class="org-ul">
<li>Binary Search</li>
<li>Majority Element</li>
<li>Improving QuickSort</li>
<li>Number of Inversions</li>
<li>Organizing a Lottery</li>
<li>Closest Points</li>
</ul>
</div>
</div>
<div id="outline-container-org008b971" class="outline-3">
<h3 id="org008b971">Dynamic Programming</h3>
<div class="outline-text-3" id="text-org008b971">
<ul class="org-ul">
<li>Money Change Again</li>
<li>Primitive Calculator</li>
<li>Edit Distance</li>
<li>Longest Common Subsequence of Two Sequences</li>
<li>Longest Common Subsequence of Three Sequences</li>
<li>Maximum Amount of Gold</li>
<li>Partitioning Souvenirs</li>
<li>Maximum Value of an Arithmetic Expression</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org6a9b0eb" class="outline-2">
<h2 id="org6a9b0eb">Citation</h2>
<div class="outline-text-2" id="text-org6a9b0eb">
<ul class="org-ul">
<li>Kulikov A. Learning algorithms through programming and puzzle solving. La Jolla, CA: Active Learning Technologies; 2018.</li>
</ul>
</div>
</div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/the-coin-changing-problem/index.html" class="u-url">The Coin Changing Problem</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                The Cloistered Monkey
            </span></p>
            <p class="dateline">
            <a href="posts/the-coin-changing-problem/index.html" rel="bookmark">
            <time class="published dt-published" datetime="2022-06-16T15:11:33-07:00" itemprop="datePublished" title="2022-06-16 15:11">2022-06-16 15:11</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="posts/the-coin-changing-problem/index.html#orgdf72830">The Change Problem</a></li>
<li>
<a href="posts/the-coin-changing-problem/index.html#orgd71690c">SetUp</a>
<ul>
<li><a href="posts/the-coin-changing-problem/index.html#orgd222ae5">Imports</a></li>
<li><a href="posts/the-coin-changing-problem/index.html#orgcd66f91">Setup</a></li>
</ul>
</li>
<li>
<a href="posts/the-coin-changing-problem/index.html#org1019a55">The Cashier's Algorithm</a>
<ul>
<li><a href="posts/the-coin-changing-problem/index.html#orgadb3dc4">Pseudocode</a></li>
<li>
<a href="posts/the-coin-changing-problem/index.html#orgc9495ff">Python Implementation</a>
<ul>
<li><a href="posts/the-coin-changing-problem/index.html#org228e5b0">A First Test</a></li>
<li><a href="posts/the-coin-changing-problem/index.html#orge3342e8">U.S. Denominations</a></li>
</ul>
</li>
<li>
<a href="posts/the-coin-changing-problem/index.html#orgf88f6b6">Plotting the Coin Counts/Loops</a>
<ul>
<li><a href="posts/the-coin-changing-problem/index.html#org0f76c92">The Double-Dime</a></li>
</ul>
</li>
</ul>
</li>
<li>
<a href="posts/the-coin-changing-problem/index.html#org96ba792">A Greedy Version</a>
<ul>
<li><a href="posts/the-coin-changing-problem/index.html#orgf9ba6ed">In Pseudocode</a></li>
<li><a href="posts/the-coin-changing-problem/index.html#org3092916">In Python</a></li>
<li>
<a href="posts/the-coin-changing-problem/index.html#orgc1422f8">Testing It Out</a>
<ul>
<li><a href="posts/the-coin-changing-problem/index.html#orgda89eef">A First Test</a></li>
<li><a href="posts/the-coin-changing-problem/index.html#orgb1f9ef9">U.S. Denominations</a></li>
<li><a href="posts/the-coin-changing-problem/index.html#org52d8e81">The Double-Dime</a></li>
</ul>
</li>
<li><a href="posts/the-coin-changing-problem/index.html#orgf8a04a1">Plotting</a></li>
</ul>
</li>
<li>
<a href="posts/the-coin-changing-problem/index.html#org30e5885">A Brute Force Changer</a>
<ul>
<li><a href="posts/the-coin-changing-problem/index.html#org3d41db1">Plotting</a></li>
</ul>
</li>
<li>
<a href="posts/the-coin-changing-problem/index.html#orgbc3485d">Memoized Changer</a>
<ul>
<li><a href="posts/the-coin-changing-problem/index.html#orgf9a2462">Checking the Memoized Changer</a></li>
<li>
<a href="posts/the-coin-changing-problem/index.html#org1a69abe">Plotting</a>
<ul>
<li><a href="posts/the-coin-changing-problem/index.html#org3ffcb3d">All the Methods So Far</a></li>
<li><a href="posts/the-coin-changing-problem/index.html#org25b5fac">Obsolete Coins</a></li>
</ul>
</li>
</ul>
</li>
<li>
<a href="posts/the-coin-changing-problem/index.html#org19cd147">Iterative Dynamic Programming</a>
<ul>
<li><a href="posts/the-coin-changing-problem/index.html#org324956a">Plotting</a></li>
</ul>
</li>
<li><a href="posts/the-coin-changing-problem/index.html#org4eabbd7">Sources</a></li>
</ul>
</div>
</div>
<div id="outline-container-orgdf72830" class="outline-2">
<h2 id="orgdf72830">The Change Problem</h2>
<div class="outline-text-2" id="text-orgdf72830">
<p>
The <i>Change Problem (Coin Changing Problem)</i> asks us to convert some amount of money into denominations using the fewest coins.
</p>

<p>
<b><b>Input:</b></b> An integer (<i>money</i>) and an array of <i>d</i> denominations (\(c = c_1, c_2, \ldots, c_d\)) in decreasing order of value (\(c_1 &gt; c_2&gt; \cdots &gt; c_d\)).
</p>

<p>
<b><b>Output:</b></b> A list of <i>d</i> integers \(i_1, i_2, \ldots, i_d\) such that \(c_1 \cdot i_1 + c_2 \cdot i_2 + \cdots + c_d \cdot i_d = money\)  and \(i_1 + i_2 + \cdots + i_d\) is as small as possible.
</p>
</div>
</div>
<div id="outline-container-orgd71690c" class="outline-2">
<h2 id="orgd71690c">SetUp</h2>
<div class="outline-text-2" id="text-orgd71690c">
</div>
<div id="outline-container-orgd222ae5" class="outline-3">
<h3 id="orgd222ae5">Imports</h3>
<div class="outline-text-3" id="text-orgd222ae5">
<div class="highlight"><pre><span></span><span class="c1"># python</span>
<span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">namedtuple</span>
<span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">partial</span>

<span class="c1"># pypi</span>
<span class="kn">from</span> <span class="nn">expects</span> <span class="kn">import</span> <span class="n">contain_exactly</span><span class="p">,</span> <span class="n">expect</span><span class="p">,</span> <span class="n">equal</span>

<span class="kn">import</span> <span class="nn">altair</span>
<span class="kn">import</span> <span class="nn">pandas</span>

<span class="c1"># my stuff</span>
<span class="kn">from</span> <span class="nn">graeae.visualization.altair_helpers</span> <span class="kn">import</span> <span class="n">output_path</span><span class="p">,</span> <span class="n">save_chart</span>
</pre></div>
</div>
</div>

<div id="outline-container-orgcd66f91" class="outline-3">
<h3 id="orgcd66f91">Setup</h3>
<div class="outline-text-3" id="text-orgcd66f91">
<div class="highlight"><pre><span></span><span class="n">ChangeCounts</span> <span class="o">=</span> <span class="n">namedtuple</span><span class="p">(</span><span class="s2">"ChangeCounts"</span><span class="p">,</span> <span class="p">[</span><span class="s2">"coin_counts"</span><span class="p">,</span> <span class="s2">"run_count"</span><span class="p">])</span>
<span class="n">ChangeCountsTable</span> <span class="o">=</span> <span class="n">namedtuple</span><span class="p">(</span><span class="s2">"ChangeCounts"</span><span class="p">,</span> <span class="p">[</span><span class="s2">"coin_counts"</span><span class="p">,</span> <span class="s2">"run_count"</span><span class="p">,</span> <span class="s2">"table"</span><span class="p">])</span>

<span class="n">SLUG</span> <span class="o">=</span> <span class="s2">"the-coin-changing-problem"</span>
<span class="n">OUTPUT_PATH</span> <span class="o">=</span> <span class="n">output_path</span><span class="p">(</span><span class="n">SLUG</span><span class="p">)</span>
<span class="n">save_it</span> <span class="o">=</span> <span class="n">partial</span><span class="p">(</span><span class="n">save_chart</span><span class="p">,</span> <span class="n">output_path</span><span class="o">=</span><span class="n">OUTPUT_PATH</span><span class="p">)</span>

<span class="n">PlotParameters</span> <span class="o">=</span> <span class="n">namedtuple</span><span class="p">(</span><span class="s2">"PlotParameters"</span><span class="p">,</span> <span class="p">[</span><span class="s2">"height"</span><span class="p">,</span> <span class="s2">"width"</span><span class="p">],</span>
			    <span class="n">defaults</span><span class="o">=</span><span class="p">[</span><span class="mi">525</span><span class="p">,</span> <span class="mi">750</span><span class="p">])()</span>

<span class="n">Denominations</span> <span class="o">=</span> <span class="n">namedtuple</span><span class="p">(</span><span class="s2">"Denominations"</span><span class="p">,</span> <span class="s2">"US double_dime obsolete"</span><span class="p">,</span>
			   <span class="n">defaults</span><span class="o">=</span><span class="p">[[</span><span class="mi">25</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
				    <span class="p">[</span><span class="mi">25</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
				    <span class="p">[</span><span class="mi">25</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">]])()</span>
</pre></div>
</div>
</div>
</div>
<div id="outline-container-org1019a55" class="outline-2">
<h2 id="org1019a55">The Cashier's Algorithm</h2>
<div class="outline-text-2" id="text-org1019a55">
<p>
The way many cashier's make change for customers is using a greedy approach.
</p>
</div>

<div id="outline-container-orgadb3dc4" class="outline-3">
<h3 id="orgadb3dc4">Pseudocode</h3>
<div class="outline-text-3" id="text-orgadb3dc4">
<pre id="cashiers-algorithm" style="display:hidden;">
\begin{algorithm}
\caption{CashiersChange}
\begin{algorithmic}
\INPUT Amount owed ($money$) and a supply of coins ($c$).
\PROCEDURE{CashiersChange}{$money, c$}
\WHILE {\(money &gt; 0\)}
  \STATE \(coin \gets\) Coin with the largest denomination that doesn't exceed \(money\).
  \STATE Give $coin$ to the customer.
  \STATE \(money \gets money - coin\)
\ENDWHILE
\ENDPROCEDURE
\end{algorithmic}
\end{algorithm}
</pre>
</div>
</div>

<div id="outline-container-orgc9495ff" class="outline-3">
<h3 id="orgc9495ff">Python Implementation</h3>
<div class="outline-text-3" id="text-orgc9495ff">
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">cashier_changer</span><span class="p">(</span><span class="n">amount</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">denominations</span><span class="p">:</span> <span class="nb">list</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ChangeCounts</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""Implements the cashier's method for making change</span>

<span class="sd">    Args:</span>
<span class="sd">     amount: the value of the change needed</span>
<span class="sd">     denominations: values for coins (in descending order)</span>

<span class="sd">    Returns:</span>
<span class="sd">     list of coin-counts, number of loops ran</span>
<span class="sd">    """</span>
    <span class="n">coins</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">denominations</span><span class="p">)</span>
    <span class="n">remainder</span> <span class="o">=</span> <span class="n">amount</span>
    <span class="n">loop_count</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">denomination</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">denominations</span><span class="p">):</span>
	<span class="n">coin_count</span> <span class="o">=</span> <span class="mi">0</span>
	<span class="k">while</span> <span class="n">denomination</span> <span class="o">&lt;=</span> <span class="n">remainder</span><span class="p">:</span>
	    <span class="n">coin_count</span> <span class="o">+=</span> <span class="mi">1</span>
	    <span class="n">loop_count</span> <span class="o">+=</span> <span class="mi">1</span>
	    <span class="n">remainder</span> <span class="o">=</span> <span class="n">remainder</span> <span class="o">-</span> <span class="n">denomination</span>

	<span class="n">coins</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">=</span> <span class="n">coin_count</span>
    <span class="k">return</span> <span class="n">ChangeCounts</span><span class="p">(</span><span class="n">coin_counts</span><span class="o">=</span><span class="n">coins</span><span class="p">,</span> <span class="n">run_count</span><span class="o">=</span><span class="n">loop_count</span><span class="p">)</span>
</pre></div>
</div>

<div id="outline-container-org228e5b0" class="outline-4">
<h4 id="org228e5b0">A First Test</h4>
<div class="outline-text-4" id="text-org228e5b0">
<p>
Examples from <a href="posts/latpaps/">LATPAPS</a>.
</p>

<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">check_coins</span><span class="p">(</span><span class="n">answer</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span> <span class="n">denominations</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span>
		<span class="n">expected_coins</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
		<span class="n">expected_total</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""Check that our answer matches the expected</span>

<span class="sd">    Args:</span>
<span class="sd">     answer: list of counts for each denomination</span>
<span class="sd">     denominations: list of coin denominations available</span>
<span class="sd">     expected_coins: the expected list of counts for each denomination</span>
<span class="sd">     expected_total: what the value our coins should add up to</span>

<span class="sd">    Raises:</span>
<span class="sd">     AssertionError: something about our answer doesn't match the expected</span>
<span class="sd">    """</span>
    <span class="n">expect</span><span class="p">(</span><span class="nb">sum</span><span class="p">(</span><span class="n">answer</span><span class="p">))</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">equal</span><span class="p">(</span><span class="nb">sum</span><span class="p">(</span><span class="n">expected_coins</span><span class="p">)))</span>
    <span class="n">expect</span><span class="p">(</span><span class="n">answer</span><span class="p">)</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">contain_exactly</span><span class="p">(</span><span class="o">*</span><span class="n">expected_coins</span><span class="p">))</span>
    <span class="n">expect</span><span class="p">(</span><span class="nb">sum</span><span class="p">(</span><span class="n">count</span> <span class="o">*</span> <span class="n">coin</span> <span class="k">for</span> <span class="n">count</span><span class="p">,</span> <span class="n">coin</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">answer</span><span class="p">,</span> <span class="n">denominations</span><span class="p">)))</span><span class="o">.</span><span class="n">to</span><span class="p">(</span>
	<span class="n">equal</span><span class="p">(</span><span class="n">expected_total</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="k">return</span>
</pre></div>

<div class="highlight"><pre><span></span><span class="c1"># case 1</span>
<span class="n">money</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">coins</span> <span class="o">=</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
<span class="n">actual</span> <span class="o">=</span> <span class="n">cashier_changer</span><span class="p">(</span><span class="n">money</span><span class="p">,</span> <span class="n">coins</span><span class="p">)</span>
<span class="n">check_coins</span><span class="p">(</span><span class="n">actual</span><span class="o">.</span><span class="n">coin_counts</span><span class="p">,</span> <span class="n">coins</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="n">money</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"case 1: </span><span class="si">{</span><span class="n">actual</span><span class="o">.</span><span class="n">run_count</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>

<span class="c1"># case 2</span>
<span class="n">money</span> <span class="o">=</span> <span class="mi">28</span>
<span class="n">actual</span> <span class="o">=</span> <span class="n">cashier_changer</span><span class="p">(</span><span class="n">money</span><span class="p">,</span> <span class="n">coins</span><span class="p">)</span>
<span class="n">check_coins</span><span class="p">(</span><span class="n">actual</span><span class="o">.</span><span class="n">coin_counts</span><span class="p">,</span> <span class="n">coins</span><span class="p">,</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="n">money</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"case 2: </span><span class="si">{</span><span class="n">actual</span><span class="o">.</span><span class="n">run_count</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>

<span class="c1"># case 3</span>
<span class="n">money</span> <span class="o">=</span> <span class="mi">99</span>
<span class="n">actual</span> <span class="o">=</span> <span class="n">cashier_changer</span><span class="p">(</span><span class="n">money</span><span class="p">,</span> <span class="n">coins</span><span class="p">)</span>
<span class="n">check_coins</span><span class="p">(</span><span class="n">actual</span><span class="o">.</span><span class="n">coin_counts</span><span class="p">,</span> <span class="n">coins</span><span class="p">,</span> <span class="p">[</span><span class="mi">9</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="n">money</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"case 2: </span><span class="si">{</span><span class="n">actual</span><span class="o">.</span><span class="n">run_count</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
</pre></div>

<pre class="example">
case 1: 2
case 2: 6
case 2: 14
</pre>


<p>
The number of loops is dependent on the change owed, with an upper limit based on the denominations. In this case if we assume you wouldn't give out more than 99 cents in change then we would cap out at \( 9 \times 10 + 1 \times 5 + 4 \times 1\) = 14 coins/loops.
</p>
</div>
</div>

<div id="outline-container-orge3342e8" class="outline-4">
<h4 id="orge3342e8">U.S. Denominations</h4>
<div class="outline-text-4" id="text-orge3342e8">
<p>
This is a quick check using the U.S. coins most commonly used by cashiers. By adding a 25 cent piece we reduce the upper limit on the amount of coins needed to \(3 \times 25 + 2 \times 10 + 4 \times 1\) = 9 coins.
</p>

<div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">Denominations</span><span class="o">.</span><span class="n">US</span><span class="p">)</span>
</pre></div>

<pre class="example">
[25, 10, 5, 1]
</pre>


<div class="highlight"><pre><span></span><span class="n">money</span> <span class="o">=</span> <span class="mi">28</span>
<span class="n">actual</span> <span class="o">=</span> <span class="n">cashier_changer</span><span class="p">(</span><span class="n">money</span><span class="p">,</span> <span class="n">Denominations</span><span class="o">.</span><span class="n">US</span><span class="p">)</span>
<span class="n">check_coins</span><span class="p">(</span><span class="n">actual</span><span class="o">.</span><span class="n">coin_counts</span><span class="p">,</span> <span class="n">Denominations</span><span class="o">.</span><span class="n">US</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="n">money</span><span class="p">)</span>

<span class="n">money</span> <span class="o">=</span> <span class="mi">14</span>
<span class="n">actual</span> <span class="o">=</span> <span class="n">cashier_changer</span><span class="p">(</span><span class="n">money</span><span class="p">,</span> <span class="n">Denominations</span><span class="o">.</span><span class="n">US</span><span class="p">)</span>
<span class="n">check_coins</span><span class="p">(</span><span class="n">actual</span><span class="o">.</span><span class="n">coin_counts</span><span class="p">,</span> <span class="n">Denominations</span><span class="o">.</span><span class="n">US</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="n">money</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>

<div id="outline-container-orgf88f6b6" class="outline-3">
<h3 id="orgf88f6b6">Plotting the Coin Counts/Loops</h3>
<div class="outline-text-3" id="text-orgf88f6b6">
<div class="highlight"><pre><span></span><span class="n">PLOT_AMOUNTS</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">100</span><span class="p">))</span>
<span class="n">CASHIER_COUNTS</span> <span class="o">=</span> <span class="p">[</span><span class="n">cashier_changer</span><span class="p">(</span><span class="n">amount</span><span class="p">,</span> <span class="n">Denominations</span><span class="o">.</span><span class="n">US</span><span class="p">)</span><span class="o">.</span><span class="n">run_count</span>
		  <span class="k">for</span> <span class="n">amount</span> <span class="ow">in</span> <span class="n">PLOT_AMOUNTS</span><span class="p">]</span>

<span class="n">PLOT_FRAME</span> <span class="o">=</span> <span class="n">pandas</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">"Amount to Change"</span><span class="p">:</span> <span class="n">PLOT_AMOUNTS</span><span class="p">,</span>
			       <span class="s2">"Coins"</span><span class="p">:</span> <span class="n">CASHIER_COUNTS</span><span class="p">})</span>

<span class="n">chart</span> <span class="o">=</span> <span class="n">altair</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">PLOT_FRAME</span><span class="p">)</span><span class="o">.</span><span class="n">mark_bar</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">x</span><span class="o">=</span><span class="n">altair</span><span class="o">.</span><span class="n">X</span><span class="p">(</span><span class="s2">"Amount to Change"</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="n">altair</span><span class="o">.</span><span class="n">Axis</span><span class="p">(</span><span class="n">tickMinStep</span><span class="o">=</span><span class="mi">1</span><span class="p">)),</span>
    <span class="n">y</span><span class="o">=</span><span class="n">altair</span><span class="o">.</span><span class="n">Y</span><span class="p">(</span><span class="s2">"Coins"</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="n">altair</span><span class="o">.</span><span class="n">Axis</span><span class="p">(</span><span class="n">tickMinStep</span><span class="o">=</span><span class="mi">1</span><span class="p">)),</span>
    <span class="n">tooltip</span><span class="o">=</span><span class="p">[</span><span class="s2">"Amount to Change"</span><span class="p">,</span> <span class="s2">"Coins"</span><span class="p">])</span><span class="o">.</span><span class="n">properties</span><span class="p">(</span>
	<span class="n">title</span><span class="o">=</span><span class="s2">"Cashier's Change Coin Counts (Common U.S. Coins)"</span><span class="p">,</span>
	<span class="n">width</span><span class="o">=</span><span class="n">PlotParameters</span><span class="o">.</span><span class="n">width</span><span class="p">,</span>
	<span class="n">height</span><span class="o">=</span><span class="n">PlotParameters</span><span class="o">.</span><span class="n">height</span><span class="p">,</span>
    <span class="p">)</span>

<span class="n">save_it</span><span class="p">(</span><span class="n">chart</span><span class="p">,</span> <span class="s2">"cashiers-change-us-coins"</span><span class="p">)</span>
</pre></div>

<object type="text/html" data="posts/the-coin-changing-problem/cashiers-change-us-coins.html" style="width:100%" height="600">
  <p>Figure Missing</p>
</object>
</div>

<div id="outline-container-org0f76c92" class="outline-4">
<h4 id="org0f76c92">The Double-Dime</h4>
<div class="outline-text-4" id="text-org0f76c92">
<p>
Our cashier algorithm turns out to work for the specific set of coins that cashiers commonly use, but will it work for other coins as well?
</p>

<p>
According to Wikipedia, there was at one time a proposal in the United States for a <a href="https://en.wikipedia.org/wiki/Twenty-cent_piece_(United_States_coin)">twenty-cent piece</a> (and at one time there were <a href="https://en.wikipedia.org/wiki/Obsolete_denominations_of_United_States_currency#Coinage">half-cent, two-cent, and three-cent coins</a>).If we include the twenty cent piece amongst our denominations, we find that there are cases where the cashier algorithm will miss the optimal solution.
</p>

<div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">Denominations</span><span class="o">.</span><span class="n">double_dime</span><span class="p">)</span>
</pre></div>

<pre class="example">
[25, 20, 10, 5, 1]
</pre>


<div class="highlight"><pre><span></span><span class="n">money</span> <span class="o">=</span> <span class="mi">40</span>
<span class="n">actual</span> <span class="o">=</span> <span class="n">cashier_changer</span><span class="p">(</span><span class="n">money</span><span class="p">,</span> <span class="n">Denominations</span><span class="o">.</span><span class="n">double_dime</span><span class="p">)</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">check_coins</span><span class="p">(</span><span class="n">actual</span><span class="o">.</span><span class="n">coin_counts</span><span class="p">,</span> <span class="n">Denominations</span><span class="o">.</span><span class="n">double_dime</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">money</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">AssertionError</span> <span class="k">as</span> <span class="n">error</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"AssertionError: </span><span class="si">{</span><span class="n">error</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
</pre></div>

<pre class="example">
AssertionError: 
expected: 3 to equal 2
</pre>


<p>
Because the cashier algorithm always takes the largest possible coins first, it ends up using 25¢ + 10¢ + 5¢ as the solution instead of the optimal 20¢ + 20¢. While it might seem artificial, given the characterization of this as a solution to making change, it's important to note that generalizing the cashier algorithm beyond the curated denominations or even beyond coins specifically leaves it vulnerable to cases where it will fail.
</p>
</div>
</div>
</div>
</div>

<div id="outline-container-org96ba792" class="outline-2">
<h2 id="org96ba792">A Greedy Version</h2>
<div class="outline-text-2" id="text-org96ba792">
<p>
As noted, the Cashier's Algorithm is a greedy algorithm, but let's translate it into a silghtly smarter version which uses a little arithmetic to get to the same point.
</p>
</div>

<div id="outline-container-orgf9ba6ed" class="outline-3">
<h3 id="orgf9ba6ed">In Pseudocode</h3>
<div class="outline-text-3" id="text-orgf9ba6ed">
<pre id="greedy-algorithm" style="display:hidden;">
\begin{algorithm}
\caption{GreedyChange}
\begin{algorithmic}
\INPUT An integer ($money$) and an array of $d$ denominations (\(c = c_1, c_2, \ldots, c_d\)) in decreasing order of value (\(c_1 &gt; c_2&gt; \cdots &gt; c_d\)).
\OUTPUT A list of $d$ integers \(i_1, i_2, \ldots, i_d\) such that \(c_1 \cdot i_1 + c_2 \cdot i_2 + \cdots + c_d \cdot i_d = money\)  and \(i_1 + i_2 + \cdots + i_d\) is as small as possible.
\PROCEDURE{CashiersChange}{$money, c$}
\STATE $remainder \gets money$
\STATE $d \gets $ \textsc{Length}($c$)
\FOR {$k \in \{1 \ldots d\}$}
  \STATE $i_k \gets \lfloor \frac{remainder}{c_k} \rfloor$
  \STATE $remainder \gets remainder - c_k \cdot i_k$
\ENDFOR
\RETURN $(i_1, i_2, \ldots, i_d)$
\ENDPROCEDURE
\end{algorithmic}
\end{algorithm}
</pre>
</div>
</div>
<div id="outline-container-org3092916" class="outline-3">
<h3 id="org3092916">In Python</h3>
<div class="outline-text-3" id="text-org3092916">
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">greedy_changer</span><span class="p">(</span><span class="n">money</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">denominations</span><span class="p">:</span> <span class="nb">list</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ChangeCounts</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""Make change using the fewest coins</span>

<span class="sd">    Args:</span>
<span class="sd">     money: the amount to change</span>
<span class="sd">     denominations: list of coin denominations in decreasing order</span>

<span class="sd">    Returns:</span>
<span class="sd">     Number of each denomination needed to make the change, loop-count</span>
<span class="sd">    """</span>
    <span class="n">coins</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">denominations</span><span class="p">)</span>
    <span class="n">remainder</span> <span class="o">=</span> <span class="n">money</span>
    <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">location</span><span class="p">,</span> <span class="n">denomination</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">denominations</span><span class="p">):</span>
	<span class="n">coins</span><span class="p">[</span><span class="n">location</span><span class="p">]</span> <span class="o">=</span> <span class="n">remainder</span> <span class="o">//</span> <span class="n">denomination</span>
	<span class="n">remainder</span> <span class="o">=</span> <span class="n">remainder</span> <span class="o">-</span> <span class="n">denomination</span> <span class="o">*</span> <span class="n">coins</span><span class="p">[</span><span class="n">location</span><span class="p">]</span>
	<span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">return</span> <span class="n">ChangeCounts</span><span class="p">(</span><span class="n">coins</span><span class="p">,</span> <span class="n">count</span><span class="p">)</span>
</pre></div>
</div>
</div>

<div id="outline-container-orgc1422f8" class="outline-3">
<h3 id="orgc1422f8">Testing It Out</h3>
<div class="outline-text-3" id="text-orgc1422f8">
</div>
<div id="outline-container-orgda89eef" class="outline-4">
<h4 id="orgda89eef">A First Test</h4>
<div class="outline-text-4" id="text-orgda89eef">
<div class="highlight"><pre><span></span><span class="c1"># case 1</span>
<span class="n">money</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">coins</span> <span class="o">=</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
<span class="n">actual</span> <span class="o">=</span> <span class="n">greedy_changer</span><span class="p">(</span><span class="n">money</span><span class="p">,</span> <span class="n">coins</span><span class="p">)</span>
<span class="n">check_coins</span><span class="p">(</span><span class="n">actual</span><span class="o">.</span><span class="n">coin_counts</span><span class="p">,</span> <span class="n">coins</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="n">money</span><span class="p">)</span>

<span class="c1"># case 2</span>
<span class="n">money</span> <span class="o">=</span> <span class="mi">28</span>
<span class="n">actual</span> <span class="o">=</span> <span class="n">greedy_changer</span><span class="p">(</span><span class="n">money</span><span class="p">,</span> <span class="n">coins</span><span class="p">)</span>
<span class="n">check_coins</span><span class="p">(</span><span class="n">actual</span><span class="o">.</span><span class="n">coin_counts</span><span class="p">,</span> <span class="n">coins</span><span class="p">,</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="n">money</span><span class="p">)</span>
</pre></div>
</div>
</div>

<div id="outline-container-orgb1f9ef9" class="outline-4">
<h4 id="orgb1f9ef9">U.S. Denominations</h4>
<div class="outline-text-4" id="text-orgb1f9ef9">
<div class="highlight"><pre><span></span><span class="n">money</span> <span class="o">=</span> <span class="mi">28</span>
<span class="n">actual</span> <span class="o">=</span> <span class="n">greedy_changer</span><span class="p">(</span><span class="n">money</span><span class="p">,</span> <span class="n">Denominations</span><span class="o">.</span><span class="n">US</span><span class="p">)</span>
<span class="n">check_coins</span><span class="p">(</span><span class="n">actual</span><span class="o">.</span><span class="n">coin_counts</span><span class="p">,</span> <span class="n">Denominations</span><span class="o">.</span><span class="n">US</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="n">money</span><span class="p">)</span>

<span class="n">money</span> <span class="o">=</span> <span class="mi">14</span>
<span class="n">actual</span> <span class="o">=</span> <span class="n">greedy_changer</span><span class="p">(</span><span class="n">money</span><span class="p">,</span> <span class="n">Denominations</span><span class="o">.</span><span class="n">US</span><span class="p">)</span>
<span class="n">check_coins</span><span class="p">(</span><span class="n">actual</span><span class="o">.</span><span class="n">coin_counts</span><span class="p">,</span> <span class="n">Denominations</span><span class="o">.</span><span class="n">US</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="n">money</span><span class="p">)</span>
</pre></div>
</div>
</div>

<div id="outline-container-org52d8e81" class="outline-4">
<h4 id="org52d8e81">The Double-Dime</h4>
<div class="outline-text-4" id="text-org52d8e81">
<p>
Looking at the greedy-algorithm you can see that it only has one loop that traverses the denominations of coins - so it is a very quick algorithm, but while our greedy algorithm turns out to work for the specific set of coins that cashiers use, it also falls prey to sometimes missing the optimal solution.
</p>

<div class="highlight"><pre><span></span><span class="n">money</span> <span class="o">=</span> <span class="mi">40</span>
<span class="n">actual</span> <span class="o">=</span> <span class="n">greedy_changer</span><span class="p">(</span><span class="n">money</span><span class="p">,</span> <span class="n">Denominations</span><span class="o">.</span><span class="n">double_dime</span><span class="p">)</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">check_coins</span><span class="p">(</span><span class="n">actual</span><span class="o">.</span><span class="n">coin_counts</span><span class="p">,</span> <span class="n">Denominations</span><span class="o">.</span><span class="n">double_dime</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">money</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">AssertionError</span> <span class="k">as</span> <span class="n">error</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"AssertionError: </span><span class="si">{</span><span class="n">error</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
</pre></div>

<pre class="example">
AssertionError: 
expected: 3 to equal 2
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf8a04a1" class="outline-3">
<h3 id="orgf8a04a1">Plotting</h3>
<div class="outline-text-3" id="text-orgf8a04a1">
<div class="highlight"><pre><span></span><span class="n">greedy_counts</span> <span class="o">=</span> <span class="p">[</span><span class="n">greedy_changer</span><span class="p">(</span><span class="n">amount</span><span class="p">,</span> <span class="n">Denominations</span><span class="o">.</span><span class="n">US</span><span class="p">)</span><span class="o">.</span><span class="n">run_count</span>
		 <span class="k">for</span> <span class="n">amount</span> <span class="ow">in</span> <span class="n">PLOT_AMOUNTS</span><span class="p">]</span>
<span class="n">GREEDY_FRAME</span> <span class="o">=</span> <span class="n">PLOT_FRAME</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s2">"Coins"</span><span class="p">:</span> <span class="s2">"Cashier"</span><span class="p">})</span>
<span class="n">GREEDY_FRAME</span><span class="p">[</span><span class="s2">"Greedy"</span><span class="p">]</span> <span class="o">=</span> <span class="n">greedy_counts</span>
<span class="n">melted</span> <span class="o">=</span> <span class="n">GREEDY_FRAME</span><span class="o">.</span><span class="n">melt</span><span class="p">(</span><span class="n">id_vars</span><span class="o">=</span><span class="p">[</span><span class="s2">"Amount to Change"</span><span class="p">],</span>
			   <span class="n">value_vars</span><span class="o">=</span><span class="p">[</span><span class="s2">"Greedy"</span><span class="p">,</span> <span class="s2">"Cashier"</span><span class="p">],</span>
			   <span class="n">var_name</span><span class="o">=</span><span class="s2">"Change Method"</span><span class="p">,</span>
			   <span class="n">value_name</span><span class="o">=</span><span class="s2">"Loop Count"</span><span class="p">)</span>

<span class="n">chart</span> <span class="o">=</span> <span class="n">altair</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">melted</span><span class="p">)</span><span class="o">.</span><span class="n">mark_line</span><span class="p">(</span><span class="n">point</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">x</span><span class="o">=</span><span class="s2">"Amount to Change"</span><span class="p">,</span>
    <span class="n">y</span><span class="o">=</span><span class="n">altair</span><span class="o">.</span><span class="n">Y</span><span class="p">(</span><span class="s2">"Loop Count"</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="n">altair</span><span class="o">.</span><span class="n">Axis</span><span class="p">(</span><span class="n">tickMinStep</span><span class="o">=</span><span class="mi">1</span><span class="p">)),</span>
    <span class="n">tooltip</span><span class="o">=</span><span class="p">[</span><span class="s2">"Amount to Change"</span><span class="p">,</span> <span class="s2">"Loop Count"</span><span class="p">,</span> <span class="s2">"Change Method"</span><span class="p">],</span>
    <span class="n">color</span><span class="o">=</span><span class="s2">"Change Method"</span><span class="p">)</span><span class="o">.</span><span class="n">properties</span><span class="p">(</span>
	<span class="n">title</span><span class="o">=</span><span class="s2">"Cashier's and Greedy Change Coin Counts (Common U.S. Coins)"</span><span class="p">,</span>
	<span class="n">width</span><span class="o">=</span><span class="n">PlotParameters</span><span class="o">.</span><span class="n">width</span><span class="p">,</span>
	<span class="n">height</span><span class="o">=</span><span class="n">PlotParameters</span><span class="o">.</span><span class="n">height</span><span class="p">,</span>
    <span class="p">)</span>

<span class="n">save_it</span><span class="p">(</span><span class="n">chart</span><span class="p">,</span> <span class="s2">"cashiers-greedy-change-us-coins"</span><span class="p">)</span>
</pre></div>

<object type="text/html" data="posts/the-coin-changing-problem/cashiers-greedy-change-us-coins.html" style="width:100%" height="600">
  <p>Figure Missing</p>
</object>

<p>
Since the Cashier works by repeated subtraction instead of division it goes up with the amount of change owed, and so generally does worse than the Greedy changer, except in the cases where it takes fewer coins to make the change than the number of denominations there are. If I had included the fifty cent piece it would have done a little better in the second half of the plot.
</p>
</div>
</div>
</div>

<div id="outline-container-org30e5885" class="outline-2">
<h2 id="org30e5885">A Brute Force Changer</h2>
<div class="outline-text-2" id="text-org30e5885">
<p>
To get around the limitations of the greedy-style of change making we'll figure out all the ways we can make change for a particular amount and pick the solution with the fewest coins.
</p>

<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">brute_changer</span><span class="p">(</span><span class="n">money</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">denominations</span><span class="p">:</span> <span class="nb">list</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ChangeCounts</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""Make change using the fewest coins</span>

<span class="sd">    Args:</span>
<span class="sd">     money: the amount to change</span>
<span class="sd">     denominations: list of coin denominations in decreasing order</span>

<span class="sd">    Returns:</span>
<span class="sd">     Number of each denomination needed to make the change, loop_count</span>
<span class="sd">    """</span>
    <span class="n">best</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="s2">"inf"</span><span class="p">)</span>
    <span class="n">number_of_denominations</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">denominations</span><span class="p">)</span>
    <span class="n">counter</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">first</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">number_of_denominations</span><span class="p">):</span>
	<span class="n">remainder</span> <span class="o">=</span> <span class="n">money</span>
	<span class="n">counts</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">number_of_denominations</span>
	<span class="n">total</span> <span class="o">=</span> <span class="mi">0</span>
	<span class="k">for</span> <span class="n">next_location</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">first</span><span class="p">,</span> <span class="n">number_of_denominations</span><span class="p">):</span>
	    <span class="n">denomination</span> <span class="o">=</span> <span class="n">denominations</span><span class="p">[</span><span class="n">next_location</span><span class="p">]</span>
	    <span class="n">count</span> <span class="o">=</span> <span class="n">remainder</span><span class="o">//</span><span class="n">denomination</span>
	    <span class="n">remainder</span> <span class="o">=</span> <span class="n">remainder</span> <span class="o">-</span> <span class="n">count</span> <span class="o">*</span> <span class="n">denomination</span>
	    <span class="n">counts</span><span class="p">[</span><span class="n">next_location</span><span class="p">]</span> <span class="o">=</span> <span class="n">count</span>
	    <span class="n">total</span> <span class="o">+=</span> <span class="n">count</span>
	    <span class="n">counter</span> <span class="o">+=</span> <span class="mi">1</span>
	<span class="k">if</span> <span class="n">total</span> <span class="o">&lt;</span> <span class="n">best</span><span class="p">:</span>
	    <span class="n">best_counts</span> <span class="o">=</span> <span class="n">counts</span>
	    <span class="n">best</span> <span class="o">=</span> <span class="n">total</span>
    <span class="k">return</span> <span class="n">ChangeCounts</span><span class="p">(</span><span class="n">best_counts</span><span class="p">,</span> <span class="n">counter</span><span class="p">)</span>
</pre></div>

<div class="highlight"><pre><span></span><span class="c1"># case 1</span>
<span class="n">money</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">coins</span> <span class="o">=</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
<span class="n">actual</span> <span class="o">=</span> <span class="n">brute_changer</span><span class="p">(</span><span class="n">money</span><span class="p">,</span> <span class="n">coins</span><span class="p">)</span>
<span class="n">check_coins</span><span class="p">(</span><span class="n">actual</span><span class="o">.</span><span class="n">coin_counts</span><span class="p">,</span> <span class="n">coins</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="n">money</span><span class="p">)</span>

<span class="c1"># case 2</span>
<span class="n">money</span> <span class="o">=</span> <span class="mi">28</span>
<span class="n">actual</span> <span class="o">=</span> <span class="n">brute_changer</span><span class="p">(</span><span class="n">money</span><span class="p">,</span> <span class="n">coins</span><span class="p">)</span>
<span class="n">check_coins</span><span class="p">(</span><span class="n">actual</span><span class="o">.</span><span class="n">coin_counts</span><span class="p">,</span> <span class="n">coins</span><span class="p">,</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="n">money</span><span class="p">)</span>

<span class="n">coins</span> <span class="o">=</span> <span class="p">[</span><span class="mi">25</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>

<span class="n">money</span> <span class="o">=</span> <span class="mi">28</span>
<span class="n">actual</span> <span class="o">=</span> <span class="n">brute_changer</span><span class="p">(</span><span class="n">money</span><span class="p">,</span> <span class="n">coins</span><span class="p">)</span>
<span class="n">check_coins</span><span class="p">(</span><span class="n">actual</span><span class="o">.</span><span class="n">coin_counts</span><span class="p">,</span> <span class="n">coins</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="n">money</span><span class="p">)</span>

<span class="n">money</span> <span class="o">=</span> <span class="mi">14</span>
<span class="n">actual</span> <span class="o">=</span> <span class="n">brute_changer</span><span class="p">(</span><span class="n">money</span><span class="p">,</span> <span class="n">coins</span><span class="p">)</span>
<span class="n">check_coins</span><span class="p">(</span><span class="n">actual</span><span class="o">.</span><span class="n">coin_counts</span><span class="p">,</span> <span class="n">coins</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="n">money</span><span class="p">)</span>
</pre></div>

<p>
And now our double-dime case.
</p>

<div class="highlight"><pre><span></span><span class="n">money</span> <span class="o">=</span> <span class="mi">40</span>
<span class="n">actual</span> <span class="o">=</span> <span class="n">brute_changer</span><span class="p">(</span><span class="n">money</span><span class="p">,</span> <span class="n">Denominations</span><span class="o">.</span><span class="n">double_dime</span><span class="p">)</span>

<span class="n">check_coins</span><span class="p">(</span><span class="n">actual</span><span class="o">.</span><span class="n">coin_counts</span><span class="p">,</span> <span class="n">Denominations</span><span class="o">.</span><span class="n">double_dime</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">money</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">actual</span><span class="p">)</span>
</pre></div>

<pre class="example">
ChangeCounts(coin_counts=[0, 2, 0, 0, 0], run_count=15)
</pre>


<p>
The Brute-Force Changer fixes our double-dimes case, and has a constant runtime of:
</p>

<p>
\[
T(n) = \sum_{i = 1}^{n} = \frac{n(n + 1)}{2}
\]
</p>

<p>
Where \(n\) is the number of denominations, not the input amount. 
</p>


<p>
Let's make sure our functions all agree.
</p>

<div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">amount</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">):</span>
    <span class="n">cashiers_change</span> <span class="o">=</span> <span class="n">cashier_changer</span><span class="p">(</span><span class="n">amount</span><span class="p">,</span> <span class="n">Denominations</span><span class="o">.</span><span class="n">US</span><span class="p">)</span><span class="o">.</span><span class="n">coin_counts</span>
    <span class="n">greedy_change</span> <span class="o">=</span> <span class="n">greedy_changer</span><span class="p">(</span><span class="n">amount</span><span class="p">,</span> <span class="n">Denominations</span><span class="o">.</span><span class="n">US</span><span class="p">)</span><span class="o">.</span><span class="n">coin_counts</span>
    <span class="n">brute_change</span> <span class="o">=</span> <span class="n">brute_changer</span><span class="p">(</span><span class="n">amount</span><span class="p">,</span> <span class="n">Denominations</span><span class="o">.</span><span class="n">US</span><span class="p">)</span><span class="o">.</span><span class="n">coin_counts</span>

    <span class="n">check_coins</span><span class="p">(</span><span class="n">answer</span><span class="o">=</span><span class="n">cashiers_change</span><span class="p">,</span> <span class="n">denominations</span><span class="o">=</span><span class="n">Denominations</span><span class="o">.</span><span class="n">US</span><span class="p">,</span>
		<span class="n">expected_coins</span><span class="o">=</span><span class="n">greedy_change</span><span class="p">,</span> <span class="n">expected_total</span><span class="o">=</span><span class="n">amount</span><span class="p">)</span>
    <span class="n">check_coins</span><span class="p">(</span><span class="n">answer</span><span class="o">=</span><span class="n">brute_change</span><span class="p">,</span> <span class="n">denominations</span><span class="o">=</span><span class="n">Denominations</span><span class="o">.</span><span class="n">US</span><span class="p">,</span>
		<span class="n">expected_coins</span><span class="o">=</span><span class="n">greedy_change</span><span class="p">,</span> <span class="n">expected_total</span><span class="o">=</span><span class="n">amount</span><span class="p">)</span>
</pre></div>
</div>

<div id="outline-container-org3d41db1" class="outline-3">
<h3 id="org3d41db1">Plotting</h3>
<div class="outline-text-3" id="text-org3d41db1">
<p>
Let's compare the three methods we've created so far using the typical U.S. Coins.
</p>

<div class="highlight"><pre><span></span><span class="n">brute_counts</span> <span class="o">=</span> <span class="p">[</span><span class="n">brute_changer</span><span class="p">(</span><span class="n">amount</span><span class="p">,</span> <span class="n">Denominations</span><span class="o">.</span><span class="n">US</span><span class="p">)</span><span class="o">.</span><span class="n">run_count</span>
		<span class="k">for</span> <span class="n">amount</span> <span class="ow">in</span> <span class="n">PLOT_AMOUNTS</span><span class="p">]</span>
<span class="n">GREEDY_FRAME</span><span class="p">[</span><span class="s2">"Brute-Force"</span><span class="p">]</span> <span class="o">=</span> <span class="n">brute_counts</span>
<span class="n">melted</span> <span class="o">=</span> <span class="n">GREEDY_FRAME</span><span class="o">.</span><span class="n">melt</span><span class="p">(</span><span class="n">id_vars</span><span class="o">=</span><span class="p">[</span><span class="s2">"Amount to Change"</span><span class="p">],</span>
			   <span class="n">value_vars</span><span class="o">=</span><span class="p">[</span><span class="s2">"Greedy"</span><span class="p">,</span> <span class="s2">"Cashier"</span><span class="p">,</span> <span class="s2">"Brute-Force"</span><span class="p">],</span>
			   <span class="n">var_name</span><span class="o">=</span><span class="s2">"Change Method"</span><span class="p">,</span>
			   <span class="n">value_name</span><span class="o">=</span><span class="s2">"Loop Count"</span><span class="p">)</span>

<span class="n">chart</span> <span class="o">=</span> <span class="n">altair</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">melted</span><span class="p">)</span><span class="o">.</span><span class="n">mark_line</span><span class="p">(</span><span class="n">point</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">x</span><span class="o">=</span><span class="s2">"Amount to Change"</span><span class="p">,</span>
    <span class="n">y</span><span class="o">=</span><span class="n">altair</span><span class="o">.</span><span class="n">Y</span><span class="p">(</span><span class="s2">"Loop Count"</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="n">altair</span><span class="o">.</span><span class="n">Axis</span><span class="p">(</span><span class="n">tickMinStep</span><span class="o">=</span><span class="mi">1</span><span class="p">)),</span>
    <span class="n">tooltip</span><span class="o">=</span><span class="p">[</span><span class="s2">"Amount to Change"</span><span class="p">,</span> <span class="s2">"Loop Count"</span><span class="p">,</span> <span class="s2">"Change Method"</span><span class="p">],</span>
    <span class="n">color</span><span class="o">=</span><span class="s2">"Change Method"</span><span class="p">)</span><span class="o">.</span><span class="n">properties</span><span class="p">(</span>
	<span class="n">title</span><span class="o">=</span><span class="s2">"Greedy Change &amp; Brute-Force Coin Counts (Common U.S. Coins)"</span><span class="p">,</span>
	<span class="n">width</span><span class="o">=</span><span class="n">PlotParameters</span><span class="o">.</span><span class="n">width</span><span class="p">,</span>
	<span class="n">height</span><span class="o">=</span><span class="n">PlotParameters</span><span class="o">.</span><span class="n">height</span><span class="p">,</span>
    <span class="p">)</span>

<span class="n">save_it</span><span class="p">(</span><span class="n">chart</span><span class="p">,</span> <span class="s2">"brute-force-change-us-coins"</span><span class="p">)</span>
</pre></div>

<object type="text/html" data="posts/the-coin-changing-problem/brute-force-change-us-coins.html" style="width:100%" height="600">
  <p>Figure Missing</p>
</object>

<p>
The Greedy and Brute-Force methods both have a loop-count based on the number of coin denominations we have. Since we have four denominations (25, 10, 5, and 1) the Greedy method has four loops and the Brute-Force method has ten loops \(\left(^{4(4 + 1)}/_{2} = 10\right)\), so it does a little more calculating but not much, although in this case the benefit it has is wasted since we shouldn't find sub-optimal solutions with the greedy approach and using the coins that we did.
</p>
</div>
</div>
</div>

<div id="outline-container-orgbc3485d" class="outline-2">
<h2 id="orgbc3485d">Memoized Changer</h2>
<div class="outline-text-2" id="text-orgbc3485d">
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">memoized_changer</span><span class="p">(</span><span class="n">money</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">denominations</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span> <span class="n">table</span><span class="p">:</span> <span class="nb">dict</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
		     <span class="n">counter</span><span class="p">:</span> <span class="nb">int</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ChangeCounts</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""Make change using the fewest coins</span>

<span class="sd">    Args:</span>
<span class="sd">     money: the amount to change</span>
<span class="sd">     denominations: list of coin denominations in decreasing order</span>
<span class="sd">     table: memoization table (largest denomination, amount to change): best coin counts</span>
<span class="sd">     counter: number of times the function is called</span>

<span class="sd">    Returns:</span>
<span class="sd">     Number of each denomination needed to make the change, call_count</span>
<span class="sd">    """</span>
    <span class="n">table</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span> <span class="k">if</span> <span class="n">table</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">table</span>
    <span class="n">counter</span> <span class="o">+=</span> <span class="mi">1</span>

    <span class="k">if</span> <span class="n">money</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
	<span class="k">return</span> <span class="n">ChangeCounts</span><span class="p">([</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">denominations</span><span class="p">),</span> <span class="n">counter</span><span class="p">)</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">denominations</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">money</span><span class="p">)</span> <span class="ow">in</span> <span class="n">table</span><span class="p">:</span>
	<span class="k">return</span> <span class="n">ChangeCounts</span><span class="p">(</span><span class="n">table</span><span class="p">[(</span><span class="n">denominations</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">money</span><span class="p">)],</span> <span class="n">counter</span><span class="p">)</span>

    <span class="n">last_denomination</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">denominations</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span>
    <span class="n">best</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="s2">"inf"</span><span class="p">)</span>
    <span class="n">best_counts</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">for</span> <span class="n">current</span><span class="p">,</span> <span class="n">denomination</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">denominations</span><span class="p">):</span>
	<span class="n">count</span> <span class="o">=</span> <span class="n">money</span><span class="o">//</span><span class="n">denomination</span>
	<span class="n">remaining</span> <span class="o">=</span> <span class="n">money</span> <span class="o">-</span> <span class="n">count</span> <span class="o">*</span> <span class="n">denomination</span>

	<span class="k">if</span> <span class="n">current</span> <span class="o">==</span> <span class="n">last_denomination</span><span class="p">:</span>
	    <span class="k">if</span> <span class="n">remaining</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
		<span class="n">count</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="s2">"inf"</span><span class="p">)</span>
	    <span class="n">counts</span> <span class="o">=</span> <span class="p">[</span><span class="n">count</span><span class="p">]</span>
	    <span class="n">counter</span> <span class="o">+=</span> <span class="mi">1</span>
	<span class="k">else</span><span class="p">:</span>
	    <span class="n">counts</span><span class="p">,</span> <span class="n">counter</span> <span class="o">=</span> <span class="n">memoized_changer</span><span class="p">(</span>
		<span class="n">remaining</span><span class="p">,</span> <span class="n">denominations</span><span class="p">[</span><span class="n">current</span> <span class="o">+</span> <span class="mi">1</span><span class="p">:],</span> <span class="n">table</span><span class="p">,</span> <span class="n">counter</span><span class="p">)</span>
	    <span class="n">counts</span> <span class="o">=</span> <span class="p">[</span><span class="n">count</span><span class="p">]</span> <span class="o">+</span> <span class="n">counts</span>

	<span class="n">total_counts</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">counts</span><span class="p">)</span>

	<span class="k">if</span> <span class="n">total_counts</span> <span class="o">&lt;</span> <span class="n">best</span><span class="p">:</span>
	    <span class="n">best</span> <span class="o">=</span> <span class="n">total_counts</span>
	    <span class="n">best_counts</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">current</span> <span class="o">+</span> <span class="n">counts</span>
	<span class="n">table</span><span class="p">[(</span><span class="n">denomination</span><span class="p">,</span> <span class="n">money</span><span class="p">)]</span> <span class="o">=</span> <span class="n">counts</span>
    <span class="k">return</span> <span class="n">ChangeCounts</span><span class="p">(</span><span class="n">best_counts</span><span class="p">,</span> <span class="n">counter</span><span class="p">)</span>
</pre></div>
</div>

<div id="outline-container-orgf9a2462" class="outline-3">
<h3 id="orgf9a2462">Checking the Memoized Changer</h3>
<div class="outline-text-3" id="text-orgf9a2462">
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">check_changers</span><span class="p">(</span><span class="n">changer</span><span class="p">:</span> <span class="nb">object</span><span class="p">,</span> <span class="n">amount</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">denominations</span><span class="p">:</span> <span class="nb">list</span><span class="p">):</span>
<span class="w">    </span><span class="sd">"""Check that the changer matches the brute-force solution</span>

<span class="sd">    Arguments:</span>
<span class="sd">     changer: change-function to compare to brute-force</span>
<span class="sd">     amount: cents to change</span>
<span class="sd">     denominations: descending list of coin-denominations</span>

<span class="sd">    Raises:</span>
<span class="sd">     AssertionError: there's a discrepancy somewhere</span>
<span class="sd">    """</span>
    <span class="n">brute_counts</span> <span class="o">=</span> <span class="n">brute_changer</span><span class="p">(</span><span class="n">amount</span><span class="p">,</span> <span class="n">denominations</span><span class="p">)</span>
    <span class="n">check_counts</span> <span class="o">=</span> <span class="n">changer</span><span class="p">(</span><span class="n">amount</span><span class="p">,</span> <span class="n">denominations</span><span class="p">)</span>
    <span class="n">check_coins</span><span class="p">(</span><span class="n">check_counts</span><span class="o">.</span><span class="n">coin_counts</span><span class="p">,</span> <span class="n">denominations</span><span class="p">,</span> <span class="n">brute_counts</span><span class="o">.</span><span class="n">coin_counts</span><span class="p">,</span> <span class="n">amount</span><span class="p">)</span>
    <span class="k">return</span>
</pre></div>

<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">check_cases</span><span class="p">(</span><span class="n">changer</span><span class="p">:</span> <span class="nb">object</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""Check the pre-picked cases are okay</span>

<span class="sd">    Arguments:</span>
<span class="sd">     changer: the dynamic-programming changer to check</span>

<span class="sd">    Raises:</span>
<span class="sd">     AssertionError if something doesn't check out</span>
<span class="sd">    """</span>
    <span class="k">for</span> <span class="n">amount</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">):</span>
	<span class="n">check_changers</span><span class="p">(</span><span class="n">changer</span><span class="p">,</span> <span class="n">amount</span><span class="p">,</span> <span class="n">Denominations</span><span class="o">.</span><span class="n">US</span><span class="p">)</span>
	<span class="n">check_changers</span><span class="p">(</span><span class="n">changer</span><span class="p">,</span> <span class="n">amount</span><span class="p">,</span> <span class="n">Denominations</span><span class="o">.</span><span class="n">double_dime</span><span class="p">)</span>
	<span class="n">check_changers</span><span class="p">(</span><span class="n">changer</span><span class="p">,</span> <span class="n">amount</span><span class="p">,</span> <span class="n">Denominations</span><span class="o">.</span><span class="n">obsolete</span><span class="p">)</span>

	<span class="n">money</span> <span class="o">=</span> <span class="mi">2</span>
	<span class="n">coins</span> <span class="o">=</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
	<span class="n">check_changers</span><span class="p">(</span><span class="n">memoized_changer</span><span class="p">,</span> <span class="n">money</span><span class="p">,</span>  <span class="n">coins</span><span class="p">)</span>

	<span class="n">money</span> <span class="o">=</span> <span class="mi">28</span>
	<span class="n">check_changers</span><span class="p">(</span><span class="n">memoized_changer</span><span class="p">,</span> <span class="n">money</span><span class="p">,</span>  <span class="n">coins</span><span class="p">)</span>

	<span class="n">coins</span> <span class="o">=</span> <span class="p">[</span><span class="mi">25</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
	<span class="n">check_changers</span><span class="p">(</span><span class="n">memoized_changer</span><span class="p">,</span> <span class="n">money</span><span class="p">,</span>  <span class="n">coins</span><span class="p">)</span>

	<span class="n">money</span> <span class="o">=</span> <span class="mi">14</span>
	<span class="n">check_changers</span><span class="p">(</span><span class="n">memoized_changer</span><span class="p">,</span> <span class="n">money</span><span class="p">,</span>  <span class="n">coins</span><span class="p">)</span>

	<span class="c1"># the double-dimes</span>
	<span class="n">coins</span> <span class="o">=</span> <span class="p">[</span><span class="mi">25</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
	<span class="n">money</span> <span class="o">=</span> <span class="mi">40</span>
	<span class="n">check_changers</span><span class="p">(</span><span class="n">memoized_changer</span><span class="p">,</span> <span class="n">money</span><span class="p">,</span>  <span class="n">coins</span><span class="p">)</span>
	<span class="k">return</span>
</pre></div>

<div class="highlight"><pre><span></span><span class="n">check_cases</span><span class="p">(</span><span class="n">memoized_changer</span><span class="p">)</span>
</pre></div>
</div>
</div>

<div id="outline-container-org1a69abe" class="outline-3">
<h3 id="org1a69abe">Plotting</h3>
<div class="outline-text-3" id="text-org1a69abe">
</div>
<div id="outline-container-org3ffcb3d" class="outline-4">
<h4 id="org3ffcb3d">All the Methods So Far</h4>
<div class="outline-text-4" id="text-org3ffcb3d">
<div class="highlight"><pre><span></span><span class="n">memoized_counts</span> <span class="o">=</span> <span class="p">[</span><span class="n">memoized_changer</span><span class="p">(</span><span class="n">amount</span><span class="p">,</span> <span class="n">Denominations</span><span class="o">.</span><span class="n">US</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">run_count</span>
		   <span class="k">for</span> <span class="n">amount</span> <span class="ow">in</span> <span class="n">PLOT_AMOUNTS</span><span class="p">]</span>
<span class="n">GREEDY_FRAME</span><span class="p">[</span><span class="s2">"Memoized"</span><span class="p">]</span> <span class="o">=</span> <span class="n">memoized_counts</span>
<span class="n">melted</span> <span class="o">=</span> <span class="n">GREEDY_FRAME</span><span class="o">.</span><span class="n">melt</span><span class="p">(</span><span class="n">id_vars</span><span class="o">=</span><span class="p">[</span><span class="s2">"Amount to Change"</span><span class="p">],</span>
			   <span class="n">value_vars</span><span class="o">=</span><span class="p">[</span><span class="s2">"Greedy"</span><span class="p">,</span> <span class="s2">"Cashier"</span><span class="p">,</span> <span class="s2">"Brute-Force"</span><span class="p">,</span>
				       <span class="s2">"Memoized"</span><span class="p">],</span>
			   <span class="n">var_name</span><span class="o">=</span><span class="s2">"Change Method"</span><span class="p">,</span>
			   <span class="n">value_name</span><span class="o">=</span><span class="s2">"Loop Count"</span><span class="p">)</span>

<span class="n">chart</span> <span class="o">=</span> <span class="n">altair</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">melted</span><span class="p">)</span><span class="o">.</span><span class="n">mark_line</span><span class="p">(</span><span class="n">point</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">x</span><span class="o">=</span><span class="s2">"Amount to Change"</span><span class="p">,</span>
    <span class="n">y</span><span class="o">=</span><span class="n">altair</span><span class="o">.</span><span class="n">Y</span><span class="p">(</span><span class="s2">"Loop Count"</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="n">altair</span><span class="o">.</span><span class="n">Axis</span><span class="p">(</span><span class="n">tickMinStep</span><span class="o">=</span><span class="mi">1</span><span class="p">)),</span>
    <span class="n">tooltip</span><span class="o">=</span><span class="p">[</span><span class="s2">"Amount to Change"</span><span class="p">,</span> <span class="s2">"Loop Count"</span><span class="p">,</span> <span class="s2">"Change Method"</span><span class="p">],</span>
    <span class="n">color</span><span class="o">=</span><span class="s2">"Change Method"</span><span class="p">)</span><span class="o">.</span><span class="n">properties</span><span class="p">(</span>
	<span class="n">title</span><span class="o">=</span><span class="s2">"Greedy, Brute-Force &amp; Memoized Change Counts (Common U.S. Coins)"</span><span class="p">,</span>
	<span class="n">width</span><span class="o">=</span><span class="n">PlotParameters</span><span class="o">.</span><span class="n">width</span><span class="p">,</span>
	<span class="n">height</span><span class="o">=</span><span class="n">PlotParameters</span><span class="o">.</span><span class="n">height</span><span class="p">,</span>
    <span class="p">)</span>

<span class="n">save_it</span><span class="p">(</span><span class="n">chart</span><span class="p">,</span> <span class="s2">"memoized-change-us-coins"</span><span class="p">)</span>
</pre></div>

<object type="text/html" data="posts/the-coin-changing-problem/memoized-change-us-coins.html" style="width:100%" height="600">
  <p>Figure Missing</p>
</object>

<p>
With a Brute-Force ceiling of 10 loops it's hard to see a marked improvement, given how much easier it is to write the Brute-Force method rather than the memoized one, but let's get rid of the two greedy methods and compare the brute force and memoized with more obsolete coins added in.
</p>
</div>
</div>

<div id="outline-container-org25b5fac" class="outline-4">
<h4 id="org25b5fac">Obsolete Coins</h4>
<div class="outline-text-4" id="text-org25b5fac">
<p>
First, we'll check to make sure that the brute-force and memoized methods agree on the best coins for making change with our new denominations, which include some that were once used in the United States but aren't any more.
</p>

<div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">Denominations</span><span class="o">.</span><span class="n">obsolete</span><span class="p">)</span>
</pre></div>

<pre class="example">
[25, 20, 10, 5, 3, 2, 1]
</pre>



<p>
Now let's see how the run-times compare.
</p>

<div class="highlight"><pre><span></span><span class="n">BRUTE_OBSOLETE</span> <span class="o">=</span> <span class="p">[</span><span class="n">brute_changer</span><span class="p">(</span><span class="n">amount</span><span class="p">,</span> <span class="n">Denominations</span><span class="o">.</span><span class="n">obsolete</span><span class="p">)</span><span class="o">.</span><span class="n">run_count</span>
		  <span class="k">for</span> <span class="n">amount</span> <span class="ow">in</span> <span class="n">PLOT_AMOUNTS</span><span class="p">]</span>
<span class="n">MEMOIZED_OBSOLETE</span> <span class="o">=</span> <span class="p">[</span><span class="n">memoized_changer</span><span class="p">(</span><span class="n">amount</span><span class="p">,</span> <span class="n">Denominations</span><span class="o">.</span><span class="n">obsolete</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">run_count</span>
		     <span class="k">for</span> <span class="n">amount</span> <span class="ow">in</span> <span class="n">PLOT_AMOUNTS</span><span class="p">]</span>

<span class="n">OBSOLETE_FRAME</span> <span class="o">=</span> <span class="n">pandas</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">"Amount to Change"</span><span class="p">:</span> <span class="n">PLOT_AMOUNTS</span><span class="p">,</span>
				   <span class="s2">"Brute-Force"</span><span class="p">:</span> <span class="n">BRUTE_OBSOLETE</span><span class="p">,</span>
				   <span class="s2">"Memoized"</span><span class="p">:</span> <span class="n">MEMOIZED_OBSOLETE</span><span class="p">})</span>

<span class="n">melted</span> <span class="o">=</span> <span class="n">OBSOLETE_FRAME</span><span class="o">.</span><span class="n">melt</span><span class="p">(</span><span class="n">id_vars</span><span class="o">=</span><span class="p">[</span><span class="s2">"Amount to Change"</span><span class="p">],</span>
			   <span class="n">value_vars</span><span class="o">=</span><span class="p">[</span><span class="s2">"Brute-Force"</span><span class="p">,</span>
				       <span class="s2">"Memoized"</span><span class="p">],</span>
			   <span class="n">var_name</span><span class="o">=</span><span class="s2">"Change Method"</span><span class="p">,</span>
			   <span class="n">value_name</span><span class="o">=</span><span class="s2">"Loop Count"</span><span class="p">)</span>

<span class="n">chart</span> <span class="o">=</span> <span class="n">altair</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">melted</span><span class="p">)</span><span class="o">.</span><span class="n">mark_line</span><span class="p">(</span><span class="n">point</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">x</span><span class="o">=</span><span class="s2">"Amount to Change"</span><span class="p">,</span>
    <span class="n">y</span><span class="o">=</span><span class="n">altair</span><span class="o">.</span><span class="n">Y</span><span class="p">(</span><span class="s2">"Loop Count"</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="n">altair</span><span class="o">.</span><span class="n">Axis</span><span class="p">(</span><span class="n">tickMinStep</span><span class="o">=</span><span class="mi">1</span><span class="p">)),</span>
    <span class="n">tooltip</span><span class="o">=</span><span class="p">[</span><span class="s2">"Amount to Change"</span><span class="p">,</span> <span class="s2">"Loop Count"</span><span class="p">,</span> <span class="s2">"Change Method"</span><span class="p">],</span>
    <span class="n">color</span><span class="o">=</span><span class="s2">"Change Method"</span><span class="p">)</span><span class="o">.</span><span class="n">properties</span><span class="p">(</span>
	<span class="n">title</span><span class="o">=</span><span class="s2">"Brute-Force &amp; Memoized Change Counts (Including Obsolete Coins)"</span><span class="p">,</span>
	<span class="n">width</span><span class="o">=</span><span class="n">PlotParameters</span><span class="o">.</span><span class="n">width</span><span class="p">,</span>
	<span class="n">height</span><span class="o">=</span><span class="n">PlotParameters</span><span class="o">.</span><span class="n">height</span><span class="p">,</span>
    <span class="p">)</span>

<span class="n">save_it</span><span class="p">(</span><span class="n">chart</span><span class="p">,</span> <span class="s2">"memoized-change-obsolete"</span><span class="p">)</span>
</pre></div>

<object type="text/html" data="posts/the-coin-changing-problem/memoized-change-obsolete.html" style="width:100%" height="600">
  <p>Figure Missing</p>
</object>

<p>
This time we have seven coin denominations so the brute-force method takes \(^7(8)/_2 = 28\) loops. Now that we have more coins the memoized does slightly (very slightly) worse than the brute-force for larger amounts, but in the examples so far I've been creating a new memo-table for every amount - what happens if we build one table and re-use it as we find the change for new amounts?
</p>

<div class="highlight"><pre><span></span><span class="n">OBSOLETE_TABLE</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">MEMOIZED_OBSOLETE_2</span> <span class="o">=</span> <span class="p">[</span><span class="n">memoized_changer</span><span class="p">(</span><span class="n">amount</span><span class="p">,</span>
					<span class="n">Denominations</span><span class="o">.</span><span class="n">obsolete</span><span class="p">,</span>
					<span class="n">OBSOLETE_TABLE</span><span class="p">)</span><span class="o">.</span><span class="n">run_count</span>
		       <span class="k">for</span> <span class="n">amount</span> <span class="ow">in</span> <span class="n">PLOT_AMOUNTS</span><span class="p">]</span>

<span class="n">OBSOLETE_FRAME_2</span> <span class="o">=</span> <span class="n">pandas</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">"Amount to Change"</span><span class="p">:</span> <span class="n">PLOT_AMOUNTS</span><span class="p">,</span>
			  <span class="s2">"Brute-Force"</span><span class="p">:</span> <span class="n">BRUTE_OBSOLETE</span><span class="p">,</span>
			  <span class="s2">"Memoized"</span><span class="p">:</span> <span class="n">MEMOIZED_OBSOLETE_2</span><span class="p">})</span>

<span class="n">melted</span> <span class="o">=</span> <span class="n">OBSOLETE_FRAME_2</span><span class="o">.</span><span class="n">melt</span><span class="p">(</span><span class="n">id_vars</span><span class="o">=</span><span class="p">[</span><span class="s2">"Amount to Change"</span><span class="p">],</span>
			       <span class="n">value_vars</span><span class="o">=</span><span class="p">[</span><span class="s2">"Brute-Force"</span><span class="p">,</span>
					   <span class="s2">"Memoized"</span><span class="p">],</span>
			       <span class="n">var_name</span><span class="o">=</span><span class="s2">"Change Method"</span><span class="p">,</span>
			       <span class="n">value_name</span><span class="o">=</span><span class="s2">"Loop Count"</span><span class="p">)</span>

<span class="n">chart</span> <span class="o">=</span> <span class="n">altair</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">melted</span><span class="p">)</span><span class="o">.</span><span class="n">mark_line</span><span class="p">(</span><span class="n">point</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">x</span><span class="o">=</span><span class="s2">"Amount to Change"</span><span class="p">,</span>
    <span class="n">y</span><span class="o">=</span><span class="n">altair</span><span class="o">.</span><span class="n">Y</span><span class="p">(</span><span class="s2">"Loop Count"</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="n">altair</span><span class="o">.</span><span class="n">Axis</span><span class="p">(</span><span class="n">tickMinStep</span><span class="o">=</span><span class="mi">1</span><span class="p">)),</span>
    <span class="n">tooltip</span><span class="o">=</span><span class="p">[</span><span class="s2">"Amount to Change"</span><span class="p">,</span> <span class="s2">"Loop Count"</span><span class="p">,</span> <span class="s2">"Change Method"</span><span class="p">],</span>
    <span class="n">color</span><span class="o">=</span><span class="s2">"Change Method"</span><span class="p">)</span><span class="o">.</span><span class="n">properties</span><span class="p">(</span>
	<span class="n">title</span><span class="o">=</span><span class="s2">"Brute-Force &amp; Memoized Change Counts (Obsolete Coins, Re-Used Table)"</span><span class="p">,</span>
	<span class="n">width</span><span class="o">=</span><span class="n">PlotParameters</span><span class="o">.</span><span class="n">width</span><span class="p">,</span>
	<span class="n">height</span><span class="o">=</span><span class="n">PlotParameters</span><span class="o">.</span><span class="n">height</span><span class="p">,</span>
    <span class="p">)</span>

<span class="n">save_it</span><span class="p">(</span><span class="n">chart</span><span class="p">,</span> <span class="s2">"memoized-change-obsolete-keep-table"</span><span class="p">)</span>
</pre></div>

<object type="text/html" data="posts/the-coin-changing-problem/memoized-change-obsolete-keep-table.html" style="width:100%" height="600">
  <p>Figure Missing</p>
</object>

<p>
Re-using the table allows us to avoid some re-calculating and the number of calls eventually drops down to the number of coins we have, the same as the number of loops for the greedy method, although in this case we can handle cases where the greedy method fails.
</p>

<p>
Even better, now that we have the table built with all our allowed values, we can just look things up and don't need to run the function (although I will here just to make sure nothing funky is going on), so it has a cost of one.
</p>

<div class="highlight"><pre><span></span><span class="n">MEMOIZED_OBSOLETE_3</span> <span class="o">=</span> <span class="p">[</span><span class="n">memoized_changer</span><span class="p">(</span><span class="n">amount</span><span class="p">,</span>
					<span class="n">Denominations</span><span class="o">.</span><span class="n">obsolete</span><span class="p">,</span>
					<span class="n">OBSOLETE_TABLE</span><span class="p">)</span><span class="o">.</span><span class="n">run_count</span>
		       <span class="k">for</span> <span class="n">amount</span> <span class="ow">in</span> <span class="n">PLOT_AMOUNTS</span><span class="p">]</span>

<span class="n">OBSOLETE_FRAME_3</span> <span class="o">=</span> <span class="n">pandas</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">"Amount to Change"</span><span class="p">:</span> <span class="n">PLOT_AMOUNTS</span><span class="p">,</span>
			  <span class="s2">"Brute-Force"</span><span class="p">:</span> <span class="n">BRUTE_OBSOLETE</span><span class="p">,</span>
			  <span class="s2">"Memoized"</span><span class="p">:</span> <span class="n">MEMOIZED_OBSOLETE_3</span><span class="p">})</span>

<span class="n">melted</span> <span class="o">=</span> <span class="n">OBSOLETE_FRAME_3</span><span class="o">.</span><span class="n">melt</span><span class="p">(</span><span class="n">id_vars</span><span class="o">=</span><span class="p">[</span><span class="s2">"Amount to Change"</span><span class="p">],</span>
			       <span class="n">value_vars</span><span class="o">=</span><span class="p">[</span><span class="s2">"Brute-Force"</span><span class="p">,</span>
					   <span class="s2">"Memoized"</span><span class="p">],</span>
			       <span class="n">var_name</span><span class="o">=</span><span class="s2">"Change Method"</span><span class="p">,</span>
			       <span class="n">value_name</span><span class="o">=</span><span class="s2">"Loop Count"</span><span class="p">)</span>

<span class="n">chart</span> <span class="o">=</span> <span class="n">altair</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">melted</span><span class="p">)</span><span class="o">.</span><span class="n">mark_line</span><span class="p">(</span><span class="n">point</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">x</span><span class="o">=</span><span class="s2">"Amount to Change"</span><span class="p">,</span>
    <span class="n">y</span><span class="o">=</span><span class="n">altair</span><span class="o">.</span><span class="n">Y</span><span class="p">(</span><span class="s2">"Loop Count"</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="n">altair</span><span class="o">.</span><span class="n">Axis</span><span class="p">(</span><span class="n">tickMinStep</span><span class="o">=</span><span class="mi">1</span><span class="p">)),</span>
    <span class="n">tooltip</span><span class="o">=</span><span class="p">[</span><span class="s2">"Amount to Change"</span><span class="p">,</span> <span class="s2">"Loop Count"</span><span class="p">,</span> <span class="s2">"Change Method"</span><span class="p">],</span>
    <span class="n">color</span><span class="o">=</span><span class="s2">"Change Method"</span><span class="p">)</span><span class="o">.</span><span class="n">properties</span><span class="p">(</span>
	<span class="n">title</span><span class="o">=</span><span class="s2">"Brute-Force &amp; Memoized Change Counts (Obsolete Coins, Pre-Filled Table)"</span><span class="p">,</span>
	<span class="n">width</span><span class="o">=</span><span class="n">PlotParameters</span><span class="o">.</span><span class="n">width</span><span class="p">,</span>
	<span class="n">height</span><span class="o">=</span><span class="n">PlotParameters</span><span class="o">.</span><span class="n">height</span><span class="p">,</span>
    <span class="p">)</span>

<span class="n">save_it</span><span class="p">(</span><span class="n">chart</span><span class="p">,</span> <span class="s2">"memoized-change-obsolete-pre-filled-table"</span><span class="p">)</span>
</pre></div>

<object type="text/html" data="posts/the-coin-changing-problem/memoized-change-obsolete-pre-filled-table.html" style="width:100%" height="600">
  <p>Figure Missing</p>
</object>
</div>
</div>
</div>
</div>

<div id="outline-container-org19cd147" class="outline-2">
<h2 id="org19cd147">Iterative Dynamic Programming</h2>
<div class="outline-text-2" id="text-org19cd147">
<p>
The idea behind this problem (making change) is to show how Dynamic Programming can eleminate redundant calculations, so this is the point where I'll switch to an iterative approach that uses Dynamic Programming. The iterative, top-down approach works in the opposite direction of the memoized approach, starting with the smallest values and then moving to ever increasing values, storing the outcomes as we go so that we can re-use the lower solutions as the values increase. This is where I was stumped for a while - since the memoized function I used is based on the remainders left over after subtracting a coin's value from it (e.g. 26 cents minus a quarter has a remainder of 1 cent so we use the stored 1-cent solution from the memo-table rather than re-calculating it) in order to create an iterative version we somehow have to store the values in the table before they are needed, but the scheme I used where we iterate over the coin-denominations doesn't work (or it makes it really convoluted to force it to work). From what I can tell this is because I didn't really make a dynamic programming solution with the memoized version. With Dynamic Programming our memo-table should be built around the change we need to give out, so you would have a table with all the possible amounts, not just the ones needed as remainders. This works with our depth-first version because we're starting at the leaf nodes and working back up the tree, but it doesn't work with the iterative version because we don't know ahead of time which remainders we need later on in the table. For example, if we can only use 1-cent and 10-cent coins and we need to make change for 11 cents, then we have to have an entry for 1-cent in the table before we get to figuring out the solution that includes the 10-cent piece. If we need to break 12 cents, though, we need to have an entry for 2 cents before we get to calculating the entry for 10 cents. But how do we know which values we need to enter into the table for the 1-cent piece before we get to the 10 cent piece? 
</p>

<p>
The solution is to fill out the table completely from 1 to the amount to make change for each coin before moving on to the next larger denomination. So, for our 12-cent example we need entries for \(1 \ldots 12\) cents for the 1 cent piece filled out before we move on to calculating the entries for the 10 cent piece so that no matter what remainder we have when we reach the 10-cent piece we can look it up in the table (we actually only need up to 9 cents, but since the denominations aren't fixed doing the trimming once again adds to the complexity more than I'd like). So, I'll just fill out the table and we can see how it goes.
</p>

<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">centaur</span><span class="p">(</span><span class="n">amount</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">denominations</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span> <span class="n">table</span><span class="p">:</span> <span class="nb">dict</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ChangeCountsTable</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""Make change using the fewest coins</span>

<span class="sd">    Warning:</span>
<span class="sd">     To keep the answers matching the other functions it's assumed that the denominations</span>
<span class="sd">     are in decreasing order and the solution will also be match a decreasing order</span>

<span class="sd">    Args:</span>
<span class="sd">     money: the amount to change</span>
<span class="sd">     denominations: list of coin denominations in decreasing order</span>
<span class="sd">     table: memoization table (largest denomination, amount to change): best coin counts</span>

<span class="sd">    Returns:</span>
<span class="sd">     Number of each denomination needed to make the change, call_count, lookup table</span>
<span class="sd">    """</span>
    <span class="c1"># the denominations need to be in ascending order, the opposite of the other methods</span>
    <span class="n">denominations</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="n">denominations</span><span class="p">))</span>
    <span class="n">counter</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">table</span><span class="p">:</span>
	<span class="n">table</span> <span class="o">=</span> <span class="p">{</span><span class="n">denomination</span><span class="p">:</span> <span class="p">[</span><span class="kc">None</span><span class="p">]</span> <span class="o">*</span> <span class="p">(</span><span class="n">amount</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="k">for</span> <span class="n">denomination</span> <span class="ow">in</span> <span class="n">denominations</span><span class="p">}</span>
	<span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">denomination</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">denominations</span><span class="p">):</span>
	    <span class="n">table</span><span class="p">[</span><span class="n">denomination</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="p">(</span><span class="n">index</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
    <span class="n">best</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="s2">"inf"</span><span class="p">)</span>
    <span class="n">best_counts</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">for</span> <span class="n">owed</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">amount</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
	<span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">denomination</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">denominations</span><span class="p">):</span>
	    <span class="n">counter</span> <span class="o">+=</span> <span class="mi">1</span>
	    <span class="n">count</span> <span class="o">=</span> <span class="n">owed</span><span class="o">//</span><span class="n">denomination</span>
	    <span class="n">remainder</span> <span class="o">=</span> <span class="n">owed</span> <span class="o">-</span> <span class="n">count</span> <span class="o">*</span> <span class="n">denomination</span>
	    <span class="n">counts</span> <span class="o">=</span> <span class="p">[</span><span class="n">count</span><span class="p">]</span>

	    <span class="k">if</span> <span class="n">index</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
		<span class="n">counts</span> <span class="o">=</span> <span class="n">table</span><span class="p">[</span><span class="n">denominations</span><span class="p">[</span><span class="n">index</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]][</span><span class="n">remainder</span><span class="p">]</span> <span class="o">+</span> <span class="n">counts</span>

	    <span class="n">table</span><span class="p">[</span><span class="n">denomination</span><span class="p">][</span><span class="n">owed</span><span class="p">]</span> <span class="o">=</span> <span class="n">counts</span>

	    <span class="k">if</span> <span class="n">amount</span> <span class="o">==</span> <span class="n">owed</span> <span class="ow">and</span> <span class="nb">sum</span><span class="p">(</span><span class="n">counts</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">best</span><span class="p">:</span>
		<span class="n">best</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">counts</span><span class="p">)</span>
		<span class="n">best_counts</span> <span class="o">=</span> <span class="n">counts</span> <span class="o">+</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">denominations</span><span class="p">)</span> <span class="o">-</span> <span class="n">index</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
    <span class="c1"># put solution in descending order to match other functions</span>
    <span class="n">best_counts</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">ChangeCountsTable</span><span class="p">(</span><span class="n">best_counts</span><span class="p">,</span> <span class="n">counter</span><span class="p">,</span> <span class="n">table</span><span class="p">)</span>
</pre></div>

<div class="highlight"><pre><span></span><span class="n">check_cases</span><span class="p">(</span><span class="n">centaur</span><span class="p">)</span>
</pre></div>
</div>

<div id="outline-container-org324956a" class="outline-3">
<h3 id="org324956a">Plotting</h3>
<div class="outline-text-3" id="text-org324956a">
<p>
Since the iterative version works differently from the others the loop-counts aren't really easy to compare.
</p>

<div class="highlight"><pre><span></span><span class="n">centaur_counts</span> <span class="o">=</span> <span class="p">[</span><span class="n">centaur</span><span class="p">(</span><span class="n">amount</span><span class="p">,</span> <span class="n">Denominations</span><span class="o">.</span><span class="n">US</span><span class="p">)</span><span class="o">.</span><span class="n">run_count</span>
		   <span class="k">for</span> <span class="n">amount</span> <span class="ow">in</span> <span class="n">PLOT_AMOUNTS</span><span class="p">]</span>
<span class="n">GREEDY_FRAME</span><span class="p">[</span><span class="s2">"Iterative"</span><span class="p">]</span> <span class="o">=</span> <span class="n">centaur_counts</span>
<span class="n">melted</span> <span class="o">=</span> <span class="n">GREEDY_FRAME</span><span class="o">.</span><span class="n">melt</span><span class="p">(</span><span class="n">id_vars</span><span class="o">=</span><span class="p">[</span><span class="s2">"Amount to Change"</span><span class="p">],</span>
			   <span class="n">value_vars</span><span class="o">=</span><span class="p">[</span><span class="s2">"Greedy"</span><span class="p">,</span> <span class="s2">"Cashier"</span><span class="p">,</span> <span class="s2">"Brute-Force"</span><span class="p">,</span>
				       <span class="s2">"Memoized"</span><span class="p">,</span> <span class="s2">"Iterative"</span><span class="p">],</span>
			   <span class="n">var_name</span><span class="o">=</span><span class="s2">"Change Method"</span><span class="p">,</span>
			   <span class="n">value_name</span><span class="o">=</span><span class="s2">"Loop Count"</span><span class="p">)</span>

<span class="n">chart</span> <span class="o">=</span> <span class="n">altair</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">melted</span><span class="p">)</span><span class="o">.</span><span class="n">mark_line</span><span class="p">(</span><span class="n">point</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">x</span><span class="o">=</span><span class="s2">"Amount to Change"</span><span class="p">,</span>
    <span class="n">y</span><span class="o">=</span><span class="n">altair</span><span class="o">.</span><span class="n">Y</span><span class="p">(</span><span class="s2">"Loop Count"</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="n">altair</span><span class="o">.</span><span class="n">Axis</span><span class="p">(</span><span class="n">tickMinStep</span><span class="o">=</span><span class="mi">1</span><span class="p">)),</span>
    <span class="n">tooltip</span><span class="o">=</span><span class="p">[</span><span class="s2">"Amount to Change"</span><span class="p">,</span> <span class="s2">"Loop Count"</span><span class="p">,</span> <span class="s2">"Change Method"</span><span class="p">],</span>
    <span class="n">color</span><span class="o">=</span><span class="s2">"Change Method"</span><span class="p">)</span><span class="o">.</span><span class="n">properties</span><span class="p">(</span>
	<span class="n">title</span><span class="o">=</span><span class="s2">"Coin Change Counts (Common U.S. Coins)"</span><span class="p">,</span>
	<span class="n">width</span><span class="o">=</span><span class="n">PlotParameters</span><span class="o">.</span><span class="n">width</span><span class="p">,</span>
	<span class="n">height</span><span class="o">=</span><span class="n">PlotParameters</span><span class="o">.</span><span class="n">height</span><span class="p">,</span>
    <span class="p">)</span>

<span class="n">save_it</span><span class="p">(</span><span class="n">chart</span><span class="p">,</span> <span class="s2">"all-change-us-coins"</span><span class="p">)</span>
</pre></div>

<object type="text/html" data="posts/the-coin-changing-problem/all-change-us-coins.html" style="width:100%" height="600">
  <p>Figure Missing</p>
</object>

<p>
Since I'm filling out the whole table for the iterative function the loop is dependent on the amount of change owed, not the number of coin-denominations as with the other functions so it increases linearly. There's something I'm missing here as to why either the memoized-version is incorrect or there is an advantage to using the iterative version, but I haven't figured it out yet. The solutions seem to be the same in either case, though, and the linear growth for the number of loops is still tractable so I'll move on for now.
</p>
</div>
</div>
</div>

<div id="outline-container-org4eabbd7" class="outline-2">
<h2 id="org4eabbd7">Sources</h2>
<div class="outline-text-2" id="text-org4eabbd7">
<ul class="org-ul">
<li>[LATPAPS] <a href="posts/latpaps/">Learning Algorithms Through Programming and Problem Solving</a>
</li>
</ul>
<script>
window.addEventListener('load', function () {
    pseudocode.renderElement(document.getElementById("cashiers-algorithm"));
});
</script><script>
window.addEventListener('load', function () {
    pseudocode.renderElement(document.getElementById("greedy-algorithm"));
});
</script>
</div>
</div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/course-global-warming/index.html" class="u-url">Global Warming I: The Science and Modeling of Climate Change</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                The Cloistered Monkey
            </span></p>
            <p class="dateline">
            <a href="posts/course-global-warming/index.html" rel="bookmark">
            <time class="published dt-published" datetime="2022-06-15T18:51:20-07:00" itemprop="datePublished" title="2022-06-15 18:51">2022-06-15 18:51</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <div id="outline-container-orga360e25" class="outline-2">
<h2 id="orga360e25">Syllabus</h2>
<div class="outline-text-2" id="text-orga360e25">
</div>
<div id="outline-container-org18d4881" class="outline-3">
<h3 id="org18d4881">Overview</h3>
</div>
<div id="outline-container-orgfac7d87" class="outline-3">
<h3 id="orgfac7d87">Heat, Light, and Energy</h3>
</div>
<div id="outline-container-orgf5661fc" class="outline-3">
<h3 id="orgf5661fc">First Climate Model</h3>
</div>
<div id="outline-container-org6520577" class="outline-3">
<h3 id="org6520577">Greenhouse Gasses and the Atmosphere</h3>
</div>
</div>
<div id="outline-container-orga0f9f15" class="outline-2">
<h2 id="orga0f9f15">Source</h2>
<div class="outline-text-2" id="text-orga0f9f15">
<ul class="org-ul">
<li>Global Warming I: The Science and Modeling of Climate Change [Internet]. Coursera. [cited 2022 Jun 15]. Available from: <a href="https://www.coursera.org/learn/global-warming">https://www.coursera.org/learn/global-warming</a>
</li>
</ul>
</div>
</div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/how-much-coal-to-power-a-light-bulb/index.html" class="u-url">How much coal does it take to power a light bulb?</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                The Cloistered Monkey
            </span></p>
            <p class="dateline">
            <a href="posts/how-much-coal-to-power-a-light-bulb/index.html" rel="bookmark">
            <time class="published dt-published" datetime="2022-06-15T17:28:30-07:00" itemprop="datePublished" title="2022-06-15 17:28">2022-06-15 17:28</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="posts/how-much-coal-to-power-a-light-bulb/index.html#org0242a57">How many Joules of energy does it take to power a 100 Watt light bulb for one day?</a></li>
<li><a href="posts/how-much-coal-to-power-a-light-bulb/index.html#org061d51b">Double-Check The Math</a></li>
<li><a href="posts/how-much-coal-to-power-a-light-bulb/index.html#org13d62e6">Source</a></li>
</ul>
</div>
</div>
<div id="outline-container-org0242a57" class="outline-2">
<h2 id="org0242a57">How many Joules of energy does it take to power a 100 Watt light bulb for one day?</h2>
<div class="outline-text-2" id="text-org0242a57">
<p>
<b><b>Given:</b></b>
</p>

<p>
\[
1 Watt = 1 \frac{Joule}{Second}
\]
</p>

<p>
For a 100 Watt Bulb:
</p>

<p>
\[
\require{cancel}
(100 \cancel{Watt})\left(1 \frac{\frac{Joule}{Second}}{\cancel{Watt}}\right) = 100 \frac{Joule}{Second}
\]
</p>

<p>
For One Minute:
</p>

<p>
\[
\left(100 \frac{Joule}{\cancel{Second}}\right) \left(60 \frac{\cancel{Second}}{Minute}\right) = 6{,}000 \frac{Joule}{Minute}
\]
</p>

<p>
For One Hour:
</p>

<p>
\[
\left(6 \times 10^3 \frac{Joule}{\cancel{Minute}}\right)\left(60 \frac{\cancel{Minute}}{Hour}\right) = 3.6 \times 10^5 \frac{Joule}{Hour}
\]
</p>

<p>
For One Day:
</p>

<p>
\[
\left(3.6 \times 10^5 \frac{Joule}{\cancel{Hour}}\right)\left(24 \frac{\cancel{Hour}}{Day}\right) = 8.64 \times 10^6 \frac{Joule}{Day}
\]
</p>
</div>
</div>

<div id="outline-container-org061d51b" class="outline-2">
<h2 id="org061d51b">Double-Check The Math</h2>
<div class="outline-text-2" id="text-org061d51b">
<div class="highlight"><pre><span></span><span class="n">bulb</span> <span class="o">=</span> <span class="mi">100</span> <span class="c1"># Watt (Joule/Second)</span>
<span class="n">per_minute</span> <span class="o">=</span> <span class="n">bulb</span> <span class="o">*</span> <span class="mi">60</span> <span class="c1"># Second/Minute</span>
<span class="n">per_hour</span> <span class="o">=</span> <span class="n">per_minute</span> <span class="o">*</span> <span class="mi">60</span> <span class="c1"># Minute/Hour</span>
<span class="n">per_day</span> <span class="o">=</span> <span class="n">per_hour</span> <span class="o">*</span> <span class="mi">24</span> <span class="c1"># Hour/Day</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"A 100 Watt Light bulb uses </span><span class="si">{</span><span class="n">per_day</span><span class="si">:</span><span class="s2">0.2e</span><span class="si">}</span><span class="s2"> Joules per day."</span><span class="p">)</span>
</pre></div>

<pre class="example">
A 100 Watt Light bulb uses 8.64e+06 Joules per day.
</pre>
</div>
</div>
<div id="outline-container-org13d62e6" class="outline-2">
<h2 id="org13d62e6">Source</h2>
<div class="outline-text-2" id="text-org13d62e6">
<ul class="org-ul">
<li><a href="posts/course-global-warming/">Global Warming I: The Science and Modeling of Climate Change</a></li>
</ul>
</div>
</div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/the-rod-cutting-problem/index.html" class="u-url">The Rod Cutting Problem</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                The Cloistered Monkey
            </span></p>
            <p class="dateline">
            <a href="posts/the-rod-cutting-problem/index.html" rel="bookmark">
            <time class="published dt-published" datetime="2022-05-29T15:21:31-07:00" itemprop="datePublished" title="2022-05-29 15:21">2022-05-29 15:21</time></a>
            </p>
        </div>
    </header><div class="e-content entry-content">
    <div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li>
<a href="posts/the-rod-cutting-problem/index.html#orgd7c59b0">The Rod Cutting Problem</a>
<ul>
<li><a href="posts/the-rod-cutting-problem/index.html#org9876d49">An Example</a></li>
<li><a href="posts/the-rod-cutting-problem/index.html#org5729156">Imports</a></li>
</ul>
</li>
<li>
<a href="posts/the-rod-cutting-problem/index.html#orgcc041bb">Brute Force</a>
<ul>
<li>
<a href="posts/the-rod-cutting-problem/index.html#org782931f">The CLRS Brute-Force Solution</a>
<ul>
<li><a href="posts/the-rod-cutting-problem/index.html#org6013174">In Python</a></li>
<li><a href="posts/the-rod-cutting-problem/index.html#org9e83fd1">The First Example</a></li>
</ul>
</li>
</ul>
</li>
<li>
<a href="posts/the-rod-cutting-problem/index.html#org598f1e5">Memoized Cut Rod</a>
<ul>
<li><a href="posts/the-rod-cutting-problem/index.html#org81ae656">Cut Rod Memoized</a></li>
<li><a href="posts/the-rod-cutting-problem/index.html#orge6fad96">Cut Rod Memoized Auxiliary</a></li>
<li><a href="posts/the-rod-cutting-problem/index.html#org1fa0ffe">Python Version</a></li>
<li><a href="posts/the-rod-cutting-problem/index.html#org76274e9">Example</a></li>
</ul>
</li>
<li>
<a href="posts/the-rod-cutting-problem/index.html#org6c9eb59">Non-Recursive Solution</a>
<ul>
<li><a href="posts/the-rod-cutting-problem/index.html#org2ba85d4">Python Version</a></li>
<li><a href="posts/the-rod-cutting-problem/index.html#org0f6686d">The Example Again</a></li>
</ul>
</li>
<li>
<a href="posts/the-rod-cutting-problem/index.html#org26c8df2">Recovering the Cuts</a>
<ul>
<li>
<a href="posts/the-rod-cutting-problem/index.html#orgda72064">Pseudocode</a>
<ul>
<li><a href="posts/the-rod-cutting-problem/index.html#orge746091">Extended Bottoms-Up</a></li>
<li><a href="posts/the-rod-cutting-problem/index.html#org7d91744">Printing the Solution</a></li>
</ul>
</li>
<li><a href="posts/the-rod-cutting-problem/index.html#orgf5722c3">In Python</a></li>
<li><a href="posts/the-rod-cutting-problem/index.html#orgc6f183c">CLRS Example</a></li>
</ul>
</li>
<li><a href="posts/the-rod-cutting-problem/index.html#orgf18cabd">Sources</a></li>
</ul>
</div>
</div>
<div id="outline-container-orgd7c59b0" class="outline-2">
<h2 id="orgd7c59b0">The Rod Cutting Problem</h2>
<div class="outline-text-2" id="text-orgd7c59b0">
<p>
The Rod Cutting Problem begins with the premise that we have a metal rod (or some other kind of rod that's sellable) of a given length (<i>n</i>) and the price of a rod depends on the length so cutting the rod into shorter pieces will yield different total values - sometimes cutting a rod up make it more valuable than keeping it whole.
</p>

<p>
<b><b>Goal:</b></b> Cut the rod in such a way that you maximize the total value of the pieces.
</p>

<p>
To make this simpler we'll assume that lengths are always whole numbers (non-negative integers).
</p>
</div>

<div id="outline-container-org9876d49" class="outline-3">
<h3 id="org9876d49">An Example</h3>
<div class="outline-text-3" id="text-org9876d49">
<p>
Say we have the following prices for different rod lengths.
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<colgroup>
<col class="org-left">
<col class="org-right">
<col class="org-right">
<col class="org-right">
<col class="org-right">
<col class="org-right">
<col class="org-right">
<col class="org-right">
<col class="org-right">
</colgroup>
<tbody>
<tr>
<td class="org-left">Length</td>
<td class="org-right">1</td>
<td class="org-right">2</td>
<td class="org-right">3</td>
<td class="org-right">4</td>
<td class="org-right">5</td>
<td class="org-right">6</td>
<td class="org-right">7</td>
<td class="org-right">8</td>
</tr>
<tr>
<td class="org-left">Value</td>
<td class="org-right">1</td>
<td class="org-right">5</td>
<td class="org-right">8</td>
<td class="org-right">9</td>
<td class="org-right">10</td>
<td class="org-right">17</td>
<td class="org-right">17</td>
<td class="org-right">20</td>
</tr>
</tbody>
</table>
<p>
Now suppose we have a rod that's 10 units in length. what combination of cuts will give us the best outcome?
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<colgroup>
<col class="org-left">
<col class="org-left">
<col class="org-right">
</colgroup>
<thead><tr>
<th scope="col" class="org-left">cuts</th>
<th scope="col" class="org-left">values by piece</th>
<th scope="col" class="org-right">total value</th>
</tr></thead>
<tbody>
<tr>
<td class="org-left">10 pieces of length 1</td>
<td class="org-left">10 x 1</td>
<td class="org-right">10</td>
</tr>
<tr>
<td class="org-left">2 pieces of length 5</td>
<td class="org-left">2 x 10</td>
<td class="org-right">20</td>
</tr>
<tr>
<td class="org-left">1 piece 8, 1 piece 2</td>
<td class="org-left">20 + 5</td>
<td class="org-right">25</td>
</tr>
<tr>
<td class="org-left">1 piece 6, 1 piece 4</td>
<td class="org-left">17 + 9</td>
<td class="org-right">26</td>
</tr>
</tbody>
</table>
<p>
Out of these four possible combinations, 26 is the most we could get.
</p>
</div>
</div>

<div id="outline-container-org5729156" class="outline-3">
<h3 id="org5729156">Imports</h3>
<div class="outline-text-3" id="text-org5729156">
<div class="highlight"><pre><span></span><span class="c1"># from pypi</span>
<span class="kn">from</span> <span class="nn">expects</span> <span class="kn">import</span> <span class="n">contain_exactly</span><span class="p">,</span> <span class="n">equal</span><span class="p">,</span> <span class="n">expect</span>
</pre></div>
</div>
</div>
</div>
<div id="outline-container-orgcc041bb" class="outline-2">
<h2 id="orgcc041bb">Brute Force</h2>
<div class="outline-text-2" id="text-orgcc041bb">
<p>
In the previous example we could choose to make one cut, splitting our rod into 6 units and 4 units, and it would give us the highest value of the four combinations that we looked at. but what if we want to know the highest value out of <i>all</i> the combinations? Let's start by looking at a Brute-force approach to solving the problem.
</p>

<p>
A Brute Force approach to finding the maximal cuts might do the following:
</p>

<ul class="org-ul">
<li>Try every possible combination of cuts</li>
<li>Evaluate the total values for each of the combinations</li>
<li>Pick the combination with the highest total value</li>
</ul>
<p>
What will the runtime for this approach be? Let's start with two ideas:
</p>

<ul class="org-ul">
<li>Each cut location can have two values (cut, don't cut) so it is a binary value</li>
<li>Given a rod of length <i>n</i>, there are <i>n - 1</i> possible cuts you can make (e.g. if your rod has length three, you can make two cuts (at length 1 and length 2) to give you three pieces)</li>
</ul>
<p>
Although we are concerned with cuts, to get the total number of combinations you can think of each cut as a binary digit - (e.g. cut at length 1, don't cut at length 2 could be written as two digits: <code>10</code>) and since the number of combinations of binary digits is \(2^{\textit{number of digits}}\), this means that if we do an exhaustive exploration of the combinations we need to check
</p>

\begin{align}
2^{n - 1} &amp;= \left(2^{-1}\right)\left(2^n\right) \\
&amp;= \frac{1}{2}2^n\\

T(n) &amp;= \Theta\left(2^n\right)
\end{align}

<p>
So we have a problem with exponential growth.
</p>
</div>
<div id="outline-container-org782931f" class="outline-3">
<h3 id="org782931f">The CLRS Brute-Force Solution</h3>
<div class="outline-text-3" id="text-org782931f">
<p>
First, let's define some variables.
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<colgroup>
<col class="org-left">
<col class="org-left">
</colgroup>
<thead><tr>
<th scope="col" class="org-left">Variable</th>
<th scope="col" class="org-left">Representing</th>
</tr></thead>
<tbody>
<tr>
<td class="org-left">\(i\)</td>
<td class="org-left">Number of units of length of the rod</td>
</tr>
<tr>
<td class="org-left">\(p_i\)</td>
<td class="org-left">Price for rod of length \(i\)</td>
</tr>
<tr>
<td class="org-left">\(r_n\)</td>
<td class="org-left">Revenue for rod segments with total length \(n\)</td>
</tr>
<tr>
<td class="org-left">\(q\)</td>
<td class="org-left">Maximum possible revenue for a particular length</td>
</tr>
</tbody>
</table>
<p>
And now a little pseudocode.
</p>

<pre id="cut-rod-brute-force" style="display:hidden;">
\begin{algorithm}
\caption{Brute-Force Rod-Cutting}
\begin{algorithmic}
\INPUT Array $p[0 \ldots n]$ of prices mapped to length by index
\INPUT Integer $n$ the length of the rod
\OUTPUT $q$ the highest value for the combinations of rods totaling $n$ in length

\PROCEDURE{CutRodBruteForce}{$p, n$}
\IF {$n = 0$}
  \RETURN 0
\ENDIF

\STATE $q \gets -\inf$
\FOR {$i \in \{1 \ldots n\}$}
  \STATE $q \gets $ \textsc{Max}($q, p[i]$ + \textsc{CutRodBruteForce}($p, n - i$))
\ENDFOR
\RETURN $q$
\ENDPROCEDURE
\end{algorithmic}
\end{algorithm}
</pre>
</div>

<div id="outline-container-org6013174" class="outline-4">
<h4 id="org6013174">In Python</h4>
<div class="outline-text-4" id="text-org6013174">
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">cut_rod_brute_force</span><span class="p">(</span><span class="n">prices</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span> <span class="n">length</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">count</span><span class="p">:</span> <span class="nb">int</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""Finds the maximum value you can extract from the rod</span>

<span class="sd">    Args:</span>
<span class="sd">     prices: map of length to price</span>
<span class="sd">     length: total length of the rod before cutting</span>
<span class="sd">     count: number of calls made</span>

<span class="sd">    Returns:</span>
<span class="sd">     the best total price you would get from cutting and selling the rod</span>
<span class="sd">    """</span>
    <span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">if</span> <span class="n">length</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
	<span class="k">return</span> <span class="mi">0</span><span class="p">,</span> <span class="n">count</span>

    <span class="n">best_total</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="s2">"-inf"</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">next_cut</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">length</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
	<span class="n">next_total</span><span class="p">,</span> <span class="n">count</span> <span class="o">=</span> <span class="n">cut_rod_brute_force</span><span class="p">(</span>
	    <span class="n">prices</span><span class="p">,</span> <span class="n">length</span> <span class="o">-</span> <span class="n">next_cut</span><span class="p">,</span> <span class="n">count</span><span class="o">=</span><span class="n">count</span><span class="p">)</span>
	<span class="n">best_total</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">best_total</span><span class="p">,</span>
			 <span class="n">prices</span><span class="p">[</span><span class="n">next_cut</span><span class="p">]</span> <span class="o">+</span> <span class="n">next_total</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">best_total</span><span class="p">,</span> <span class="n">count</span>
</pre></div>

<p>
This naively assumes that there's an entry in <code>prices</code> for every length from 1 to the total length so price-lists need to be padded if there's missing lengths, as in the next example.
</p>
</div>
</div>

<div id="outline-container-org9e83fd1" class="outline-4">
<h4 id="org9e83fd1">The First Example</h4>
<div class="outline-text-4" id="text-org9e83fd1">
<p>
The first thing we're going to do is to check the example given earlier, padding the price-list to make it have 10 entries. I originally had it just short-circuit if the list was shorter but then the counts were off by a little bit so I decided to get rid of that. It might make it slightly more efficient in certain cases, but brute-force isn't really what we're going for anyway.
</p>

<div class="highlight"><pre><span></span><span class="n">PRICES</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
<span class="n">best_total</span><span class="p">,</span> <span class="n">count</span> <span class="o">=</span> <span class="n">cut_rod_brute_force</span><span class="p">(</span><span class="n">PRICES</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="n">expect</span><span class="p">(</span><span class="n">best_total</span><span class="p">)</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">equal</span><span class="p">(</span><span class="mi">27</span><span class="p">))</span>
<span class="n">expect</span><span class="p">(</span><span class="n">count</span><span class="p">)</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">equal</span><span class="p">(</span><span class="mi">2</span><span class="o">**</span><span class="mi">10</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Best Total Value: </span><span class="si">{</span><span class="n">best_total</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Count: </span><span class="si">{</span><span class="n">count</span><span class="si">:</span><span class="s2">,</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Combinations: </span><span class="si">{</span><span class="mi">2</span><span class="o">**</span><span class="mi">10</span><span class="si">:</span><span class="s2">,</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
</pre></div>

<pre class="example">
Best Total Value: 27
Count: 1,024
Combinations: 1,024
</pre>


<p>
So our actual best value is 27, not the 26 from the sub-set of combinations I used in the earlier example.
</p>
</div>
</div>
</div>
</div>
<div id="outline-container-org598f1e5" class="outline-2">
<h2 id="org598f1e5">Memoized Cut Rod</h2>
<div class="outline-text-2" id="text-org598f1e5">
<p>
The main reason why our brute-force version is so expensive is that it does all the calculations for every length over and over again when we test the different combinations. One way to get around this is by storing the values as they're calculated so that we can just look them up instead of repeating the calculations.
</p>

<p>
This first version is very similar to the brute-force version except that the brute-force version makes a recursive call for every length we check, while for this memoized version we maintain an array to store previously calculated values and if the next one we want is in it we pull it from the array instead of making another recursive call.
</p>
</div>

<div id="outline-container-org81ae656" class="outline-3">
<h3 id="org81ae656">Cut Rod Memoized</h3>
<div class="outline-text-3" id="text-org81ae656">
<p>
This first function is sort of a mask to make it look like the brute-force version. It sets up an empty memo table (as an array) and then passes it to the <code>CutRodMemoizedAuxiliary</code> function to do the actual calculations.
</p>

<pre id="cut-rod-memoized" style="display:hidden;">
\begin{algorithm}
\caption{Memoized Rod-Cutting}
\begin{algorithmic}
\INPUT Array $p[0 \ldots n]$ of prices mapped to length by index
\INPUT Integer $n$ the length of the rod to cut
\OUTPUT $q$ the highest value for the combinations of rods totaling $n$ in length

\PROCEDURE{CutRodMemoized}{$p, n$}
\STATE Let $r[0 \ldots n]$ be a new array.
\FOR {$i \in \{0\ldots n\}$}
  \STATE $r[i]\gets -\infty$
\ENDFOR
\RETURN \textsc{CutRodMemoizedAuxiliary}($p, n, r$)
\ENDPROCEDURE
\end{algorithmic}
\end{algorithm}
</pre>
</div>
</div>
<div id="outline-container-orge6fad96" class="outline-3">
<h3 id="orge6fad96">Cut Rod Memoized Auxiliary</h3>
<div class="outline-text-3" id="text-orge6fad96">
<pre id="cut-rod-memoized-auxiliary" style="display:hidden;">
\begin{algorithm}
\caption{Memoized Rod-Cutting Auxiliary}
\begin{algorithmic}
\INPUT Array $p[0 \ldots n]$ of prices mapped to length by index
\INPUT Integer $n$ the length of the rod to cut
\INPUT Array $r$ of previously calculated values
\OUTPUT $q$ the highest value for the combinations of rods totaling $n$ in length

\PROCEDURE{CutRodMemoizedAuxiliary}{$p, n, r$}
\IF {$r[n] \geq 0$}
  \RETURN $r[n]$
\ENDIF

\IF {$n=0$}
  \STATE $q \gets 0$
\ELSE
  \STATE $q \gets -\infty$

  \FOR {$i \in \{1 \ldots n\}$}
    \STATE $q \gets$ \textsc{Max}($q, p[i] + $ \textsc{CutRodMemoizedAuxiliary}($p, n-i, r$))
  \ENDFOR
\ENDIF

\STATE $r[n] \gets q$

\RETURN q
\ENDPROCEDURE
\end{algorithmic}
\end{algorithm}
</pre>

<p>
If you squint at <code>CutRodMemoizedAuxiliary</code> you might notice that it looks similar to the brute-force version except that there's an initial check to see if the value we want is already in our lookup-table and only makes the recursive call if it isn't.
</p>
</div>
</div>
<div id="outline-container-org1fa0ffe" class="outline-3">
<h3 id="org1fa0ffe">Python Version</h3>
<div class="outline-text-3" id="text-org1fa0ffe">
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">cut_rod_memoized</span><span class="p">(</span><span class="n">prices</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span> <span class="n">length</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""Finds the maximum value for a rod after it has been cut up</span>

<span class="sd">    Args:</span>
<span class="sd">     prices: map of length to price</span>
<span class="sd">     length: the length of the rod to be cut up</span>

<span class="sd">    Returns:</span>
<span class="sd">     the maximum value that can be gained by cutting up and selling the rod</span>
<span class="sd">    """</span>
    <span class="n">table</span> <span class="o">=</span> <span class="p">[</span><span class="nb">float</span><span class="p">(</span><span class="s2">"-inf"</span><span class="p">)]</span> <span class="o">*</span> <span class="p">(</span><span class="n">length</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">cut_rod_memoized_auxiliary</span><span class="p">(</span><span class="n">prices</span><span class="p">,</span> <span class="n">length</span><span class="p">,</span> <span class="n">table</span><span class="p">)</span>
</pre></div>

<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">cut_rod_memoized_auxiliary</span><span class="p">(</span><span class="n">prices</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span> <span class="n">length</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">best_values</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span> <span class="n">count</span><span class="p">:</span> <span class="nb">int</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""Find the maximum value from cutting up and selling rod</span>

<span class="sd">    Args:</span>
<span class="sd">     prices: map of length to price</span>
<span class="sd">     length: the length of the rod to be cut up</span>
<span class="sd">     best_values: lookup-table for previously calculated values (index is starting length)</span>

<span class="sd">    Returns:</span>
<span class="sd">     the maximum value that can be gained by cutting up and selling the rod</span>
<span class="sd">    """</span>
    <span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">if</span> <span class="n">best_values</span><span class="p">[</span><span class="n">length</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
	<span class="k">return</span> <span class="n">best_values</span><span class="p">[</span><span class="n">length</span><span class="p">],</span> <span class="n">count</span>

    <span class="k">if</span> <span class="n">length</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
	<span class="n">best_total</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">else</span><span class="p">:</span>
	<span class="n">best_total</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="s2">"-inf"</span><span class="p">)</span>
	<span class="k">for</span> <span class="n">next_cut</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">length</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
	    <span class="n">leftover</span> <span class="o">=</span> <span class="n">length</span> <span class="o">-</span> <span class="n">next_cut</span>
	    <span class="n">next_total</span><span class="p">,</span> <span class="n">count</span> <span class="o">=</span> <span class="n">cut_rod_memoized_auxiliary</span><span class="p">(</span><span class="n">prices</span><span class="p">,</span>
							   <span class="n">leftover</span><span class="p">,</span>
							   <span class="n">best_values</span><span class="p">,</span>
							   <span class="n">count</span><span class="p">)</span>
	    <span class="n">best_total</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">best_total</span><span class="p">,</span>
			     <span class="n">prices</span><span class="p">[</span><span class="n">next_cut</span><span class="p">]</span> <span class="o">+</span> <span class="n">next_total</span><span class="p">)</span>
    <span class="n">best_values</span><span class="p">[</span><span class="n">length</span><span class="p">]</span> <span class="o">=</span> <span class="n">best_total</span>
    <span class="k">return</span> <span class="n">best_total</span><span class="p">,</span> <span class="n">count</span>
</pre></div>

<div class="highlight"><pre><span></span><span class="n">best_total</span><span class="p">,</span> <span class="n">count</span> <span class="o">=</span> <span class="n">cut_rod_memoized</span><span class="p">(</span><span class="n">PRICES</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Best Total Value: </span><span class="si">{</span><span class="n">best_total</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Count: </span><span class="si">{</span><span class="n">count</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
</pre></div>

<pre class="example">
Best Total Value: 10
Count: 11
</pre>


<div class="highlight"><pre><span></span><span class="n">best_total</span><span class="p">,</span> <span class="n">count</span> <span class="o">=</span> <span class="n">cut_rod_memoized</span><span class="p">(</span><span class="n">PRICES</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Best Total Value: </span><span class="si">{</span><span class="n">best_total</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Count: </span><span class="si">{</span><span class="n">count</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
</pre></div>

<pre class="example">
Best Total Value: 13
Count: 16
</pre>
</div>
</div>


<div id="outline-container-org76274e9" class="outline-3">
<h3 id="org76274e9">Example</h3>
<div class="outline-text-3" id="text-org76274e9">
<div class="highlight"><pre><span></span><span class="n">best_total</span><span class="p">,</span> <span class="n">count</span> <span class="o">=</span> <span class="n">cut_rod_memoized</span><span class="p">(</span><span class="n">PRICES</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="n">expect</span><span class="p">(</span><span class="n">best_total</span><span class="p">)</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">equal</span><span class="p">(</span><span class="mi">27</span><span class="p">))</span>
<span class="n">expect</span><span class="p">(</span><span class="n">count</span><span class="p">)</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">equal</span><span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="p">(</span><span class="mi">10</span> <span class="o">*</span> <span class="mi">11</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Best Total Value: </span><span class="si">{</span><span class="n">best_total</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Count: </span><span class="si">{</span><span class="n">count</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
</pre></div>

<pre class="example">
Best Total Value: 27
Count: 56
</pre>


<p>
We've gone from 1,024 calls to 56 calls, a pretty good improvement. The number of calls comes from the for loop plus one for the initial call. The for loop goes from 1 through the length of the rod, but passes in the difference between the starting length and the loop value. So if we start with a length of 4, the for-loop makes recursive calls using lengths of 4-1=3, 4-2=2, 4-3=1, 4-4=0. But then each of the calls goes through the for-loop as well (except for the base-case of 0). Since the first call of the for-loop is always one less than the starting length, we end up memoizing the values for all the starting lengths as we go so the subsequent calls don't need to go into the for-loop. So the number of calls we make equals \(1 + 2 + \cdots + n\) plus one for the first call before the recursion starts. This means the runtime is
</p>

<p>
\[
1 + \sum_{i=1}^n i = 1 + \frac{n(n+1)}{2} \Rightarrow O(n^2)
\]
</p>

<p>
So for our case with length 10, we have
</p>

\begin{align}
T(10) &amp;= \frac{10(10 + 1)}{2} + 1\\
      &amp;= 56
\end{align}
</div>
</div>
</div>

<div id="outline-container-org6c9eb59" class="outline-2">
<h2 id="org6c9eb59">Non-Recursive Solution</h2>
<div class="outline-text-2" id="text-org6c9eb59">
<p>
The memoized cut-rod solution is a top-down, depth-first search solution that uses recursion. We can eliminate the recursion altogether using a for-loop along with our look-up array. The trick is to make it a bottoms-up approach - that is to say that we start with the solutions for the smaller lengths and work up to the longer ones so that the look-up array always has the sub-problem values that we need to look up.
</p>

<pre id="cut-rod-bottoms-up" style="display:hidden;">
\begin{algorithm}
\caption{Bottoms-Up Rod-Cutting}
\begin{algorithmic}
\INPUT Array $p[0 \ldots n]$ of prices mapped to length by index
\INPUT Integer $n$ the length of the rod to cut
\OUTPUT $q$ the highest value for the combinations of rods totaling $n$ in length

\PROCEDURE{CutRodBottomsUp}{$p, n$}
\STATE Let $r[0\ldots n]$ be a new array.
\STATE $r[0] \gets 0$

  \FOR {$j \in \{1 \ldots n\}$}
    \STATE $q \gets -\infty$
    \FOR {$i \in \{1 \ldots j\}$}
      \STATE $q \gets$ \textsc{Max}($q, p[i] + r[j - i]$)
    \ENDFOR
    \STATE $r[j] \gets q$
  \ENDFOR
\RETURN $r[n]$
\ENDPROCEDURE
\end{algorithmic}
\end{algorithm}
</pre>
</div>

<div id="outline-container-org2ba85d4" class="outline-3">
<h3 id="org2ba85d4">Python Version</h3>
<div class="outline-text-3" id="text-org2ba85d4">
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">cut_rod_bottom_up</span><span class="p">(</span><span class="n">prices</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span> <span class="n">length</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""Find the maximum value for a rod after cutting</span>

<span class="sd">    Args:</span>
<span class="sd">     prices: map of length to price</span>
<span class="sd">     length: total length of rod to cut up</span>

<span class="sd">    Returns:</span>
<span class="sd">     best-value, count</span>
<span class="sd">    """</span>
    <span class="n">count</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">best_values</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="p">(</span><span class="n">length</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">rod_length</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">length</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
	<span class="n">best_value_this_length</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="s2">"-inf"</span><span class="p">)</span>
	<span class="k">for</span> <span class="n">cut_length</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">rod_length</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
	    <span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>
	    <span class="n">leftover</span> <span class="o">=</span> <span class="n">rod_length</span> <span class="o">-</span> <span class="n">cut_length</span>
	    <span class="n">best_value_this_length</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span>
		<span class="n">best_value_this_length</span><span class="p">,</span>
		<span class="n">prices</span><span class="p">[</span><span class="n">cut_length</span><span class="p">]</span> <span class="o">+</span> <span class="n">best_values</span><span class="p">[</span><span class="n">leftover</span><span class="p">])</span>
	<span class="n">best_values</span><span class="p">[</span><span class="n">rod_length</span><span class="p">]</span> <span class="o">=</span> <span class="n">best_value_this_length</span>
    <span class="k">return</span> <span class="n">best_values</span><span class="p">[</span><span class="n">length</span><span class="p">],</span> <span class="n">count</span>
</pre></div>
</div>
</div>

<div id="outline-container-org0f6686d" class="outline-3">
<h3 id="org0f6686d">The Example Again</h3>
<div class="outline-text-3" id="text-org0f6686d">
<div class="highlight"><pre><span></span><span class="n">best_total</span><span class="p">,</span> <span class="n">count</span> <span class="o">=</span> <span class="n">cut_rod_bottom_up</span><span class="p">(</span><span class="n">PRICES</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="n">expect</span><span class="p">(</span><span class="n">best_total</span><span class="p">)</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">equal</span><span class="p">(</span><span class="mi">27</span><span class="p">))</span>
<span class="n">expect</span><span class="p">(</span><span class="n">count</span><span class="p">)</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">equal</span><span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="mi">110</span><span class="o">/</span><span class="mi">2</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Best Total Value: </span><span class="si">{</span><span class="n">best_total</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Count: </span><span class="si">{</span><span class="n">count</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
</pre></div>

<pre class="example">
Best Total Value: 27
Count: 56
</pre>


<p>
The runtime for this version is the same as the memoized version. It's sort of the backwards case - the inner for-loop runs 1 then 1, 2, then 1, 2, 3 up to the length of the rod, so the number of times it runs is \(1 + 2 + 3 + \cdots + n\) while the memoized count goes \(n + \cdots + 3 + 2 + 1\). In any case, the count ends up the same.
</p>

<p>
\[
1 + \sum_{i=1}^n i = 1 + \frac{n(n+1)}{2} \Rightarrow O(n^2)
\]
</p>
</div>
</div>
</div>

<div id="outline-container-org26c8df2" class="outline-2">
<h2 id="org26c8df2">Recovering the Cuts</h2>
<div class="outline-text-2" id="text-org26c8df2">
<p>
The previous functions all return the best value for a length but don't tell you the actual cuts that you need in order to get it. We can alter the function slightly to get both the best-revenue table and the cuts you need to use to get the best value.
</p>
</div>

<div id="outline-container-orgda72064" class="outline-3">
<h3 id="orgda72064">Pseudocode</h3>
<div class="outline-text-3" id="text-orgda72064">
</div>
<div id="outline-container-orge746091" class="outline-4">
<h4 id="orge746091">Extended Bottoms-Up</h4>
<div class="outline-text-4" id="text-orge746091">
<pre id="cut-rod-extended" style="display:hidden;">
\begin{algorithm}
\caption{Extended Bottoms-Up Rod-Cutting}
\begin{algorithmic}
\INPUT Array $p[0 \ldots n]$ of prices mapped to length by index
\INPUT Integer $n$ the length of the rod to cut
\OUTPUT $r$ the best revenue for each length
\OUTPUT $s$ list of next cut-lengths to use to get best revenue

\PROCEDURE{CutRodBottomsUpExtended}{$p, n$}
\STATE Let $r[0\ldots n]$ and $s[0 \ldots n]$ be new arrays.
\STATE $r[0] \gets 0$

  \FOR {$j \in \{1 \ldots n\}$}
    \STATE $q \gets -\infty$
    \FOR {$i \in \{1 \ldots j\}$}
      \IF {$q &lt; p[i] + r[j - i]$}
                \STATE $q \gets p[i] + r[j - i]$)
                \STATE $s[j] \gets i$
      \ENDIF
    \ENDFOR
    \STATE $r[j] \gets q$
  \ENDFOR
\RETURN $(r, s)$
\ENDPROCEDURE
\end{algorithmic}
\end{algorithm}
</pre>
</div>
</div>

<div id="outline-container-org7d91744" class="outline-4">
<h4 id="org7d91744">Printing the Solution</h4>
<div class="outline-text-4" id="text-org7d91744">
<p>
To actually see the cuts we just need to retrieve the next cuts from <code>s</code> and calculate the remaining length after each cut.
</p>

<pre id="cut-rod-printer" style="display:hidden;">
\begin{algorithm}
\caption{Print Rod-Cutting Solution}
\begin{algorithmic}
\INPUT Array $p[0 \ldots n]$ of prices mapped to length by index
\INPUT Integer $n$ the length of the rod to cut

\PROCEDURE{Print-Cut-Rod-Solution}{$p, n$}
\STATE $(r, s) \gets $ \textsc{CutRodBottomsUpExtended}($p, n$)
\WHILE {$n &gt; 0$}
  \STATE \textsc{Print}($s[n]$)
  \STATE $n \gets n - s[n]$
\ENDWHILE
\ENDPROCEDURE
\end{algorithmic}
\end{algorithm}
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf5722c3" class="outline-3">
<h3 id="orgf5722c3">In Python</h3>
<div class="outline-text-3" id="text-orgf5722c3">
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">cut_rod_extended</span><span class="p">(</span><span class="n">prices</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span> <span class="n">length</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""Find the maximum values for a cut rod</span>

<span class="sd">    Args:</span>
<span class="sd">     prices: map of length to price</span>
<span class="sd">     length: total length of rod to cut up</span>

<span class="sd">    Returns:</span>
<span class="sd">     best-revenues, best-lengths</span>
<span class="sd">    """</span>
    <span class="n">best_revenues</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="p">(</span><span class="n">length</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
    <span class="n">best_cuts</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="p">(</span><span class="n">length</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">next_length</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">length</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
	<span class="n">best_revenue</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="s2">"-inf"</span><span class="p">)</span>
	<span class="k">for</span> <span class="n">next_cut</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">next_length</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
	    <span class="n">remaining_length</span> <span class="o">=</span> <span class="n">next_length</span> <span class="o">-</span> <span class="n">next_cut</span>
	    <span class="n">next_revenue</span> <span class="o">=</span> <span class="n">prices</span><span class="p">[</span><span class="n">next_cut</span><span class="p">]</span> <span class="o">+</span> <span class="n">best_revenues</span><span class="p">[</span><span class="n">next_length</span> <span class="o">-</span> <span class="n">next_cut</span><span class="p">]</span>
	    <span class="k">if</span> <span class="n">best_revenue</span> <span class="o">&lt;</span> <span class="n">next_revenue</span><span class="p">:</span>
		<span class="n">best_revenue</span> <span class="o">=</span> <span class="n">next_revenue</span>
		<span class="n">best_cuts</span><span class="p">[</span><span class="n">next_length</span><span class="p">]</span> <span class="o">=</span> <span class="n">next_cut</span>
	<span class="n">best_revenues</span><span class="p">[</span><span class="n">next_length</span><span class="p">]</span> <span class="o">=</span> <span class="n">best_revenue</span>
    <span class="k">return</span> <span class="n">best_revenues</span><span class="p">,</span> <span class="n">best_cuts</span>
</pre></div>

<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">print_solution</span><span class="p">(</span><span class="n">prices</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span> <span class="n">length</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""Solve and print the best cuts to maximize revenue</span>

<span class="sd">    Args:</span>
<span class="sd">     prices: list mapping length to price</span>
<span class="sd">     length: the pre-cut length of the rod</span>

<span class="sd">    Returns:</span>
<span class="sd">     best_revenues, best_cuts</span>
<span class="sd">    """</span>
    <span class="n">revenues</span><span class="p">,</span> <span class="n">cuts</span> <span class="o">=</span> <span class="n">cut_rod_extended</span><span class="p">(</span><span class="n">prices</span><span class="p">,</span> <span class="n">length</span><span class="p">)</span>
    <span class="n">check</span><span class="p">,</span> <span class="n">remaining_length</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">length</span>
    <span class="n">output</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">while</span> <span class="n">remaining_length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
	<span class="n">next_cut</span> <span class="o">=</span> <span class="n">cuts</span><span class="p">[</span><span class="n">remaining_length</span><span class="p">]</span>
	<span class="n">check</span> <span class="o">+=</span> <span class="n">next_cut</span>
	<span class="n">output</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">next_cut</span><span class="p">))</span>
	<span class="n">remaining_length</span> <span class="o">-=</span> <span class="n">next_cut</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Best Revenue for rod of length </span><span class="si">{</span><span class="n">length</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">revenues</span><span class="p">[</span><span class="n">length</span><span class="p">]</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Cuts: (</span><span class="si">{</span><span class="s1">', '</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">output</span><span class="p">)</span><span class="si">}</span><span class="s2">)"</span><span class="p">)</span>
    <span class="n">expect</span><span class="p">(</span><span class="n">check</span><span class="p">)</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">equal</span><span class="p">(</span><span class="n">length</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">revenues</span><span class="p">,</span> <span class="n">cuts</span>
</pre></div>

<div class="highlight"><pre><span></span><span class="n">print_solution</span><span class="p">(</span><span class="n">PRICES</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
</pre></div>

<pre class="example">
Best Revenue for rod of length 10: 27
Cuts: (2, 2, 6)
</pre>
</div>
</div>

<div id="outline-container-orgc6f183c" class="outline-3">
<h3 id="orgc6f183c">CLRS Example</h3>
<div class="outline-text-3" id="text-orgc6f183c">
<div class="highlight"><pre><span></span><span class="n">CLRS_PRICES</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">24</span><span class="p">,</span> <span class="mi">30</span><span class="p">]</span>
<span class="n">revenues</span><span class="p">,</span> <span class="n">cuts</span> <span class="o">=</span> <span class="n">print_solution</span><span class="p">(</span><span class="n">CLRS_PRICES</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="n">expect</span><span class="p">(</span><span class="n">revenues</span><span class="p">)</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">contain_exactly</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">22</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">30</span><span class="p">))</span>
<span class="n">expect</span><span class="p">(</span><span class="n">cuts</span><span class="p">)</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">contain_exactly</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>
</pre></div>

<pre class="example">
Best Revenue for rod of length 10: 30
Cuts: (10)
</pre>


<div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">length</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">11</span><span class="p">):</span>
    <span class="n">print_solution</span><span class="p">(</span><span class="n">CLRS_PRICES</span><span class="p">,</span> <span class="n">length</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">()</span>
</pre></div>

<pre class="example" id="orgaa69f95">
Best Revenue for rod of length 1: 1
Cuts: (1)

Best Revenue for rod of length 2: 5
Cuts: (2)

Best Revenue for rod of length 3: 8
Cuts: (3)

Best Revenue for rod of length 4: 10
Cuts: (2, 2)

Best Revenue for rod of length 5: 13
Cuts: (2, 3)

Best Revenue for rod of length 6: 17
Cuts: (6)

Best Revenue for rod of length 7: 18
Cuts: (1, 6)

Best Revenue for rod of length 8: 22
Cuts: (2, 6)

Best Revenue for rod of length 9: 25
Cuts: (3, 6)

Best Revenue for rod of length 10: 30
Cuts: (10)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf18cabd" class="outline-2">
<h2 id="orgf18cabd">Sources</h2>
<div class="outline-text-2" id="text-orgf18cabd">
<ul class="org-ul">
<li><a href="posts/essential-algorithms/">Essential Algorithms</a></li>
<li><a href="posts/clrs/">Introduction To Algorithms (CLRS)</a></li>
</ul>
<script>
window.addEventListener('load', function () {
    pseudocode.renderElement(document.getElementById("cut-rod-brute-force"));
});
</script><script>
window.addEventListener('load', function () {
    pseudocode.renderElement(document.getElementById("cut-rod-memoized"));
});
</script><script>
window.addEventListener('load', function () {
    pseudocode.renderElement(document.getElementById("cut-rod-memoized-auxiliary"));
});
</script><script>
window.addEventListener('load', function () {
    pseudocode.renderElement(document.getElementById("cut-rod-bottoms-up"));
});
</script><script>
window.addEventListener('load', function () {
    pseudocode.renderElement(document.getElementById("cut-rod-extended"));
});
</script><script>
window.addEventListener('load', function () {
    pseudocode.renderElement(document.getElementById("cut-rod-printer"));
});
</script>
</div>
</div>
    </div>
    </article>
</div>

        <ul class="pager postindexpager clearfix">
<li class="previous"><a href="index.html" rel="prev">Newer posts</a></li>
            <li class="next"><a href="index-6.html" rel="next">Older posts</a></li>
        </ul>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" integrity="sha384-3lJUsx1TJHt7BA4udB5KPnDrlkO8T6J6v/op7ui0BbCjvZ9WqV4Xm6DTP6kQ/iBH" crossorigin="anonymous"></script><script type="text/x-mathjax-config">
             MathJax.Hub.Config({
               tex2jax: {
                 inlineMath: [['$','$'], ['\\(','\\)']],
                 displayMath: [['$$','$$'], ['\\[','\\]']],
                 processEscapes: true,
                 processEnvironments: true,
               },
               displayAlign: 'center',
               "HTML-CSS": {
                 styles: {'.MathJax_Display': {"margin": 0}}
               }
             });
            </script><script src="https://cdn.jsdelivr.net/npm/pseudocode@latest/build/pseudocode.min.js"></script><!--End of body content--><footer id="footer">
            Scribbles by <a href="mailto:cloisteredmonkey.jmark@slmail.me">The Cloistered Monkey</a> © 2023 - Powered by         <a href="https://getnikola.com" rel="nofollow">Nikola</a>         
<div id="license" xmlns:cc="http://creativecommons.org/ns#" xmlns:dct="http://purl.org/dc/terms/">
<span property="dct:title">Ape-Iron</span> is licensed under
<a href="http://creativecommons.org/licenses/by-sa/4.0/?ref=chooser-v1" target="_blank" rel="license noopener noreferrer" style="display:inline-block;">CC BY-SA 4.0
<img src="https://mirrors.creativecommons.org/presskit/icons/cc.svg?ref=chooser-v1"><img src="https://mirrors.creativecommons.org/presskit/icons/by.svg?ref=chooser-v1"><img src="https://mirrors.creativecommons.org/presskit/icons/sa.svg?ref=chooser-v1"></a> 

            
            
        
    </div>
</footer>
</div>


        <script src="assets/js/all-nocdn.js"></script><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element){var i=element.getElementsByTagName('img')[0];return i===undefined?'':i.alt;}});
    </script>
</div>
</body>
</html>
