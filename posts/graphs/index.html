<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article#
" lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="A look at Graphs.">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Graphs | Bowling For Data</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="alternate" type="application/rss+xml" title="RSS" hreflang="en" href="../../rss.xml">
<link rel="canonical" href="https://necromuralist.github.io/Bowling-For-Data/posts/graphs/">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><meta name="author" content="The Cloistered Monkey">
<link rel="prev" href="../red-black-trees-delete/" title="Red-Black Trees: Delete" type="text/html">
<link rel="next" href="../graphs-breadth-first-search/" title="Graphs: Breadth-First-Search" type="text/html">
<meta property="og:site_name" content="Bowling For Data">
<meta property="og:title" content="Graphs">
<meta property="og:url" content="https://necromuralist.github.io/Bowling-For-Data/posts/graphs/">
<meta property="og:description" content="A look at Graphs.">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2022-04-04T18:40:48-07:00">
<meta property="article:tag" content="algorithms">
<meta property="article:tag" content="data structures">
<meta property="article:tag" content="graphs">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-expand-md static-top mb-4
navbar-light
bg-light
"><div class="container">
<!-- This keeps the margins nice -->
        <a class="navbar-brand" href="../../">

            <span id="blog-title">Bowling For Data</span>
        </a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="bs-navbar">
            <ul class="navbar-nav mr-auto">
<li class="nav-item">
<a href="../../pages/" class="nav-link">Pages</a>
                </li>
<li class="nav-item">
<a href="../../archive.html" class="nav-link">Archive</a>
                </li>
<li class="nav-item">
<a href="../../categories/" class="nav-link">Tags</a>
                </li>
<li class="nav-item">
<a href="../../rss.xml" class="nav-link">RSS feed</a>

                
            </li>
</ul>
<!-- DuckDuckGo custom search --><form method="get" id="search" action="https://duckduckgo.com/" class="navbar-form pull-left">
 <input type="hidden" name="sites" value="https://necromuralist.github.io/Bowling-For-Data/"><input type="hidden" name="k8" value="#444444"><input type="hidden" name="k9" value="#D51920"><input type="hidden" name="kt" value="h"><input type="text" name="q" maxlength="255" placeholder="Searchâ€¦" class="span2" style="margin-top: 4px;"><input type="submit" value="DuckDuckGo Search" style="visibility: hidden;">
</form>
 <!-- End of custom search -->
 

            <ul class="navbar-nav navbar-right">
<li class="nav-item">
    <a href="index.org" id="sourcelink" class="nav-link">Source</a>
    </li>


                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        
        
        
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">Graphs</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                    The Cloistered Monkey
            </span></p>
            <p class="dateline">
            <a href="." rel="bookmark">
            <time class="published dt-published" datetime="2022-04-04T18:40:48-07:00" itemprop="datePublished" title="2022-04-04 18:40">2022-04-04 18:40</time></a>
            </p>
            
        <p class="sourceline"><a href="index.org" class="sourcelink">Source</a></p>

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orgff0cafc">Introduction</a></li>
<li>
<a href="#orge116e89">Imports and Setup</a>
<ul>
<li><a href="#orgbfb4a39">Imports</a></li>
<li><a href="#orgd7f32bb">Constants</a></li>
</ul>
</li>
<li><a href="#org6e17636">A Vertex Implementation</a></li>
<li>
<a href="#orgbd906d5">A Graph Implementation</a>
<ul>
<li><a href="#org6720c27">Adjacencies</a></li>
<li><a href="#orgab81cd5">Vertices</a></li>
<li><a href="#org4e67eb0">Add Item</a></li>
<li><a href="#org81eafe8">Getitem</a></li>
<li><a href="#orgc7e6903">Testing</a></li>
</ul>
</li>
<li><a href="#orgf43a18d">Sources</a></li>
</ul>
</div>
</div>
<div id="outline-container-orgff0cafc" class="outline-2">
<h2 id="orgff0cafc">Introduction</h2>
<div class="outline-text-2" id="text-orgff0cafc">
<p>
This is a starter post for an introduction to Graphs.
</p>
</div>
</div>

<div id="outline-container-orge116e89" class="outline-2">
<h2 id="orge116e89">Imports and Setup</h2>
<div class="outline-text-2" id="text-orge116e89">
</div>
<div id="outline-container-orgbfb4a39" class="outline-3">
<h3 id="orgbfb4a39">Imports</h3>
<div class="outline-text-3" id="text-orgbfb4a39">
<div class="highlight"><pre><span></span><span class="c1"># python</span>
<span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">annotations</span>
<span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">defaultdict</span>
<span class="kn">from</span> <span class="nn">enum</span> <span class="kn">import</span> <span class="n">Enum</span>

<span class="c1"># pypi</span>
<span class="kn">from</span> <span class="nn">attrs</span> <span class="kn">import</span> <span class="n">define</span>
</pre></div>
</div>
</div>

<div id="outline-container-orgd7f32bb" class="outline-3">
<h3 id="orgd7f32bb">Constants</h3>
<div class="outline-text-3" id="text-orgd7f32bb">
<div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Color</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>
    <span class="n">WHITE</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">GRAY</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="n">BLACK</span> <span class="o">=</span> <span class="mi">3</span>

<span class="n">INFINITY</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="s2">"inf"</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>

<div id="outline-container-org6e17636" class="outline-2">
<h2 id="org6e17636">A Vertex Implementation</h2>
<div class="outline-text-2" id="text-org6e17636">
<p>
Note to future self: the default setting for <code>attrs.define</code> makes the object to unhashable, to make it hashable by object identity pass in <code>eq=False</code> otherwise trying to add the object to a set will raise an error.
</p>

<div class="highlight"><pre><span></span><span class="nd">@define</span><span class="p">(</span><span class="n">eq</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">Vertex</span><span class="p">:</span>
    <span class="sd">"""A single node in a graph</span>

<span class="sd">    Args:</span>
<span class="sd">     identifier: something to identify the node</span>
<span class="sd">     color: the 'discovery' state of the node</span>
<span class="sd">     distance: The number of edges to the root</span>
<span class="sd">     predecessor: The 'parent' of the node in a tree</span>
<span class="sd">    """</span>
    <span class="n">identifier</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">color</span><span class="p">:</span> <span class="n">Enum</span><span class="o">=</span><span class="n">Color</span><span class="o">.</span><span class="n">WHITE</span>
    <span class="n">distance</span><span class="p">:</span> <span class="nb">float</span><span class="o">=</span><span class="n">INFINITY</span>
    <span class="n">predecessor</span><span class="p">:</span> <span class="n">Vertex</span><span class="o">=</span><span class="kc">None</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
	<span class="k">return</span> <span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">identifier</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">color</span><span class="si">}</span><span class="s2">, "</span>
		<span class="sa">f</span><span class="s2">"distance: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">distance</span><span class="si">}</span><span class="s2">, predecessor: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">predecessor</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div id="outline-container-orgbd906d5" class="outline-2">
<h2 id="orgbd906d5">A Graph Implementation</h2>
<div class="outline-text-2" id="text-orgbd906d5">
<div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Graph</span><span class="p">:</span>
    <span class="sd">"""A graph implementation</span>

<span class="sd">    """</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
	<span class="bp">self</span><span class="o">.</span><span class="n">_adjacent</span> <span class="o">=</span> <span class="kc">None</span>
	<span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span> <span class="o">=</span> <span class="kc">None</span>
	<span class="k">return</span>
</pre></div>
</div>
<div id="outline-container-org6720c27" class="outline-3">
<h3 id="org6720c27">Adjacencies</h3>
<div class="outline-text-3" id="text-org6720c27">
<p>
The book uses an adjacency linked list, but I'll assume that there will be only one edge between each pair of vertices and use a dictionary with sets of adjacent nodes instead.
</p>

<div class="highlight"><pre><span></span><span class="nd">@property</span>
<span class="k">def</span> <span class="nf">adjacent</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">defaultdict</span><span class="p">:</span>
    <span class="sd">"""The dictionary of adjacent vertices"""</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_adjacent</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
	<span class="bp">self</span><span class="o">.</span><span class="n">_adjacent</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">set</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_adjacent</span>

<span class="nd">@adjacent</span><span class="o">.</span><span class="n">setter</span>
<span class="k">def</span> <span class="nf">adjacent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">new_adjacent</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="sd">"""Sets the dictionary of adjacent vertices (converting to default dict)</span>

<span class="sd">    Note:</span>
<span class="sd">     This expects the new_adjacent to be a dict of node: set of nodes</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">new_adjacent</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">defaultdict</span><span class="p">:</span>
	<span class="n">new_new_adjacent</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">set</span><span class="p">)</span>
	<span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">nodes</span> <span class="ow">in</span> <span class="n">new_adjacent</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
	    <span class="n">new_new_adjacent</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">nodes</span>
	<span class="n">new_adjacent</span> <span class="o">=</span> <span class="n">new_new_adjacent</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_adjacent</span> <span class="o">=</span> <span class="n">new_adjacent</span>
    <span class="k">return</span>
</pre></div>
</div>
</div>
<div id="outline-container-orgab81cd5" class="outline-3">
<h3 id="orgab81cd5">Vertices</h3>
<div class="outline-text-3" id="text-orgab81cd5">
<p>
The representation we're using is an adjacency list, but sometimes you need to traverse the vertices. So I'm going to make an alias to the adjacency list keys, in the assumption that every node in the graph is a key in the dict. This might not be true in a directed graph, so I'll have to revisit it later.
</p>

<div class="highlight"><pre><span></span><span class="nd">@property</span>
<span class="k">def</span> <span class="nf">vertices</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">set</span><span class="p">:</span>
    <span class="sd">"""The vertices in this graph"""</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
	<span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span>
</pre></div>
</div>
</div>
<div id="outline-container-org4e67eb0" class="outline-3">
<h3 id="org4e67eb0">Add Item</h3>
<div class="outline-text-3" id="text-org4e67eb0">
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node_1</span><span class="p">:</span> <span class="n">Vertex</span><span class="p">,</span> <span class="n">node_2</span><span class="p">:</span> <span class="n">Vertex</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="sd">"""Add edge </span>

<span class="sd">    Warning:</span>
<span class="sd">     This assumes an undirected graph, change it for a directed graph</span>

<span class="sd">    Args:</span>
<span class="sd">     node_1: node on one end of the edge</span>
<span class="sd">     node_2: Node on the other end of the edge</span>
<span class="sd">    """</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">vertices</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">node_1</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">vertices</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">node_2</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">adjacent</span><span class="p">[</span><span class="n">node_1</span><span class="p">]</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">node_2</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">adjacent</span><span class="p">[</span><span class="n">node_2</span><span class="p">]</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">node_1</span><span class="p">)</span>
    <span class="k">return</span>
</pre></div>
</div>
</div>
<div id="outline-container-org81eafe8" class="outline-3">
<h3 id="org81eafe8">Getitem</h3>
<div class="outline-text-3" id="text-org81eafe8">
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
    <span class="sd">"""Get the list from the adjacencies dict</span>

<span class="sd">    Args:</span>
<span class="sd">     key: vertex whose list we want</span>
<span class="sd">    """</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">adjacent</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div id="outline-container-orgc7e6903" class="outline-3">
<h3 id="orgc7e6903">Testing</h3>
<div class="outline-text-3" id="text-orgc7e6903">
<div class="highlight"><pre><span></span><span class="c1"># pypi</span>
<span class="kn">from</span> <span class="nn">expects</span> <span class="kn">import</span> <span class="n">be</span><span class="p">,</span> <span class="n">contain</span><span class="p">,</span> <span class="n">equal</span><span class="p">,</span> <span class="n">expect</span>

<span class="c1"># software under test</span>
<span class="kn">from</span> <span class="nn">bowling.data_structures.graphs</span> <span class="kn">import</span> <span class="n">graph</span>
<span class="kn">from</span> <span class="nn">bowling.data_structures.graphs.graph</span> <span class="kn">import</span> <span class="n">Color</span><span class="p">,</span> <span class="n">Graph</span><span class="p">,</span> <span class="n">Vertex</span>

<span class="n">v</span> <span class="o">=</span> <span class="n">Vertex</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="n">expect</span><span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">color</span><span class="p">)</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">be</span><span class="p">(</span><span class="n">Color</span><span class="o">.</span><span class="n">WHITE</span><span class="p">))</span>

<span class="n">g</span> <span class="o">=</span> <span class="n">Graph</span><span class="p">()</span>
<span class="n">v2</span> <span class="o">=</span> <span class="n">Vertex</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="n">v3</span> <span class="o">=</span> <span class="n">Vertex</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="n">g</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">v2</span><span class="p">)</span>
<span class="n">g</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">v3</span><span class="p">)</span>

<span class="n">expect</span><span class="p">(</span><span class="n">g</span><span class="o">.</span><span class="n">adjacent</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">contain</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">v2</span><span class="p">))</span>
<span class="n">expect</span><span class="p">(</span><span class="n">g</span><span class="o">.</span><span class="n">adjacent</span><span class="p">[</span><span class="n">v</span><span class="p">])</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">contain</span><span class="p">(</span><span class="n">v2</span><span class="p">))</span>
<span class="n">expect</span><span class="p">(</span><span class="n">g</span><span class="p">[</span><span class="n">v2</span><span class="p">])</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">contain</span><span class="p">(</span><span class="n">v</span><span class="p">))</span>
<span class="n">expect</span><span class="p">(</span><span class="n">g</span><span class="p">[</span><span class="n">v3</span><span class="p">])</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">contain</span><span class="p">(</span><span class="n">v</span><span class="p">))</span>
<span class="n">expect</span><span class="p">(</span><span class="n">g</span><span class="p">[</span><span class="n">v3</span><span class="p">])</span><span class="o">.</span><span class="n">not_to</span><span class="p">(</span><span class="n">contain</span><span class="p">(</span><span class="n">v2</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<div id="outline-container-orgf43a18d" class="outline-2">
<h2 id="orgf43a18d">Sources</h2>
<div class="outline-text-2" id="text-orgf43a18d">
<ul class="org-ul">
<li><a href="../clrs/">Introduction To Algorithms (CLRS)</a></li>
</ul>
</div>
</div>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../categories/algorithms/" rel="tag">algorithms</a></li>
            <li><a class="tag p-category" href="../../categories/data-structures/" rel="tag">data structures</a></li>
            <li><a class="tag p-category" href="../../categories/graphs/" rel="tag">graphs</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../red-black-trees-delete/" rel="prev" title="Red-Black Trees: Delete">Previous post</a>
            </li>
            <li class="next">
                <a href="../graphs-breadth-first-search/" rel="next" title="Graphs: Breadth-First-Search">Next post</a>
            </li>
        </ul></nav></aside></article><!--End of body content--><footer id="footer"><a href="mailto:cloisteredmonkey.jmark@slmail.me">The Cloistered Monkey</a> - Powered by         <a href="https://getnikola.com" rel="nofollow">Nikola</a>         
 <a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">
 <img alt="Creative Commons License BY-NC-SA" style="border-width:0; margin-bottom:12px;" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png"></a>
            
            
        </footer>
</div>
</div>


        <script src="../../assets/js/all-nocdn.js"></script><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element){var i=element.getElementsByTagName('img')[0];return i===undefined?'':i.alt;}});
    </script>
</body>
</html>
