<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article#
" lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="A class to query the tree for information">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Red-Black Trees: Querying | Bowling For Data</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="alternate" type="application/rss+xml" title="RSS" hreflang="en" href="../../rss.xml">
<link rel="canonical" href="https://necromuralist.github.io/Bowling-For-Data/posts/red-black-trees-querying/">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><meta name="author" content="The Cloistered Monkey">
<link rel="prev" href="../red-black-properties/" title="Red-Black Properties" type="text/html">
<link rel="next" href="../red-black-trees-delete/" title="Red-Black Trees: Delete" type="text/html">
<meta property="og:site_name" content="Bowling For Data">
<meta property="og:title" content="Red-Black Trees: Querying">
<meta property="og:url" content="https://necromuralist.github.io/Bowling-For-Data/posts/red-black-trees-querying/">
<meta property="og:description" content="A class to query the tree for information">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2022-03-25T19:15:35-07:00">
<meta property="article:tag" content="algorithms">
<meta property="article:tag" content="binary search trees">
<meta property="article:tag" content="data structures">
<meta property="article:tag" content="red-black trees">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-expand-md static-top mb-4
navbar-light
bg-light
"><div class="container">
<!-- This keeps the margins nice -->
        <a class="navbar-brand" href="../../">

            <span id="blog-title">Bowling For Data</span>
        </a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="bs-navbar">
            <ul class="navbar-nav mr-auto">
<li class="nav-item">
<a href="../../archive.html" class="nav-link">Archive</a>
                </li>
<li class="nav-item">
<a href="../../categories/" class="nav-link">Tags</a>
                </li>
<li class="nav-item">
<a href="../../rss.xml" class="nav-link">RSS feed</a>

                
            </li>
</ul>
<!-- DuckDuckGo custom search --><form method="get" id="search" action="https://duckduckgo.com/" class="navbar-form pull-left">
 <input type="hidden" name="sites" value="https://necromuralist.github.io/Bowling-For-Data/"><input type="hidden" name="k8" value="#444444"><input type="hidden" name="k9" value="#D51920"><input type="hidden" name="kt" value="h"><input type="text" name="q" maxlength="255" placeholder="Searchâ€¦" class="span2" style="margin-top: 4px;"><input type="submit" value="DuckDuckGo Search" style="visibility: hidden;">
</form>
 <!-- End of custom search -->
 

            <ul class="navbar-nav navbar-right">
<li class="nav-item">
    <a href="index.org" id="sourcelink" class="nav-link">Source</a>
    </li>


                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        
        
        
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">Red-Black Trees: Querying</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                    The Cloistered Monkey
            </span></p>
            <p class="dateline">
            <a href="." rel="bookmark">
            <time class="published dt-published" datetime="2022-03-25T19:15:35-07:00" itemprop="datePublished" title="2022-03-25 19:15">2022-03-25 19:15</time></a>
            </p>
            
        <p class="sourceline"><a href="index.org" class="sourcelink">Source</a></p>

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orgc380078">The Imports</a></li>
<li><a href="#orgc55acbe">The Forester</a></li>
<li>
<a href="#orgdf9a2d8">Search</a>
<ul>
<li>
<a href="#orgb9efdf5">The Implementation</a>
<ul>
<li><a href="#org92c87f7">Testing</a></li>
</ul>
</li>
</ul>
</li>
<li>
<a href="#org79eb2a8">Miminum and Maximum</a>
<ul>
<li>
<a href="#org8e97eb6">Mimimum</a>
<ul>
<li><a href="#orgb84ae72">Testing</a></li>
</ul>
</li>
<li>
<a href="#orgaf1d5d6">Maximum</a>
<ul>
<li><a href="#org23974ce">Testing</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org26f8a34">Height</a></li>
<li>
<a href="#org27484d5">Black Height</a>
<ul>
<li><a href="#org2df903f">Testing</a></li>
</ul>
</li>
<li><a href="#orgea1c97c">Testing</a></li>
</ul>
</div>
</div>
<p>
<img src="forester.png" alt="nil"></p>

<div id="outline-container-orgc380078" class="outline-2">
<h2 id="orgc380078">The Imports</h2>
<div class="outline-text-2" id="text-orgc380078">
<div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">bowling.data_structures.red_black_tree</span> <span class="kn">import</span> <span class="n">tree</span> <span class="k">as</span> <span class="n">rb_tree</span>
</pre></div>
</div>
</div>
<div id="outline-container-orgc55acbe" class="outline-2">
<h2 id="orgc55acbe">The Forester</h2>
<div class="outline-text-2" id="text-orgc55acbe">
<p>
This is the class to hold the tree and answer questions about it. Most of the methods (except for the red-black-height) are the same as the Binary Search Tree with the main exception being that we need to use the <code>NIL</code> object instead of <code>None</code>. This means that nothing in the <code>tree</code> module can use the <code>Forester</code> directly or we'll end up with a circular reference.
</p>

<div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Forester</span><span class="p">:</span>
    <span class="sd">"""The forester manages the tree</span>

<span class="sd">    Args:</span>
<span class="sd">     tree: tree to manage</span>
<span class="sd">     enforce_properties: check that the black-heights are the same</span>
<span class="sd">    """</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tree</span><span class="p">:</span> <span class="n">rb_tree</span><span class="o">.</span><span class="n">RedBlackTree</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
		 <span class="n">enforce_properties</span><span class="p">:</span> <span class="nb">bool</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
	<span class="bp">self</span><span class="o">.</span><span class="n">tree</span> <span class="o">=</span> <span class="n">tree</span>
	<span class="bp">self</span><span class="o">.</span><span class="n">enforce_properties</span> <span class="o">=</span> <span class="n">enforce_properties</span>
	<span class="k">return</span>
</pre></div>
</div>
</div>
<div id="outline-container-orgdf9a2d8" class="outline-2">
<h2 id="orgdf9a2d8">Search</h2>
<div class="outline-text-2" id="text-orgdf9a2d8">
<p>
The first thing we'll look at is searching for a Node in a Binary Search Tree. Because of the way the tree is structured the search looks a lot like a <a href="../binary-search/">Binary Search</a> where we start at the root of the tree and then work our way downwards, picking the next child to follow based on whether the key we're searching for is greater than the right child's key or less than the left child's key. If it's equal then we've found the node we want.
</p>
</div>

<div id="outline-container-orgb9efdf5" class="outline-3">
<h3 id="orgb9efdf5">The Implementation</h3>
<div class="outline-text-3" id="text-orgb9efdf5">
<p>
I'll add the iterative version of the Tree Search as a method for our Query class.
</p>

<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">search</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">rb_tree</span><span class="o">.</span><span class="n">Node</span><span class="p">:</span>
    <span class="sd">"""Searches the tree for the node with the matching key</span>

<span class="sd">    Args:</span>
<span class="sd">     key: node's key to search for</span>

<span class="sd">    Returns:</span>
<span class="sd">     the node with the key or None if it isn't in the tree</span>
<span class="sd">    """</span>
    <span class="n">node</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tree</span><span class="o">.</span><span class="n">root</span>
    <span class="k">while</span> <span class="n">node</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">rb_tree</span><span class="o">.</span><span class="n">LEAF</span> <span class="ow">and</span> <span class="n">key</span> <span class="o">!=</span> <span class="n">node</span><span class="o">.</span><span class="n">key</span><span class="p">:</span>
	<span class="k">if</span> <span class="n">key</span> <span class="o">&lt;</span> <span class="n">node</span><span class="o">.</span><span class="n">key</span><span class="p">:</span>
	    <span class="n">node</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">left</span>
	<span class="k">else</span><span class="p">:</span>
	   <span class="n">node</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">right</span>
    <span class="k">return</span> <span class="n">node</span>
</pre></div>
</div>
<div id="outline-container-org92c87f7" class="outline-4">
<h4 id="org92c87f7">Testing</h4>
<div class="outline-text-4" id="text-org92c87f7">
<div class="highlight"><pre><span></span><span class="c1"># pypi</span>
<span class="kn">from</span> <span class="nn">expects</span> <span class="kn">import</span> <span class="n">be</span><span class="p">,</span> <span class="n">be_none</span><span class="p">,</span> <span class="n">equal</span><span class="p">,</span> <span class="n">expect</span>
<span class="kn">from</span> <span class="nn">bowling.data_structures.red_black_tree</span> <span class="kn">import</span> <span class="n">tree</span> <span class="k">as</span> <span class="n">rb_tree</span>
<span class="kn">from</span> <span class="nn">bowling.data_structures.red_black_tree.forester</span> <span class="kn">import</span> <span class="n">Forester</span>

<span class="n">root</span> <span class="o">=</span> <span class="n">rb_tree</span><span class="o">.</span><span class="n">Node</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="n">tree</span> <span class="o">=</span> <span class="n">rb_tree</span><span class="o">.</span><span class="n">RedBlackTree</span><span class="p">(</span><span class="n">root</span><span class="p">)</span>
<span class="n">query</span> <span class="o">=</span> <span class="n">Forester</span><span class="p">(</span><span class="n">tree</span><span class="p">)</span>
<span class="n">output</span> <span class="o">=</span> <span class="n">query</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="n">expect</span><span class="p">(</span><span class="n">output</span><span class="p">)</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">be</span><span class="p">(</span><span class="n">rb_tree</span><span class="o">.</span><span class="n">NIL</span><span class="p">))</span>
<span class="n">expect</span><span class="p">(</span><span class="n">query</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">equal</span><span class="p">(</span><span class="n">root</span><span class="p">))</span>

<span class="n">five</span> <span class="o">=</span> <span class="n">rb_tree</span><span class="o">.</span><span class="n">Node</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="n">root</span><span class="o">.</span><span class="n">left</span> <span class="o">=</span> <span class="n">five</span>
<span class="n">expect</span><span class="p">(</span><span class="n">query</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">be</span><span class="p">(</span><span class="n">five</span><span class="p">))</span>

<span class="n">root</span><span class="o">.</span><span class="n">right</span> <span class="o">=</span> <span class="n">fifteen</span> <span class="o">=</span> <span class="n">rb_tree</span><span class="o">.</span><span class="n">Node</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span>
<span class="n">expect</span><span class="p">(</span><span class="n">query</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="mi">15</span><span class="p">))</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">be</span><span class="p">(</span><span class="n">fifteen</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
</div>
<div id="outline-container-org79eb2a8" class="outline-2">
<h2 id="org79eb2a8">Miminum and Maximum</h2>
<div class="outline-text-2" id="text-org79eb2a8">
</div>
<div id="outline-container-org8e97eb6" class="outline-3">
<h3 id="org8e97eb6">Mimimum</h3>
<div class="outline-text-3" id="text-org8e97eb6">
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">min</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">rb_tree</span><span class="o">.</span><span class="n">Node</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">rb_tree</span><span class="o">.</span><span class="n">Node</span><span class="p">:</span>
    <span class="sd">"""Returns the node with the smallest key</span>

<span class="sd">    Args:</span>
<span class="sd">     node: a node to use as the starting root</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="n">node</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
	<span class="n">node</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tree</span><span class="o">.</span><span class="n">root</span>

    <span class="k">while</span> <span class="n">node</span><span class="o">.</span><span class="n">left</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">rb_tree</span><span class="o">.</span><span class="n">LEAF</span><span class="p">:</span>
	<span class="n">node</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">left</span>
    <span class="k">return</span> <span class="n">node</span>
</pre></div>
</div>

<div id="outline-container-orgb84ae72" class="outline-4">
<h4 id="orgb84ae72">Testing</h4>
<div class="outline-text-4" id="text-orgb84ae72">
<div class="highlight"><pre><span></span><span class="n">root</span> <span class="o">=</span> <span class="n">rb_tree</span><span class="o">.</span><span class="n">Node</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="n">tree</span> <span class="o">=</span> <span class="n">rb_tree</span><span class="o">.</span><span class="n">RedBlackTree</span><span class="p">(</span><span class="n">root</span><span class="p">)</span>
<span class="n">query</span> <span class="o">=</span> <span class="n">Forester</span><span class="p">(</span><span class="n">tree</span><span class="p">)</span>
<span class="n">root</span><span class="o">.</span><span class="n">left</span> <span class="o">=</span> <span class="n">rb_tree</span><span class="o">.</span><span class="n">Node</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="n">root</span><span class="o">.</span><span class="n">left</span><span class="o">.</span><span class="n">left</span> <span class="o">=</span> <span class="n">rb_tree</span><span class="o">.</span><span class="n">Node</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="n">root</span><span class="o">.</span><span class="n">right</span> <span class="o">=</span> <span class="n">rb_tree</span><span class="o">.</span><span class="n">Node</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span>
<span class="n">root</span><span class="o">.</span><span class="n">right</span><span class="o">.</span><span class="n">right</span> <span class="o">=</span> <span class="n">rb_tree</span><span class="o">.</span><span class="n">Node</span><span class="p">(</span><span class="mi">17</span><span class="p">)</span>
<span class="n">root</span><span class="o">.</span><span class="n">right</span><span class="o">.</span><span class="n">left</span> <span class="o">=</span> <span class="n">rb_tree</span><span class="o">.</span><span class="n">Node</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span>
<span class="n">expect</span><span class="p">(</span><span class="n">query</span><span class="o">.</span><span class="n">min</span><span class="p">())</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">equal</span><span class="p">(</span><span class="n">rb_tree</span><span class="o">.</span><span class="n">Node</span><span class="p">(</span><span class="mi">2</span><span class="p">)))</span>

<span class="n">root</span><span class="o">.</span><span class="n">left</span><span class="o">.</span><span class="n">left</span><span class="o">.</span><span class="n">left</span> <span class="o">=</span> <span class="n">rb_tree</span><span class="o">.</span><span class="n">Node</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="n">expect</span><span class="p">(</span><span class="n">query</span><span class="o">.</span><span class="n">min</span><span class="p">())</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">equal</span><span class="p">(</span><span class="n">rb_tree</span><span class="o">.</span><span class="n">Node</span><span class="p">(</span><span class="mi">1</span><span class="p">)))</span>

<span class="n">expect</span><span class="p">(</span><span class="n">query</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">tree</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">right</span><span class="p">))</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">equal</span><span class="p">(</span><span class="n">rb_tree</span><span class="o">.</span><span class="n">Node</span><span class="p">(</span><span class="mi">11</span><span class="p">)))</span>
</pre></div>
</div>
</div>
</div>

<div id="outline-container-orgaf1d5d6" class="outline-3">
<h3 id="orgaf1d5d6">Maximum</h3>
<div class="outline-text-3" id="text-orgaf1d5d6">
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">max</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">root</span><span class="p">:</span> <span class="n">rb_tree</span><span class="o">.</span><span class="n">Node</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">rb_tree</span><span class="o">.</span><span class="n">Node</span><span class="p">:</span>
    <span class="sd">"""Returns the node with the largest key</span>

<span class="sd">    Args:</span>
<span class="sd">     root: subtree root to start at</span>

<span class="sd">    Returns:</span>
<span class="sd">     node with the largest key in tree/subtree</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="n">root</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
	<span class="n">root</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tree</span><span class="o">.</span><span class="n">root</span>
    <span class="k">while</span> <span class="n">root</span><span class="o">.</span><span class="n">right</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">rb_tree</span><span class="o">.</span><span class="n">LEAF</span><span class="p">:</span>
	<span class="n">root</span> <span class="o">=</span> <span class="n">root</span><span class="o">.</span><span class="n">right</span>
    <span class="k">return</span> <span class="n">root</span>
</pre></div>
</div>
<div id="outline-container-org23974ce" class="outline-4">
<h4 id="org23974ce">Testing</h4>
<div class="outline-text-4" id="text-org23974ce">
<div class="highlight"><pre><span></span><span class="n">root</span> <span class="o">=</span> <span class="n">rb_tree</span><span class="o">.</span><span class="n">Node</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="n">tree</span> <span class="o">=</span> <span class="n">rb_tree</span><span class="o">.</span><span class="n">RedBlackTree</span><span class="p">(</span><span class="n">root</span><span class="p">)</span>
<span class="n">query</span> <span class="o">=</span> <span class="n">Forester</span><span class="p">(</span><span class="n">tree</span><span class="p">)</span>
<span class="n">root</span><span class="o">.</span><span class="n">left</span> <span class="o">=</span> <span class="n">rb_tree</span><span class="o">.</span><span class="n">Node</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="n">root</span><span class="o">.</span><span class="n">left</span><span class="o">.</span><span class="n">left</span> <span class="o">=</span> <span class="n">rb_tree</span><span class="o">.</span><span class="n">Node</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="n">root</span><span class="o">.</span><span class="n">right</span> <span class="o">=</span> <span class="n">rb_tree</span><span class="o">.</span><span class="n">Node</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span>

<span class="n">expect</span><span class="p">(</span><span class="n">query</span><span class="o">.</span><span class="n">max</span><span class="p">())</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">equal</span><span class="p">(</span><span class="n">rb_tree</span><span class="o">.</span><span class="n">Node</span><span class="p">(</span><span class="mi">15</span><span class="p">)))</span>

<span class="n">root</span><span class="o">.</span><span class="n">right</span><span class="o">.</span><span class="n">right</span> <span class="o">=</span> <span class="n">rb_tree</span><span class="o">.</span><span class="n">Node</span><span class="p">(</span><span class="mi">17</span><span class="p">)</span>
<span class="n">expect</span><span class="p">(</span><span class="n">query</span><span class="o">.</span><span class="n">max</span><span class="p">())</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">equal</span><span class="p">(</span><span class="n">rb_tree</span><span class="o">.</span><span class="n">Node</span><span class="p">(</span><span class="mi">17</span><span class="p">)))</span>
<span class="n">expect</span><span class="p">(</span><span class="n">query</span><span class="o">.</span><span class="n">min</span><span class="p">())</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">equal</span><span class="p">(</span><span class="n">rb_tree</span><span class="o">.</span><span class="n">Node</span><span class="p">(</span><span class="mi">2</span><span class="p">)))</span>

<span class="n">expect</span><span class="p">(</span><span class="n">query</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">tree</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">left</span><span class="p">))</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">equal</span><span class="p">(</span><span class="n">rb_tree</span><span class="o">.</span><span class="n">Node</span><span class="p">(</span><span class="mi">5</span><span class="p">)))</span>
</pre></div>
</div>
</div>
</div>
</div>
<div id="outline-container-org26f8a34" class="outline-2">
<h2 id="org26f8a34">Height</h2>
<div class="outline-text-2" id="text-org26f8a34">
<p>
The height of the Binary Search Tree is the number of edges from the root of the tree to the furthest node. The algorithms we're looking at here don't use them but I'm going to use height to look at how the order you insert nodes in the tree affects the height. 
</p>

<div class="highlight"><pre><span></span><span class="nd">@property</span>
<span class="k">def</span> <span class="nf">height</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="sd">"""The length of the longest path starting at the root</span>

<span class="sd">    Returns:</span>
<span class="sd">     number of edges from root to furthest leaf</span>
<span class="sd">    """</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">tree_height</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tree</span><span class="o">.</span><span class="n">root</span><span class="p">)</span>
</pre></div>

<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">tree_height</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">rb_tree</span><span class="o">.</span><span class="n">Node</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="sd">"""The length of the longest path starting at the node</span>

<span class="sd">    Args:</span>
<span class="sd">     the node to start the measurement from</span>

<span class="sd">    Returns:</span>
<span class="sd">     number of edges from root to furthest leaf</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="n">node</span> <span class="ow">is</span> <span class="n">rb_tree</span><span class="o">.</span><span class="n">LEAF</span><span class="p">:</span>
	<span class="k">return</span> <span class="o">-</span><span class="mi">1</span>

    <span class="n">left</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tree_height</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">left</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>
    <span class="n">right</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tree_height</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">right</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>
    <span class="k">return</span> <span class="nb">max</span><span class="p">(</span><span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">)</span>
</pre></div>

<div class="highlight"><pre><span></span><span class="n">tree</span> <span class="o">=</span> <span class="n">rb_tree</span><span class="o">.</span><span class="n">RedBlackTree</span><span class="p">()</span>
<span class="n">query</span> <span class="o">=</span> <span class="n">Forester</span><span class="p">(</span><span class="n">tree</span><span class="p">)</span>

<span class="n">expect</span><span class="p">(</span><span class="n">query</span><span class="o">.</span><span class="n">height</span><span class="p">)</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">equal</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">))</span>
<span class="n">root</span> <span class="o">=</span> <span class="n">rb_tree</span><span class="o">.</span><span class="n">Node</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="n">tree</span><span class="o">.</span><span class="n">root</span> <span class="o">=</span> <span class="n">root</span>
<span class="n">expect</span><span class="p">(</span><span class="n">query</span><span class="o">.</span><span class="n">height</span><span class="p">)</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">equal</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>

<span class="n">root</span><span class="o">.</span><span class="n">left</span> <span class="o">=</span> <span class="n">rb_tree</span><span class="o">.</span><span class="n">Node</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span>
<span class="n">expect</span><span class="p">(</span><span class="n">query</span><span class="o">.</span><span class="n">height</span><span class="p">)</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">equal</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>

<span class="n">root</span><span class="o">.</span><span class="n">right</span> <span class="o">=</span> <span class="n">rb_tree</span><span class="o">.</span><span class="n">Node</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span>
<span class="n">expect</span><span class="p">(</span><span class="n">query</span><span class="o">.</span><span class="n">height</span><span class="p">)</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">equal</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>

<span class="n">root</span><span class="o">.</span><span class="n">left</span><span class="o">.</span><span class="n">left</span> <span class="o">=</span> <span class="n">rb_tree</span><span class="o">.</span><span class="n">Node</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="n">expect</span><span class="p">(</span><span class="n">query</span><span class="o">.</span><span class="n">height</span><span class="p">)</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">equal</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>

<span class="n">root</span><span class="o">.</span><span class="n">left</span><span class="o">.</span><span class="n">left</span><span class="o">.</span><span class="n">left</span> <span class="o">=</span> <span class="n">rb_tree</span><span class="o">.</span><span class="n">Node</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="n">expect</span><span class="p">(</span><span class="n">query</span><span class="o">.</span><span class="n">height</span><span class="p">)</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">equal</span><span class="p">(</span><span class="mi">3</span><span class="p">))</span>
</pre></div>
</div>
</div>

<div id="outline-container-org27484d5" class="outline-2">
<h2 id="org27484d5">Black Height</h2>
<div class="outline-text-2" id="text-org27484d5">
<div class="highlight"><pre><span></span><span class="nd">@property</span>
<span class="k">def</span> <span class="nf">black_height</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="sd">"""The number of black nodes below the root</span>
<span class="sd">    """</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">find_black_height</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tree</span><span class="o">.</span><span class="n">root</span><span class="p">)</span>
</pre></div>

<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">find_black_height</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">rb_tree</span><span class="o">.</span><span class="n">Node</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="sd">"""Find the number of black nodes below a node</span>

<span class="sd">    Note:</span>
<span class="sd">     This assumes that the starting node is black. In the cases where it's red</span>
<span class="sd">     it will be one more than the true height</span>

<span class="sd">    Args:</span>
<span class="sd">     node: base node to use</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="n">node</span> <span class="ow">is</span> <span class="n">rb_tree</span><span class="o">.</span><span class="n">LEAF</span><span class="p">:</span>
	<span class="k">return</span> <span class="mi">0</span>

    <span class="n">add_for_color</span> <span class="o">=</span> <span class="mi">1</span> <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">is_black</span> <span class="k">else</span> <span class="mi">0</span>
    <span class="n">left</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">find_black_height</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">left</span><span class="p">)</span> <span class="o">+</span> <span class="n">add_for_color</span>
    <span class="n">right</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">find_black_height</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">right</span><span class="p">)</span> <span class="o">+</span> <span class="n">add_for_color</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">enforce_properties</span><span class="p">:</span>
	<span class="k">assert</span> <span class="n">left</span> <span class="o">==</span> <span class="n">right</span><span class="p">,</span> <span class="sa">f</span><span class="s2">"Black Height: Left=</span><span class="si">{</span><span class="n">left</span><span class="si">}</span><span class="s2"> Right=</span><span class="si">{</span><span class="n">right</span><span class="si">}</span><span class="s2">"</span>
    <span class="k">return</span> <span class="nb">max</span><span class="p">((</span><span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">))</span>
</pre></div>
</div>

<div id="outline-container-org2df903f" class="outline-3">
<h3 id="org2df903f">Testing</h3>
<div class="outline-text-3" id="text-org2df903f">
<div class="highlight"><pre><span></span><span class="n">tree</span> <span class="o">=</span> <span class="n">rb_tree</span><span class="o">.</span><span class="n">RedBlackTree</span><span class="p">()</span>
<span class="n">forester</span> <span class="o">=</span> <span class="n">Forester</span><span class="p">(</span><span class="n">tree</span><span class="p">)</span>

<span class="n">root</span> <span class="o">=</span> <span class="n">rb_tree</span><span class="o">.</span><span class="n">Node</span><span class="p">(</span><span class="mi">26</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">rb_tree</span><span class="o">.</span><span class="n">Color</span><span class="o">.</span><span class="n">BLACK</span><span class="p">)</span>
<span class="n">tree</span><span class="o">.</span><span class="n">root</span> <span class="o">=</span> <span class="n">root</span>
<span class="n">expect</span><span class="p">(</span><span class="n">forester</span><span class="o">.</span><span class="n">black_height</span><span class="p">)</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">equal</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>

<span class="n">root</span><span class="o">.</span><span class="n">left</span> <span class="o">=</span> <span class="n">rb_tree</span><span class="o">.</span><span class="n">Node</span><span class="p">(</span><span class="mi">17</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">rb_tree</span><span class="o">.</span><span class="n">Color</span><span class="o">.</span><span class="n">RED</span><span class="p">)</span>
<span class="n">expect</span><span class="p">(</span><span class="n">forester</span><span class="o">.</span><span class="n">black_height</span><span class="p">)</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">equal</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>

<span class="n">root</span><span class="o">.</span><span class="n">left</span><span class="o">.</span><span class="n">left</span> <span class="o">=</span> <span class="n">rb_tree</span><span class="o">.</span><span class="n">Node</span><span class="p">(</span><span class="mi">14</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">rb_tree</span><span class="o">.</span><span class="n">Color</span><span class="o">.</span><span class="n">BLACK</span><span class="p">)</span>
<span class="n">expect</span><span class="p">(</span><span class="n">forester</span><span class="o">.</span><span class="n">black_height</span><span class="p">)</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">equal</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>
<span class="n">root</span><span class="o">.</span><span class="n">left</span><span class="o">.</span><span class="n">left</span><span class="o">.</span><span class="n">left</span> <span class="o">=</span> <span class="n">rb_tree</span><span class="o">.</span><span class="n">Node</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">rb_tree</span><span class="o">.</span><span class="n">Color</span><span class="o">.</span><span class="n">RED</span><span class="p">)</span>
<span class="n">expect</span><span class="p">(</span><span class="n">forester</span><span class="o">.</span><span class="n">black_height</span><span class="p">)</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">equal</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>

<span class="n">root</span><span class="o">.</span><span class="n">left</span><span class="o">.</span><span class="n">left</span><span class="o">.</span><span class="n">right</span> <span class="o">=</span> <span class="n">rb_tree</span><span class="o">.</span><span class="n">Node</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">rb_tree</span><span class="o">.</span><span class="n">Color</span><span class="o">.</span><span class="n">BLACK</span><span class="p">)</span>
<span class="n">expect</span><span class="p">(</span><span class="n">forester</span><span class="o">.</span><span class="n">black_height</span><span class="p">)</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">equal</span><span class="p">(</span><span class="mi">3</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<div id="outline-container-orgea1c97c" class="outline-2">
<h2 id="orgea1c97c">Testing</h2>
<div class="outline-text-2" id="text-orgea1c97c">
<div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">bowling.data_structures.red_black_tree.tree</span> <span class="kn">import</span> <span class="n">Node</span><span class="p">,</span> <span class="n">RedBlackTree</span>
<span class="kn">from</span> <span class="nn">bowling.data_structures.red_black_tree.arborist</span> <span class="kn">import</span> <span class="n">Arborist</span>
<span class="kn">from</span> <span class="nn">bowling.data_structures.red_black_tree.forester</span> <span class="kn">import</span> <span class="n">Forester</span>
</pre></div>
</div>
</div>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../categories/algorithms/" rel="tag">algorithms</a></li>
            <li><a class="tag p-category" href="../../categories/binary-search-trees/" rel="tag">binary search trees</a></li>
            <li><a class="tag p-category" href="../../categories/data-structures/" rel="tag">data structures</a></li>
            <li><a class="tag p-category" href="../../categories/red-black-trees/" rel="tag">red-black trees</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../red-black-properties/" rel="prev" title="Red-Black Properties">Previous post</a>
            </li>
            <li class="next">
                <a href="../red-black-trees-delete/" rel="next" title="Red-Black Trees: Delete">Next post</a>
            </li>
        </ul></nav></aside></article><!--End of body content--><footer id="footer"><a href="mailto:cloisteredmonkey.jmark@slmail.me">The Cloistered Monkey</a> - Powered by         <a href="https://getnikola.com" rel="nofollow">Nikola</a>         
 <a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">
 <img alt="Creative Commons License BY-NC-SA" style="border-width:0; margin-bottom:12px;" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png"></a>
            
            
        </footer>
</div>
</div>


        <script src="../../assets/js/all-nocdn.js"></script><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element){var i=element.getElementsByTagName('img')[0];return i===undefined?'':i.alt;}});
    </script>
</body>
</html>
