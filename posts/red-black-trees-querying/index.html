<!DOCTYPE html>
<html lang="en" prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article#">
<head>
<meta charset="utf-8">
<meta content="A class to query the tree for information" name="description">
<meta content="width=device-width, initial-scale=1" name="viewport">
<title>Red-Black Trees: Querying | Bowling For Data</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta content="#5670d4" name="theme-color">
<meta content="Nikola (getnikola.com)" name="generator">
<link href="../../rss.xml" hreflang="en" rel="alternate" title="RSS" type="application/rss+xml">
<link href="https://necromuralist.github.io/Bowling-For-Data/posts/red-black-trees-querying/index.html" rel="canonical"><!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]-->
<meta content="The Cloistered Monkey" name="author">
<link href="../red-black-properties/index.html" rel="prev" title="Red-Black Properties" type="text/html">
<link href="../red-black-trees-delete/index.html" rel="next" title="Red-Black Trees: Delete" type="text/html">
<meta content="Bowling For Data" property="og:site_name">
<meta content="Red-Black Trees: Querying" property="og:title">
<meta content="https://necromuralist.github.io/Bowling-For-Data/posts/red-black-trees-querying/index.html" property="og:url">
<meta content="A class to query the tree for information" property="og:description">
<meta content="article" property="og:type">
<meta content="2022-03-25T19:15:35-07:00" property="article:published_time">
<meta content="algorithms" property="article:tag">
<meta content="binary search trees" property="article:tag">
<meta content="data structures" property="article:tag">
<meta content="red-black trees" property="article:tag">
</head>
<body>
<a class="sr-only sr-only-focusable" href="#content">Skip to main content</a> <!-- Menubar -->
<nav class="navbar navbar-expand-md static-top mb-4 navbar-light bg-light">
<div class="container"><!-- This keeps the margins nice -->
 <a class="navbar-brand" href="../../"><span id="blog-title">Bowling For Data</span></a> <button aria-controls="bs-navbar" aria-expanded="false" aria-label="Toggle navigation" class="navbar-toggler" data-target="#bs-navbar" data-toggle="collapse" type="button"><span class="navbar-toggler-icon"></span></button>
<div class="collapse navbar-collapse" id="bs-navbar">
<ul class="navbar-nav mr-auto">
<li class="nav-item"><a class="nav-link" href="../../pages/">Pages</a></li>
<li class="nav-item"><a class="nav-link" href="../../archive.html">Archive</a></li>
<li class="nav-item"><a class="nav-link" href="../../categories/">Tags</a></li>
<li class="nav-item"><a class="nav-link" href="../../rss.xml">RSS feed</a></li>
<li class="nav-item dropdown"><a aria-expanded="false" aria-haspopup="true" class="nav-link dropdown-toggle" data-toggle="dropdown" href="#">Monkey Pages</a>
<div class="dropdown-menu"><a class="dropdown-item" href="https://necromuralist.github.io/">The Cloistered Monkey</a> <a class="dropdown-item" href="https://necromuralist.github.io/Ape-Iron/">Ape Iron</a> <a class="dropdown-item" href="https://necromuralist.github.io/Beach-Pig-Thigh/">Beach-Pig Rump & Thigh</a> <a class="dropdown-item" href="https://necromuralist.github.io/Neurotic-Networking/">Neurotic Networking</a> <a class="dropdown-item" href="https://necromuralist.github.io/Terribilis-Ludum/">Terribilis Ludum</a> <a class="dropdown-item" href="https://necromuralist.github.io/Visions-Voices-Data/">Visions, Voices, Data</a></div>
</li>
</ul>
<!-- DuckDuckGo custom search -->
<form action="https://duckduckgo.com/" class="navbar-form pull-left" id="search" method="get" name="search"><input name="sites" type="hidden" value="https://necromuralist.github.io/Bowling-For-Data/"><input name="k8" type="hidden" value="#444444"><input name="k9" type="hidden" value="#D51920"><input name="kt" type="hidden" value="h"><input class="span2" maxlength="255" name="q" placeholder="Searchâ€¦" style="margin-top: 4px;" type="text"><input style="visibility: hidden;" type="submit" value="DuckDuckGo Search"></form>
<!-- End of custom search -->
<ul class="navbar-nav navbar-right">
<li class="nav-item"><a class="nav-link" href="index.org" id="sourcelink">Source</a></li>
</ul>
</div>
<!-- /.navbar-collapse --></div>
<!-- /.container --></nav>
<!-- End of Menubar -->
<div class="container" id="content" role="main">
<div class="body-content"><!--Body content-->
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article">
<header>
<h1 class="p-name entry-title" itemprop="headline name"><a class="u-url" href="#">Red-Black Trees: Querying</a></h1>
<div class="metadata">
<p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">The Cloistered Monkey</span></p>
<p class="dateline"><a href="#" rel="bookmark"><time class="published dt-published" datetime="2022-03-25T19:15:35-07:00" itemprop="datePublished" title="2022-03-25 19:15">2022-03-25 19:15</time></a></p>
<p class="sourceline"><a class="sourcelink" href="index.org">Source</a></p>
</div>
</header>
<div class="e-content entry-content" itemprop="articleBody text">
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="index.html#org02c85f2">The Imports</a></li>
<li><a href="index.html#org77922e0">The Forester</a></li>
<li><a href="index.html#org53d1c4a">Search</a>
<ul>
<li><a href="index.html#org8dfec27">The Implementation</a>
<ul>
<li><a href="index.html#org9e015e4">Testing</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="index.html#orga7c60a5">Miminum and Maximum</a>
<ul>
<li><a href="index.html#org0e20359">Mimimum</a>
<ul>
<li><a href="index.html#orga823b6e">Testing</a></li>
</ul>
</li>
<li><a href="index.html#org71e351e">Maximum</a>
<ul>
<li><a href="index.html#orgea3c7b1">Testing</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="index.html#orgf18bfe8">Height</a></li>
<li><a href="index.html#org7d02d4c">Black Height</a>
<ul>
<li><a href="index.html#org720d82a">Testing</a></li>
</ul>
</li>
<li><a href="index.html#orgdcf863c">Testing</a></li>
</ul>
</div>
</div>
<p><img alt="nil" src="forester.png"></p>
<div class="outline-2" id="outline-container-org02c85f2">
<h2 id="org02c85f2">The Imports</h2>
<div class="outline-text-2" id="text-org02c85f2">
<div class="highlight">
<pre><span></span><span class="kn">from</span> <span class="nn">bowling.data_structures.red_black_tree</span> <span class="kn">import</span> <span class="n">tree</span> <span class="k">as</span> <span class="n">rb_tree</span>
</pre></div>
</div>
</div>
<div class="outline-2" id="outline-container-org77922e0">
<h2 id="org77922e0">The Forester</h2>
<div class="outline-text-2" id="text-org77922e0">
<p>This is the class to hold the tree and answer questions about it. Most of the methods (except for the red-black-height) are the same as the Binary Search Tree with the main exception being that we need to use the <code>NIL</code> object instead of <code>None</code>. This means that nothing in the <code>tree</code> module can use the <code>Forester</code> directly or we'll end up with a circular reference.</p>
<div class="highlight">
<pre><span></span><span class="k">class</span> <span class="nc">Forester</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""The forester manages the tree</span>

<span class="sd">    Args:</span>
<span class="sd">     tree: tree to manage</span>
<span class="sd">     enforce_properties: check that the black-heights are the same</span>
<span class="sd">    """</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tree</span><span class="p">:</span> <span class="n">rb_tree</span><span class="o">.</span><span class="n">RedBlackTree</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">enforce_properties</span><span class="p">:</span> <span class="nb">bool</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tree</span> <span class="o">=</span> <span class="n">tree</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">enforce_properties</span> <span class="o">=</span> <span class="n">enforce_properties</span>
        <span class="k">return</span>
</pre></div>
</div>
</div>
<div class="outline-2" id="outline-container-org53d1c4a">
<h2 id="org53d1c4a">Search</h2>
<div class="outline-text-2" id="text-org53d1c4a">
<p>The first thing we'll look at is searching for a Node in a Binary Search Tree. Because of the way the tree is structured the search looks a lot like a <a href="../binary-search/index.html">Binary Search</a> where we start at the root of the tree and then work our way downwards, picking the next child to follow based on whether the key we're searching for is greater than the right child's key or less than the left child's key. If it's equal then we've found the node we want.</p>
</div>
<div class="outline-3" id="outline-container-org8dfec27">
<h3 id="org8dfec27">The Implementation</h3>
<div class="outline-text-3" id="text-org8dfec27">
<p>I'll add the iterative version of the Tree Search as a method for our Query class.</p>
<div class="highlight">
<pre><span></span><span class="k">def</span> <span class="nf">search</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">rb_tree</span><span class="o">.</span><span class="n">Node</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""Searches the tree for the node with the matching key</span>

<span class="sd">    Args:</span>
<span class="sd">     key: node's key to search for</span>

<span class="sd">    Returns:</span>
<span class="sd">     the node with the key or None if it isn't in the tree</span>
<span class="sd">    """</span>
    <span class="n">node</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tree</span><span class="o">.</span><span class="n">root</span>
    <span class="k">while</span> <span class="n">node</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">rb_tree</span><span class="o">.</span><span class="n">LEAF</span> <span class="ow">and</span> <span class="n">key</span> <span class="o">!=</span> <span class="n">node</span><span class="o">.</span><span class="n">key</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">key</span> <span class="o">&lt;</span> <span class="n">node</span><span class="o">.</span><span class="n">key</span><span class="p">:</span>
            <span class="n">node</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">left</span>
        <span class="k">else</span><span class="p">:</span>
           <span class="n">node</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">right</span>
    <span class="k">return</span> <span class="n">node</span>
</pre></div>
</div>
<div class="outline-4" id="outline-container-org9e015e4">
<h4 id="org9e015e4">Testing</h4>
<div class="outline-text-4" id="text-org9e015e4">
<div class="highlight">
<pre><span></span><span class="c1"># pypi</span>
<span class="kn">from</span> <span class="nn">expects</span> <span class="kn">import</span> <span class="n">be</span><span class="p">,</span> <span class="n">be_none</span><span class="p">,</span> <span class="n">equal</span><span class="p">,</span> <span class="n">expect</span>
<span class="kn">from</span> <span class="nn">bowling.data_structures.red_black_tree</span> <span class="kn">import</span> <span class="n">tree</span> <span class="k">as</span> <span class="n">rb_tree</span>
<span class="kn">from</span> <span class="nn">bowling.data_structures.red_black_tree.forester</span> <span class="kn">import</span> <span class="n">Forester</span>

<span class="n">root</span> <span class="o">=</span> <span class="n">rb_tree</span><span class="o">.</span><span class="n">Node</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="n">tree</span> <span class="o">=</span> <span class="n">rb_tree</span><span class="o">.</span><span class="n">RedBlackTree</span><span class="p">(</span><span class="n">root</span><span class="p">)</span>
<span class="n">query</span> <span class="o">=</span> <span class="n">Forester</span><span class="p">(</span><span class="n">tree</span><span class="p">)</span>
<span class="n">output</span> <span class="o">=</span> <span class="n">query</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="n">expect</span><span class="p">(</span><span class="n">output</span><span class="p">)</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">be</span><span class="p">(</span><span class="n">rb_tree</span><span class="o">.</span><span class="n">NIL</span><span class="p">))</span>
<span class="n">expect</span><span class="p">(</span><span class="n">query</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">equal</span><span class="p">(</span><span class="n">root</span><span class="p">))</span>

<span class="n">five</span> <span class="o">=</span> <span class="n">rb_tree</span><span class="o">.</span><span class="n">Node</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="n">root</span><span class="o">.</span><span class="n">left</span> <span class="o">=</span> <span class="n">five</span>
<span class="n">expect</span><span class="p">(</span><span class="n">query</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">be</span><span class="p">(</span><span class="n">five</span><span class="p">))</span>

<span class="n">root</span><span class="o">.</span><span class="n">right</span> <span class="o">=</span> <span class="n">fifteen</span> <span class="o">=</span> <span class="n">rb_tree</span><span class="o">.</span><span class="n">Node</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span>
<span class="n">expect</span><span class="p">(</span><span class="n">query</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="mi">15</span><span class="p">))</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">be</span><span class="p">(</span><span class="n">fifteen</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="outline-2" id="outline-container-orga7c60a5">
<h2 id="orga7c60a5">Miminum and Maximum</h2>
<div class="outline-text-2" id="text-orga7c60a5"></div>
<div class="outline-3" id="outline-container-org0e20359">
<h3 id="org0e20359">Mimimum</h3>
<div class="outline-text-3" id="text-org0e20359">
<div class="highlight">
<pre><span></span><span class="k">def</span> <span class="nf">min</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">rb_tree</span><span class="o">.</span><span class="n">Node</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">rb_tree</span><span class="o">.</span><span class="n">Node</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""Returns the node with the smallest key</span>

<span class="sd">    Args:</span>
<span class="sd">     node: a node to use as the starting root</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="n">node</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">node</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tree</span><span class="o">.</span><span class="n">root</span>

    <span class="k">while</span> <span class="n">node</span><span class="o">.</span><span class="n">left</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">rb_tree</span><span class="o">.</span><span class="n">LEAF</span><span class="p">:</span>
        <span class="n">node</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">left</span>
    <span class="k">return</span> <span class="n">node</span>
</pre></div>
</div>
<div class="outline-4" id="outline-container-orga823b6e">
<h4 id="orga823b6e">Testing</h4>
<div class="outline-text-4" id="text-orga823b6e">
<div class="highlight">
<pre><span></span><span class="n">root</span> <span class="o">=</span> <span class="n">rb_tree</span><span class="o">.</span><span class="n">Node</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="n">tree</span> <span class="o">=</span> <span class="n">rb_tree</span><span class="o">.</span><span class="n">RedBlackTree</span><span class="p">(</span><span class="n">root</span><span class="p">)</span>
<span class="n">query</span> <span class="o">=</span> <span class="n">Forester</span><span class="p">(</span><span class="n">tree</span><span class="p">)</span>
<span class="n">root</span><span class="o">.</span><span class="n">left</span> <span class="o">=</span> <span class="n">rb_tree</span><span class="o">.</span><span class="n">Node</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="n">root</span><span class="o">.</span><span class="n">left</span><span class="o">.</span><span class="n">left</span> <span class="o">=</span> <span class="n">rb_tree</span><span class="o">.</span><span class="n">Node</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="n">root</span><span class="o">.</span><span class="n">right</span> <span class="o">=</span> <span class="n">rb_tree</span><span class="o">.</span><span class="n">Node</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span>
<span class="n">root</span><span class="o">.</span><span class="n">right</span><span class="o">.</span><span class="n">right</span> <span class="o">=</span> <span class="n">rb_tree</span><span class="o">.</span><span class="n">Node</span><span class="p">(</span><span class="mi">17</span><span class="p">)</span>
<span class="n">root</span><span class="o">.</span><span class="n">right</span><span class="o">.</span><span class="n">left</span> <span class="o">=</span> <span class="n">rb_tree</span><span class="o">.</span><span class="n">Node</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span>
<span class="n">expect</span><span class="p">(</span><span class="n">query</span><span class="o">.</span><span class="n">min</span><span class="p">())</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">equal</span><span class="p">(</span><span class="n">rb_tree</span><span class="o">.</span><span class="n">Node</span><span class="p">(</span><span class="mi">2</span><span class="p">)))</span>

<span class="n">root</span><span class="o">.</span><span class="n">left</span><span class="o">.</span><span class="n">left</span><span class="o">.</span><span class="n">left</span> <span class="o">=</span> <span class="n">rb_tree</span><span class="o">.</span><span class="n">Node</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="n">expect</span><span class="p">(</span><span class="n">query</span><span class="o">.</span><span class="n">min</span><span class="p">())</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">equal</span><span class="p">(</span><span class="n">rb_tree</span><span class="o">.</span><span class="n">Node</span><span class="p">(</span><span class="mi">1</span><span class="p">)))</span>

<span class="n">expect</span><span class="p">(</span><span class="n">query</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">tree</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">right</span><span class="p">))</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">equal</span><span class="p">(</span><span class="n">rb_tree</span><span class="o">.</span><span class="n">Node</span><span class="p">(</span><span class="mi">11</span><span class="p">)))</span>
</pre></div>
</div>
</div>
</div>
<div class="outline-3" id="outline-container-org71e351e">
<h3 id="org71e351e">Maximum</h3>
<div class="outline-text-3" id="text-org71e351e">
<div class="highlight">
<pre><span></span><span class="k">def</span> <span class="nf">max</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">root</span><span class="p">:</span> <span class="n">rb_tree</span><span class="o">.</span><span class="n">Node</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">rb_tree</span><span class="o">.</span><span class="n">Node</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""Returns the node with the largest key</span>

<span class="sd">    Args:</span>
<span class="sd">     root: subtree root to start at</span>

<span class="sd">    Returns:</span>
<span class="sd">     node with the largest key in tree/subtree</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="n">root</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">root</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tree</span><span class="o">.</span><span class="n">root</span>
    <span class="k">while</span> <span class="n">root</span><span class="o">.</span><span class="n">right</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">rb_tree</span><span class="o">.</span><span class="n">LEAF</span><span class="p">:</span>
        <span class="n">root</span> <span class="o">=</span> <span class="n">root</span><span class="o">.</span><span class="n">right</span>
    <span class="k">return</span> <span class="n">root</span>
</pre></div>
</div>
<div class="outline-4" id="outline-container-orgea3c7b1">
<h4 id="orgea3c7b1">Testing</h4>
<div class="outline-text-4" id="text-orgea3c7b1">
<div class="highlight">
<pre><span></span><span class="n">root</span> <span class="o">=</span> <span class="n">rb_tree</span><span class="o">.</span><span class="n">Node</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="n">tree</span> <span class="o">=</span> <span class="n">rb_tree</span><span class="o">.</span><span class="n">RedBlackTree</span><span class="p">(</span><span class="n">root</span><span class="p">)</span>
<span class="n">query</span> <span class="o">=</span> <span class="n">Forester</span><span class="p">(</span><span class="n">tree</span><span class="p">)</span>
<span class="n">root</span><span class="o">.</span><span class="n">left</span> <span class="o">=</span> <span class="n">rb_tree</span><span class="o">.</span><span class="n">Node</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="n">root</span><span class="o">.</span><span class="n">left</span><span class="o">.</span><span class="n">left</span> <span class="o">=</span> <span class="n">rb_tree</span><span class="o">.</span><span class="n">Node</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="n">root</span><span class="o">.</span><span class="n">right</span> <span class="o">=</span> <span class="n">rb_tree</span><span class="o">.</span><span class="n">Node</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span>

<span class="n">expect</span><span class="p">(</span><span class="n">query</span><span class="o">.</span><span class="n">max</span><span class="p">())</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">equal</span><span class="p">(</span><span class="n">rb_tree</span><span class="o">.</span><span class="n">Node</span><span class="p">(</span><span class="mi">15</span><span class="p">)))</span>

<span class="n">root</span><span class="o">.</span><span class="n">right</span><span class="o">.</span><span class="n">right</span> <span class="o">=</span> <span class="n">rb_tree</span><span class="o">.</span><span class="n">Node</span><span class="p">(</span><span class="mi">17</span><span class="p">)</span>
<span class="n">expect</span><span class="p">(</span><span class="n">query</span><span class="o">.</span><span class="n">max</span><span class="p">())</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">equal</span><span class="p">(</span><span class="n">rb_tree</span><span class="o">.</span><span class="n">Node</span><span class="p">(</span><span class="mi">17</span><span class="p">)))</span>
<span class="n">expect</span><span class="p">(</span><span class="n">query</span><span class="o">.</span><span class="n">min</span><span class="p">())</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">equal</span><span class="p">(</span><span class="n">rb_tree</span><span class="o">.</span><span class="n">Node</span><span class="p">(</span><span class="mi">2</span><span class="p">)))</span>

<span class="n">expect</span><span class="p">(</span><span class="n">query</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">tree</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">left</span><span class="p">))</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">equal</span><span class="p">(</span><span class="n">rb_tree</span><span class="o">.</span><span class="n">Node</span><span class="p">(</span><span class="mi">5</span><span class="p">)))</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="outline-2" id="outline-container-orgf18bfe8">
<h2 id="orgf18bfe8">Height</h2>
<div class="outline-text-2" id="text-orgf18bfe8">
<p>The height of the Binary Search Tree is the number of edges from the root of the tree to the furthest node. The algorithms we're looking at here don't use them but I'm going to use height to look at how the order you insert nodes in the tree affects the height.</p>
<div class="highlight">
<pre><span></span><span class="nd">@property</span>
<span class="k">def</span> <span class="nf">height</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""The length of the longest path starting at the root</span>

<span class="sd">    Returns:</span>
<span class="sd">     number of edges from root to furthest leaf</span>
<span class="sd">    """</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">tree_height</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tree</span><span class="o">.</span><span class="n">root</span><span class="p">)</span>
</pre></div>
<div class="highlight">
<pre><span></span><span class="k">def</span> <span class="nf">tree_height</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">rb_tree</span><span class="o">.</span><span class="n">Node</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""The length of the longest path starting at the node</span>

<span class="sd">    Args:</span>
<span class="sd">     the node to start the measurement from</span>

<span class="sd">    Returns:</span>
<span class="sd">     number of edges from root to furthest leaf</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="n">node</span> <span class="ow">is</span> <span class="n">rb_tree</span><span class="o">.</span><span class="n">LEAF</span><span class="p">:</span>
        <span class="k">return</span> <span class="o">-</span><span class="mi">1</span>

    <span class="n">left</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tree_height</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">left</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>
    <span class="n">right</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tree_height</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">right</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>
    <span class="k">return</span> <span class="nb">max</span><span class="p">(</span><span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">)</span>
</pre></div>
<div class="highlight">
<pre><span></span><span class="n">tree</span> <span class="o">=</span> <span class="n">rb_tree</span><span class="o">.</span><span class="n">RedBlackTree</span><span class="p">()</span>
<span class="n">query</span> <span class="o">=</span> <span class="n">Forester</span><span class="p">(</span><span class="n">tree</span><span class="p">)</span>

<span class="n">expect</span><span class="p">(</span><span class="n">query</span><span class="o">.</span><span class="n">height</span><span class="p">)</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">equal</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">))</span>
<span class="n">root</span> <span class="o">=</span> <span class="n">rb_tree</span><span class="o">.</span><span class="n">Node</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="n">tree</span><span class="o">.</span><span class="n">root</span> <span class="o">=</span> <span class="n">root</span>
<span class="n">expect</span><span class="p">(</span><span class="n">query</span><span class="o">.</span><span class="n">height</span><span class="p">)</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">equal</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>

<span class="n">root</span><span class="o">.</span><span class="n">left</span> <span class="o">=</span> <span class="n">rb_tree</span><span class="o">.</span><span class="n">Node</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span>
<span class="n">expect</span><span class="p">(</span><span class="n">query</span><span class="o">.</span><span class="n">height</span><span class="p">)</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">equal</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>

<span class="n">root</span><span class="o">.</span><span class="n">right</span> <span class="o">=</span> <span class="n">rb_tree</span><span class="o">.</span><span class="n">Node</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span>
<span class="n">expect</span><span class="p">(</span><span class="n">query</span><span class="o">.</span><span class="n">height</span><span class="p">)</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">equal</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>

<span class="n">root</span><span class="o">.</span><span class="n">left</span><span class="o">.</span><span class="n">left</span> <span class="o">=</span> <span class="n">rb_tree</span><span class="o">.</span><span class="n">Node</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="n">expect</span><span class="p">(</span><span class="n">query</span><span class="o">.</span><span class="n">height</span><span class="p">)</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">equal</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>

<span class="n">root</span><span class="o">.</span><span class="n">left</span><span class="o">.</span><span class="n">left</span><span class="o">.</span><span class="n">left</span> <span class="o">=</span> <span class="n">rb_tree</span><span class="o">.</span><span class="n">Node</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="n">expect</span><span class="p">(</span><span class="n">query</span><span class="o">.</span><span class="n">height</span><span class="p">)</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">equal</span><span class="p">(</span><span class="mi">3</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="outline-2" id="outline-container-org7d02d4c">
<h2 id="org7d02d4c">Black Height</h2>
<div class="outline-text-2" id="text-org7d02d4c">
<div class="highlight">
<pre><span></span><span class="nd">@property</span>
<span class="k">def</span> <span class="nf">black_height</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""The number of black nodes below the root</span>
<span class="sd">    """</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">find_black_height</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tree</span><span class="o">.</span><span class="n">root</span><span class="p">)</span>
</pre></div>
<div class="highlight">
<pre><span></span><span class="k">def</span> <span class="nf">find_black_height</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">rb_tree</span><span class="o">.</span><span class="n">Node</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">"""Find the number of black nodes below a node</span>

<span class="sd">    Note:</span>
<span class="sd">     This assumes that the starting node is black. In the cases where it's red</span>
<span class="sd">     it will be one more than the true height</span>

<span class="sd">    Args:</span>
<span class="sd">     node: base node to use</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="n">node</span> <span class="ow">is</span> <span class="n">rb_tree</span><span class="o">.</span><span class="n">LEAF</span><span class="p">:</span>
        <span class="k">return</span> <span class="mi">0</span>

    <span class="n">add_for_color</span> <span class="o">=</span> <span class="mi">1</span> <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">is_black</span> <span class="k">else</span> <span class="mi">0</span>
    <span class="n">left</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">find_black_height</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">left</span><span class="p">)</span> <span class="o">+</span> <span class="n">add_for_color</span>
    <span class="n">right</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">find_black_height</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">right</span><span class="p">)</span> <span class="o">+</span> <span class="n">add_for_color</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">enforce_properties</span><span class="p">:</span>
        <span class="k">assert</span> <span class="n">left</span> <span class="o">==</span> <span class="n">right</span><span class="p">,</span> <span class="sa">f</span><span class="s2">"Black Height: Left=</span><span class="si">{</span><span class="n">left</span><span class="si">}</span><span class="s2"> Right=</span><span class="si">{</span><span class="n">right</span><span class="si">}</span><span class="s2">"</span>
    <span class="k">return</span> <span class="nb">max</span><span class="p">((</span><span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">))</span>
</pre></div>
</div>
<div class="outline-3" id="outline-container-org720d82a">
<h3 id="org720d82a">Testing</h3>
<div class="outline-text-3" id="text-org720d82a">
<div class="highlight">
<pre><span></span><span class="n">tree</span> <span class="o">=</span> <span class="n">rb_tree</span><span class="o">.</span><span class="n">RedBlackTree</span><span class="p">()</span>
<span class="n">forester</span> <span class="o">=</span> <span class="n">Forester</span><span class="p">(</span><span class="n">tree</span><span class="p">)</span>

<span class="n">root</span> <span class="o">=</span> <span class="n">rb_tree</span><span class="o">.</span><span class="n">Node</span><span class="p">(</span><span class="mi">26</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">rb_tree</span><span class="o">.</span><span class="n">Color</span><span class="o">.</span><span class="n">BLACK</span><span class="p">)</span>
<span class="n">tree</span><span class="o">.</span><span class="n">root</span> <span class="o">=</span> <span class="n">root</span>
<span class="n">expect</span><span class="p">(</span><span class="n">forester</span><span class="o">.</span><span class="n">black_height</span><span class="p">)</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">equal</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>

<span class="n">root</span><span class="o">.</span><span class="n">left</span> <span class="o">=</span> <span class="n">rb_tree</span><span class="o">.</span><span class="n">Node</span><span class="p">(</span><span class="mi">17</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">rb_tree</span><span class="o">.</span><span class="n">Color</span><span class="o">.</span><span class="n">RED</span><span class="p">)</span>
<span class="n">expect</span><span class="p">(</span><span class="n">forester</span><span class="o">.</span><span class="n">black_height</span><span class="p">)</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">equal</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>

<span class="n">root</span><span class="o">.</span><span class="n">left</span><span class="o">.</span><span class="n">left</span> <span class="o">=</span> <span class="n">rb_tree</span><span class="o">.</span><span class="n">Node</span><span class="p">(</span><span class="mi">14</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">rb_tree</span><span class="o">.</span><span class="n">Color</span><span class="o">.</span><span class="n">BLACK</span><span class="p">)</span>
<span class="n">expect</span><span class="p">(</span><span class="n">forester</span><span class="o">.</span><span class="n">black_height</span><span class="p">)</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">equal</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>
<span class="n">root</span><span class="o">.</span><span class="n">left</span><span class="o">.</span><span class="n">left</span><span class="o">.</span><span class="n">left</span> <span class="o">=</span> <span class="n">rb_tree</span><span class="o">.</span><span class="n">Node</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">rb_tree</span><span class="o">.</span><span class="n">Color</span><span class="o">.</span><span class="n">RED</span><span class="p">)</span>
<span class="n">expect</span><span class="p">(</span><span class="n">forester</span><span class="o">.</span><span class="n">black_height</span><span class="p">)</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">equal</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>

<span class="n">root</span><span class="o">.</span><span class="n">left</span><span class="o">.</span><span class="n">left</span><span class="o">.</span><span class="n">right</span> <span class="o">=</span> <span class="n">rb_tree</span><span class="o">.</span><span class="n">Node</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">rb_tree</span><span class="o">.</span><span class="n">Color</span><span class="o">.</span><span class="n">BLACK</span><span class="p">)</span>
<span class="n">expect</span><span class="p">(</span><span class="n">forester</span><span class="o">.</span><span class="n">black_height</span><span class="p">)</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">equal</span><span class="p">(</span><span class="mi">3</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<div class="outline-2" id="outline-container-orgdcf863c">
<h2 id="orgdcf863c">Testing</h2>
<div class="outline-text-2" id="text-orgdcf863c">
<div class="highlight">
<pre><span></span><span class="kn">from</span> <span class="nn">bowling.data_structures.red_black_tree.tree</span> <span class="kn">import</span> <span class="n">Node</span><span class="p">,</span> <span class="n">RedBlackTree</span>
<span class="kn">from</span> <span class="nn">bowling.data_structures.red_black_tree.arborist</span> <span class="kn">import</span> <span class="n">Arborist</span>
<span class="kn">from</span> <span class="nn">bowling.data_structures.red_black_tree.forester</span> <span class="kn">import</span> <span class="n">Forester</span>
</pre></div>
</div>
</div>
</div>
<aside class="postpromonav">
<nav>
<ul class="tags" itemprop="keywords">
<li><a class="tag p-category" href="../../categories/algorithms/index.html" rel="tag">algorithms</a></li>
<li><a class="tag p-category" href="../../categories/binary-search-trees/index.html" rel="tag">binary search trees</a></li>
<li><a class="tag p-category" href="../../categories/data-structures/index.html" rel="tag">data structures</a></li>
<li><a class="tag p-category" href="../../categories/red-black-trees/index.html" rel="tag">red-black trees</a></li>
</ul>
<ul class="pager hidden-print">
<li class="previous"><a href="../red-black-properties/index.html" rel="prev" title="Red-Black Properties">Previous post</a></li>
<li class="next"><a href="../red-black-trees-delete/index.html" rel="next" title="Red-Black Trees: Delete">Next post</a></li>
</ul>
</nav>
</aside>
</article>
<!--End of body content-->
<footer id="footer">Scribbles by <a href="mailto:cloisteredmonkey.jmark@slmail.me">The Cloistered Monkey</a> Â© 2024 - Powered by <a href="https://getnikola.com" rel="nofollow">Nikola</a>
<div id="license" xmlns:cc="http://creativecommons.org/ns#" xmlns:dct="http://purl.org/dc/terms/"><span property="dct:title">Ape-Iron</span> is licensed under <a href="http://creativecommons.org/licenses/by-sa/4.0/?ref=chooser-v1" rel="license noopener noreferrer" style="display:inline-block;" target="_blank">CC BY-SA 4.0 <img src="https://mirrors.creativecommons.org/presskit/icons/cc.svg?ref=chooser-v1"><img src="https://mirrors.creativecommons.org/presskit/icons/by.svg?ref=chooser-v1"><img src="https://mirrors.creativecommons.org/presskit/icons/sa.svg?ref=chooser-v1"></a></div>
</footer>
</div>
<script src="../../assets/js/all-nocdn.js"></script>
<script>

    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element){var i=element.getElementsByTagName('img')[0];return i===undefined?'':i.alt;}});
</script></div>
</body>
</html>
