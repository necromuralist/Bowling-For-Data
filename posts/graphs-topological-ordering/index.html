<!DOCTYPE html>
<html lang="en" prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article#">
<head>
<meta charset="utf-8">
<meta content="A look at Topological Sort (an application of Depth First Search)." name="description">
<meta content="width=device-width, initial-scale=1" name="viewport">
<title>Graphs: Topological Ordering | Bowling For Data</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta content="#5670d4" name="theme-color">
<meta content="Nikola (getnikola.com)" name="generator">
<link href="../../rss.xml" hreflang="en" rel="alternate" title="RSS" type="application/rss+xml">
<link href="https://necromuralist.github.io/Bowling-For-Data/posts/graphs-topological-ordering/index.html" rel="canonical"><!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]-->
<meta content="The Cloistered Monkey" name="author">
<link href="../graphs-depth-first-search/index.html" rel="prev" title="Graphs: Depth-First-Search" type="text/html">
<link href="../graphs-strongly-connected-components/index.html" rel="next" title="Graphs: Strongly Connected Components" type="text/html">
<meta content="Bowling For Data" property="og:site_name">
<meta content="Graphs: Topological Ordering" property="og:title">
<meta content="https://necromuralist.github.io/Bowling-For-Data/posts/graphs-topological-ordering/index.html" property="og:url">
<meta content="A look at Topological Sort (an application of Depth First Search)." property="og:description">
<meta content="article" property="og:type">
<meta content="2022-04-19T19:17:55-07:00" property="article:published_time">
<meta content="algorithms" property="article:tag">
<meta content="data structures" property="article:tag">
<meta content="graphs" property="article:tag">
</head>
<body>
<a class="sr-only sr-only-focusable" href="#content">Skip to main content</a> <!-- Menubar -->
<nav class="navbar navbar-expand-md static-top mb-4 navbar-light bg-light">
<div class="container"><!-- This keeps the margins nice -->
 <a class="navbar-brand" href="../../"><span id="blog-title">Bowling For Data</span></a> <button aria-controls="bs-navbar" aria-expanded="false" aria-label="Toggle navigation" class="navbar-toggler" data-target="#bs-navbar" data-toggle="collapse" type="button"><span class="navbar-toggler-icon"></span></button>
<div class="collapse navbar-collapse" id="bs-navbar">
<ul class="navbar-nav mr-auto">
<li class="nav-item"><a class="nav-link" href="../../pages/">Pages</a></li>
<li class="nav-item"><a class="nav-link" href="../../archive.html">Archive</a></li>
<li class="nav-item"><a class="nav-link" href="../../categories/">Tags</a></li>
<li class="nav-item"><a class="nav-link" href="../../rss.xml">RSS feed</a></li>
<li class="nav-item dropdown"><a aria-expanded="false" aria-haspopup="true" class="nav-link dropdown-toggle" data-toggle="dropdown" href="#">Monkey Pages</a>
<div class="dropdown-menu"><a class="dropdown-item" href="https://necromuralist.github.io/">The Cloistered Monkey</a> <a class="dropdown-item" href="https://necromuralist.github.io/Ape-Iron/">Ape Iron</a> <a class="dropdown-item" href="https://necromuralist.github.io/Beach-Pig-Thigh/">Beach-Pig Rump & Thigh</a> <a class="dropdown-item" href="https://necromuralist.github.io/Neurotic-Networking/">Neurotic Networking</a> <a class="dropdown-item" href="https://necromuralist.github.io/Terribilis-Ludum/">Terribilis Ludum</a> <a class="dropdown-item" href="https://necromuralist.github.io/Visions-Voices-Data/">Visions, Voices, Data</a></div>
</li>
</ul>
<!-- DuckDuckGo custom search -->
<form action="https://duckduckgo.com/" class="navbar-form pull-left" id="search" method="get" name="search"><input name="sites" type="hidden" value="https://necromuralist.github.io/Bowling-For-Data/"><input name="k8" type="hidden" value="#444444"><input name="k9" type="hidden" value="#D51920"><input name="kt" type="hidden" value="h"><input class="span2" maxlength="255" name="q" placeholder="Search…" style="margin-top: 4px;" type="text"><input style="visibility: hidden;" type="submit" value="DuckDuckGo Search"></form>
<!-- End of custom search -->
<ul class="navbar-nav navbar-right">
<li class="nav-item"><a class="nav-link" href="index.org" id="sourcelink">Source</a></li>
</ul>
</div>
<!-- /.navbar-collapse --></div>
<!-- /.container --></nav>
<!-- End of Menubar -->
<div class="container" id="content" role="main">
<div class="body-content"><!--Body content-->
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article">
<header>
<h1 class="p-name entry-title" itemprop="headline name"><a class="u-url" href="#">Graphs: Topological Ordering</a></h1>
<div class="metadata">
<p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">The Cloistered Monkey</span></p>
<p class="dateline"><a href="#" rel="bookmark"><time class="published dt-published" datetime="2022-04-19T19:17:55-07:00" itemprop="datePublished" title="2022-04-19 19:17">2022-04-19 19:17</time></a></p>
<p class="sourceline"><a class="sourcelink" href="index.org">Source</a></p>
</div>
</header>
<div class="e-content entry-content" itemprop="articleBody text">
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="index.html#org106c6a4">Beginning</a></li>
<li><a href="index.html#org3e692be">Middle</a></li>
</ul>
</div>
</div>
<div class="outline-2" id="outline-container-org106c6a4">
<h2 id="org106c6a4">Beginning</h2>
<div class="outline-text-2" id="text-org106c6a4">
<div class="highlight">
<pre><span></span><span class="c1"># python</span>
<span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">partial</span>

<span class="c1"># this project</span>
<span class="kn">from</span> <span class="nn">bowling.data_structures.graphs.depth_first_search</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">DFSVertex</span><span class="p">,</span>
    <span class="n">DepthFirstSearch</span><span class="p">,</span>
    <span class="n">DirectedGraph</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="outline-2" id="outline-container-org3e692be">
<h2 id="org3e692be">Middle</h2>
<div class="outline-text-2" id="text-org3e692be">
<div class="highlight">
<pre><span></span><span class="n">underpants</span> <span class="o">=</span> <span class="n">DFSVertex</span><span class="p">(</span><span class="s2">"underpants"</span><span class="p">)</span>
<span class="n">pants</span> <span class="o">=</span> <span class="n">DFSVertex</span><span class="p">(</span><span class="s2">"pants"</span><span class="p">)</span>
<span class="n">belt</span> <span class="o">=</span> <span class="n">DFSVertex</span><span class="p">(</span><span class="s2">"belt"</span><span class="p">)</span>
<span class="n">socks</span> <span class="o">=</span> <span class="n">DFSVertex</span><span class="p">(</span><span class="s2">"socks"</span><span class="p">)</span>
<span class="n">watch</span> <span class="o">=</span> <span class="n">DFSVertex</span><span class="p">(</span><span class="s2">"watch"</span><span class="p">)</span>
<span class="n">shoes</span> <span class="o">=</span> <span class="n">DFSVertex</span><span class="p">(</span><span class="s2">"shoes"</span><span class="p">)</span>
<span class="n">shirt</span> <span class="o">=</span> <span class="n">DFSVertex</span><span class="p">(</span><span class="s2">"shirt"</span><span class="p">)</span>
<span class="n">tie</span> <span class="o">=</span> <span class="n">DFSVertex</span><span class="p">(</span><span class="s2">"tie"</span><span class="p">)</span>
<span class="n">jacket</span> <span class="o">=</span> <span class="n">DFSVertex</span><span class="p">(</span><span class="s2">"jacket"</span><span class="p">)</span>

<span class="n">graph</span> <span class="o">=</span> <span class="n">DirectedGraph</span><span class="p">()</span>

<span class="n">graph</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">underpants</span><span class="p">,</span> <span class="n">pants</span><span class="p">)</span>
<span class="n">graph</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">underpants</span><span class="p">,</span> <span class="n">shoes</span><span class="p">)</span>
<span class="n">graph</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">socks</span><span class="p">,</span> <span class="n">shoes</span><span class="p">)</span>
<span class="n">graph</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">pants</span><span class="p">,</span> <span class="n">shoes</span><span class="p">)</span>
<span class="n">graph</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">pants</span><span class="p">,</span> <span class="n">belt</span><span class="p">)</span>
<span class="n">graph</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">shirt</span><span class="p">,</span> <span class="n">belt</span><span class="p">)</span>
<span class="n">graph</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">shirt</span><span class="p">,</span> <span class="n">tie</span><span class="p">)</span>
<span class="n">graph</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">tie</span><span class="p">,</span> <span class="n">jacket</span><span class="p">)</span>
<span class="n">graph</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">belt</span><span class="p">,</span> <span class="n">jacket</span><span class="p">)</span>
<span class="n">graph</span><span class="o">.</span><span class="n">vertices</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">watch</span><span class="p">)</span>
</pre></div>
<div class="highlight">
<pre><span></span><span class="n">search</span> <span class="o">=</span> <span class="n">DepthFirstSearch</span><span class="p">(</span><span class="n">graph</span><span class="p">)</span>
<span class="n">search</span><span class="p">()</span>

<span class="n">topologically_sorted</span> <span class="o">=</span> <span class="nb">reversed</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="n">graph</span><span class="o">.</span><span class="n">vertices</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="n">v</span><span class="o">.</span><span class="n">finished</span><span class="p">))</span>
<span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">topologically_sorted</span><span class="p">:</span>
    <span class="n">predecessor</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">predecessor</span><span class="o">.</span><span class="n">identifier</span> <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">predecessor</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="s2">"None"</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">node</span><span class="o">.</span><span class="n">identifier</span><span class="si">}</span><span class="s2"> </span><span class="se">\t</span><span class="s2">finished: </span><span class="si">{</span><span class="n">node</span><span class="o">.</span><span class="n">finished</span><span class="si">}</span><span class="se">\t</span><span class="s2"> predecessor: </span><span class="si">{</span><span class="n">predecessor</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
</pre></div>
<pre class="example">
watch   finished: 18     predecessor: None
shirt   finished: 16     predecessor: None
tie     finished: 15     predecessor: shirt
socks   finished: 12     predecessor: None
underpants      finished: 10     predecessor: None
pants   finished: 9      predecessor: underpants
belt    finished: 8      predecessor: pants
jacket  finished: 7      predecessor: belt
shoes   finished: 4      predecessor: pants
</pre>
<p>This differs from the CLRS solution. The ordering depends on the order in which the edges are encountered (in this case it means the order in which the edges are added to the graph) so the sort won't always be the same. The important feature is that no item later in the list needs to come before any that precede it.</p>
</div>
</div>
</div>
<aside class="postpromonav">
<nav>
<ul class="tags" itemprop="keywords">
<li><a class="tag p-category" href="../../categories/algorithms/index.html" rel="tag">algorithms</a></li>
<li><a class="tag p-category" href="../../categories/data-structures/index.html" rel="tag">data structures</a></li>
<li><a class="tag p-category" href="../../categories/graphs/index.html" rel="tag">graphs</a></li>
</ul>
<ul class="pager hidden-print">
<li class="previous"><a href="../graphs-depth-first-search/index.html" rel="prev" title="Graphs: Depth-First-Search">Previous post</a></li>
<li class="next"><a href="../graphs-strongly-connected-components/index.html" rel="next" title="Graphs: Strongly Connected Components">Next post</a></li>
</ul>
</nav>
</aside>
</article>
<!--End of body content-->
<footer id="footer">Scribbles by <a href="mailto:cloisteredmonkey.jmark@slmail.me">The Cloistered Monkey</a> © 2024 - Powered by <a href="https://getnikola.com" rel="nofollow">Nikola</a>
<div id="license" xmlns:cc="http://creativecommons.org/ns#" xmlns:dct="http://purl.org/dc/terms/"><span property="dct:title">Ape-Iron</span> is licensed under <a href="http://creativecommons.org/licenses/by-sa/4.0/?ref=chooser-v1" rel="license noopener noreferrer" style="display:inline-block;" target="_blank">CC BY-SA 4.0 <img src="https://mirrors.creativecommons.org/presskit/icons/cc.svg?ref=chooser-v1"><img src="https://mirrors.creativecommons.org/presskit/icons/by.svg?ref=chooser-v1"><img src="https://mirrors.creativecommons.org/presskit/icons/sa.svg?ref=chooser-v1"></a></div>
</footer>
</div>
<script src="../../assets/js/all-nocdn.js"></script>
<script>

    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element){var i=element.getElementsByTagName('img')[0];return i===undefined?'':i.alt;}});
</script></div>
</body>
</html>
